<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Travelian – TRAVEL, TOURS & BEYOND | Flights, Umrah, Visas & Travel Insurance</title>
  <meta name="description" content="Book flights, Umrah packages, visit & study visas, hotel bookings and travel insurance with Travelian. Trusted travel agency in Pakistan – best rates and 24/7 support." />
  <meta name="keywords" content="travel agency Pakistan, flight booking, Umrah packages, visit visa, study visa, hotel booking, travel insurance, Pakistan travel, cheap flights, Umrah travel" />
  <meta name="author" content="Travelian Pvt. Ltd." />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="language" content="English" />
  <meta name="revisit-after" content="7 days" />
  <link rel="canonical" href="https://www.travelian.pk/" />
  <link rel="icon" href="/src/assets/images/smfavicon.png" type="image/png" />
  <link rel="apple-touch-icon" href="/src/assets/images/smfavicon.png" />
  <link rel="manifest" href="/manifest.json" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Travelian" />
  <meta property="og:title" content="Travelian – TRAVEL, TOURS & BEYOND | Flights, Umrah, Visas & Travel Insurance" />
  <meta property="og:description" content="Book flights, Umrah packages, visit & study visas, hotel bookings and travel insurance with Travelian. Trusted travel agency in Pakistan – best rates and 24/7 support." />
  <meta property="og:image" content="https://www.travelian.pk/src/assets/images/Homepagebanner-opt.jpg" />
  <meta property="og:image:width" content="1920" />
  <meta property="og:image:height" content="600" />
  <meta property="og:image:alt" content="Travelian travel banner – flights, tours and beyond" />
  <meta property="og:url" content="https://www.travelian.pk/" />
  <meta property="og:locale" content="en_US" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Travelian – TRAVEL, TOURS & BEYOND" />
  <meta name="twitter:description" content="Book flights, Umrah packages, visit & study visas, hotel bookings and travel insurance with Travelian. Trusted travel agency in Pakistan." />
  <meta name="twitter:image" content="https://www.travelian.pk/src/assets/images/Homepagebanner-opt.jpg" />
  <meta name="twitter:site" content="@travelianpk" />
  <meta name="geo.region" content="PK" />
  <meta name="geo.placename" content="Pakistan" />
  <meta name="contact" content="travelian.pk@gmail.com" />
  <meta name="reply-to" content="travelian.pk@gmail.com" />
  <meta name="theme-color" content="#F2891B" />
  <meta name="msapplication-TileColor" content="#F2891B" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/src/styles/hero.css?v=20250221" />
  <link rel="stylesheet" href="/src/styles/responsive.css?v=20250221" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <script src="/src/utils/airports-autocomplete.js?v=17"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <style>:root{--primary-orange:#F2891B;--dark-orange:#E97800;--primary-blue:#1F2F7A;--dark-blue:#16235C;--light-gray:#F5F6F8;--text-dark:#333333;--brand-primary:var(--primary-orange);--brand-primary-dark:var(--dark-orange);--brand-primary-tint:#fff5eb;--brand-blue:var(--primary-orange);--brand-blue-dark:var(--dark-orange);--brand-blue-tint:#fff5eb;--brand-orange:var(--primary-orange);--brand-orange-dark:var(--dark-orange);--brand-orange-tint:#fff5eb;--hero-search-green:var(--primary-orange);--hero-search-green-dark:var(--dark-orange);--hero-search-green-tint:#fff5eb;--text-primary:var(--text-dark);--text-secondary:#374151;--text-muted:#6b7280;--border-light:#e5e7eb;--section-padding:60px;--section-heading-size:clamp(1.35rem, 3vw + 1rem, 1.75rem);--section-subheading-size:clamp(1rem, 1.5vw + 0.85rem, 1.1rem);--card-radius:16px;--card-shadow:0 2px 12px rgba(0, 0, 0, 0.06);--card-shadow-hover:0 12px 28px rgba(0, 0, 0, 0.1);--card-lift:-6px}@media (max-width:768px){:root{--section-padding:40px}}.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;line-height:1.5;text-decoration:none;border-radius:10px;border:none;cursor:pointer;transition:background .2s,color .2s,border-color .2s,transform .2s;font-family:inherit}.btn-primary{background:var(--primary-orange);color:#fff}.btn-primary:hover{background:var(--dark-orange);color:#fff;transform:translateY(-2px)}.btn-secondary{background:var(--primary-blue);color:#fff}.btn-secondary:hover{background:var(--dark-blue);color:#fff;transform:translateY(-2px)}.btn-outline{background:0 0;color:var(--primary-orange);border:2px solid var(--primary-orange)}.btn-outline:hover{background:var(--primary-orange);color:#fff;transform:translateY(-2px)}*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",system-ui,sans-serif}html{margin:0;padding:0;font-size:clamp(14px, 2vw + 14px, 16px);-webkit-text-size-adjust:100%;overflow-x:clip;overflow-y:auto;height:100%}body{margin:0;padding:0;border:none;outline:0;overflow-x:clip;overflow-y:auto;word-wrap:break-word;overflow-wrap:break-word;background:#fff;color:var(--text-primary);font-size:1rem;line-height:1.6;-webkit-font-smoothing:antialiased;height:100%;min-width:0}iframe,img,video{max-width:100%;height:auto}img,video{display:block}table{overflow-x:auto;display:block;max-width:100%}.container{width:100%;max-width:1400px;margin:0 auto;padding:72px 1rem 1rem;box-sizing:border-box;border:none;outline:0;min-width:0}@media (min-width:600px){.container{padding-left:1.5rem;padding-right:1.5rem}}@media (min-width:1024px){.container{padding-left:2rem;padding-right:2rem}}.utility-bar{display:flex;align-items:center;justify-content:flex-end;flex-wrap:wrap;gap:.75rem;padding:.6rem 1rem;border:none;border-bottom:1px solid var(--border-light);font-size:.875rem;color:var(--text-muted);position:relative;z-index:100}.utility-bar a{text-decoration:none;color:var(--text-muted);display:inline-flex;align-items:center;gap:.4rem;transition:color .2s}.utility-bar a:hover{color:var(--brand-orange)}.main-header{position:fixed;top:0;left:0;right:0;width:100%;max-width:100%;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem;padding:.75rem 1rem;box-sizing:border-box;border:none;border-bottom:1px solid rgba(255,255,255,.2);outline:0;z-index:1000;background:var(--primary-blue);box-shadow:0 2px 8px rgba(0,0,0,.15)}.brand{display:flex;align-items:center;gap:.75rem;visibility:visible;width:auto;flex-shrink:0;transform:none}.brand-link{text-decoration:none;color:inherit;cursor:pointer}.brand-link:hover{opacity:.9}.brand-logo{display:block;height:72px;width:auto;max-width:220px;object-fit:contain}.brand-logo-design{display:none;align-items:center;gap:0;transform:none}.logo-icon{width:60px;height:60px;background:0 0;border:4px solid var(--brand-blue);border-radius:12px;display:flex;align-items:center;justify-content:center;position:relative}.plane-icon-img{width:57px;height:57px;object-fit:contain;display:block}.airplane-silhouette{width:40px;height:40px;position:relative;transform:rotate(30deg)}.airplane-body{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-30deg);width:28px;height:5px;background:var(--brand-blue);border-radius:3px 0 0 3px}.airplane-nose{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-30deg);width:0;height:0;border-left:12px solid var(--brand-blue);border-top:6px solid transparent;border-bottom:6px solid transparent;margin-left:-14px}.airplane-wing-main{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-30deg);width:0;height:0;border-left:16px solid var(--brand-blue);border-top:6px solid transparent;border-bottom:6px solid transparent;margin-left:4px}.airplane-tail{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-30deg);width:0;height:0;border-right:8px solid var(--brand-blue);border-top:4px solid transparent;border-bottom:4px solid transparent;margin-left:12px}.logo-text-container{display:flex;flex-direction:column;line-height:1.2}.logo-main-text{font-family:"Russo One",sans-serif;font-size:calc(2rem + 3px);font-weight:700;letter-spacing:.02em;transform:none;margin-top:0;margin-left:3px}.logo-travel{font-family:"Russo One",sans-serif;color:var(--brand-blue)}.logo-ian{font-family:"Russo One",sans-serif;color:var(--brand-orange)}.logo-globe-wrap{display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;margin:0;width:auto;height:auto}.logo-globe{width:.6em;height:.6em;color:inherit}.logo-globe-img{width:1.2em;height:1.2em;object-fit:contain;vertical-align:middle;display:inline-block!important;visibility:visible!important;opacity:1!important}.logo-sub-text{font-family:"Russo One",sans-serif;font-size:calc((.75rem + 2px) * .95);font-weight:700;color:#000;letter-spacing:.06em;text-transform:uppercase;transform:translateX(-10%);margin-top:-1px;margin-left:24px}@media (max-width:600px){.logo-main-text{font-size:clamp(1.1rem, 5vw + .5rem, 1.5rem)}.logo-sub-text{font-size:.6rem;margin-left:12px}.brand-logo{max-height:36px;width:auto}}.brand-text{display:flex;flex-direction:column;gap:.15rem}.brand-name{font-size:1.5rem;font-weight:700;color:#000;letter-spacing:-.02em}.brand-tagline{font-size:.75rem;font-weight:400;color:#000}.header-nav-right{display:flex;align-items:center;gap:2rem;flex-shrink:0}.nav-menu{display:flex;align-items:center;flex-wrap:nowrap;gap:1.5rem;font-size:.9rem;font-weight:600;margin:0;padding:0}.nav-menu a{text-decoration:none;color:#fff;font-weight:600;position:relative;padding:.4rem 0;white-space:nowrap;transition:color .2s}.nav-menu a:hover{color:var(--primary-orange);transform:translateY(-1px)}.nav-menu a.active::after,.nav-menu a:hover::after{content:'';position:absolute;left:0;right:0;bottom:-.25rem;height:2px;background:var(--primary-orange);border-radius:1px}.nav-menu a.active{position:relative;color:var(--primary-orange)}.hero{margin:0;text-align:center;padding:0;border:none;outline:0;position:relative;z-index:1;width:100%;max-width:1400px}.hero-social-top{position:fixed;top:50%;right:0;transform:translateY(-50%);z-index:999;display:flex;flex-direction:column;gap:.25rem;align-items:stretch;background:rgba(255,255,255,.95);box-shadow:-2px 0 12px rgba(0,0,0,.08);border-radius:10px 0 0 10px;padding:.65rem .5rem;border:1px solid rgba(229,231,235,.8);border-right:none}.hero-social-top a{display:inline-flex;align-items:center;justify-content:center;width:52px;height:52px;background:0 0;border-radius:8px;font-size:1.5rem;transition:background .2s,color .2s,transform .2s}.hero-social-top a:first-child{color:#25d366}.hero-social-top a:nth-child(2){color:#1877f2}.hero-social-top a:nth-child(3){color:#e4405f}.hero-social-top a:nth-child(4){color:red}.hero-social-top a:nth-child(5){color:#ea4335}.hero-social-top a:hover{color:#fff;transform:scale(1.08)}.hero-social-top a:first-child:hover{background:#25d366}.hero-social-top a:nth-child(2):hover{background:#1877f2}.hero-social-top a:nth-child(3):hover{background:#e4405f}.hero-social-top a:nth-child(4):hover{background:red}.hero-social-top a:nth-child(5):hover{background:#ea4335}@media (max-width:768px){.hero-social-top{display:none}.testimonial-marquee-wrap{margin:0;padding:0 1rem}}@media (max-width:600px){.hero-social-top{padding:.4rem .35rem}.hero-social-top a{width:44px;height:44px;font-size:1.25rem}}.hero-image-wrapper{position:relative;width:100%;max-width:100%;height:420px;min-height:220px;border-radius:16px;overflow:hidden;background:#f1f5f9;box-shadow:0 4px 20px rgba(0,0,0,.08);margin-top:2rem;margin-bottom:1rem}@media (max-width:768px){.hero-image-wrapper{height:280px;min-height:200px}}@media (max-width:480px){:root{--section-padding:24px}.hero-image-wrapper{height:220px;min-height:180px;margin-top:1rem;margin-bottom:.75rem}}.hero-image-wrapper img{display:block;width:100%;height:100%;object-fit:cover;object-position:center center;border-radius:16px}.hero-search-bar{position:absolute;bottom:calc(6rem - 50px);left:50%;transform:translateX(-50%);width:calc(100% - 4rem);max-width:1000px;z-index:10;box-shadow:0 4px 20px rgba(0,0,0,.1);border-radius:14px;overflow:visible;background:#fff;border:1px solid #e8e8e8}.hero-search-bar-inner{padding:1.25rem 1.5rem 1.35rem}.hero-search-tabs{display:flex;align-items:center;gap:.5rem;margin-bottom:1.25rem}.hero-search-tabs label{display:inline-flex;align-items:center;cursor:pointer;font-size:.9rem;font-weight:500;color:#555;padding:.5rem 1.25rem;margin:0;border-radius:999px;background:#f0f0f0;transition:.2s}.hero-search-tabs label:hover{color:var(--text-dark);background:#e8e8e8}.hero-search-tabs label:has(input:checked){background:var(--hero-search-green-tint);color:var(--hero-search-green);font-weight:600}.hero-search-tabs input[type=radio]{position:absolute;opacity:0;width:0;height:0}.hero-search-row1{display:grid;grid-template-columns:1.15fr auto 1.15fr 1.15fr;gap:.75rem;align-items:end;margin-bottom:1rem}.hero-search-field{position:relative;overflow:visible}.hero-search-field label{display:block;font-size:.7rem;font-weight:500;color:#6b7280;margin-bottom:.35rem}.hero-search-field-inline-label label{display:none}.hero-search-field .hero-date-trigger,.hero-search-field input{width:100%;min-height:2.6rem;padding:0 .75rem;border:1px solid #e0e0e0;border-radius:8px;font-size:.95rem;font-weight:500;background:#fff;box-sizing:border-box}#from-hero,#to-hero,.hero-date-wrap,.hero-date-wrap .hero-date-trigger{min-height:4rem}.hero-search-field .hero-date-trigger{display:flex;align-items:center;justify-content:space-between;cursor:pointer;text-align:left;font-family:inherit;color:#374151}.hero-search-field .hero-date-trigger.placeholder{color:#9ca3af}.hero-search-field .hero-date-trigger:hover{border-color:#9ca3af}.hero-date-wrap{display:flex;align-items:stretch;border:1px solid #e0e0e0;border-radius:8px;background:#fff;overflow:hidden;min-height:4rem;position:relative}.hero-date-prefix{position:absolute;left:.75rem;top:.5rem;font-size:.7rem;font-weight:500;color:#6b7280;pointer-events:none}.hero-date-wrap-has-prefix .hero-date-trigger{padding-top:1.4rem;padding-left:.75rem;align-items:flex-start}.hero-date-wrap .hero-date-trigger{flex:1;min-height:4rem;border:none;border-radius:0}.hero-date-wrap .hero-date-trigger:hover{border:none}.hero-date-nav{display:flex;align-items:center;gap:0;padding:0 .25rem;flex-shrink:0}.hero-date-nav-btn{width:1.75rem;height:1.75rem;padding:0;display:flex;align-items:center;justify-content:center;line-height:1;font-size:1.1rem;background:0 0;border:none;border-radius:4px;cursor:pointer;color:var(--hero-search-green)}.hero-date-nav-btn:hover{background:var(--hero-search-green-tint);color:var(--hero-search-green-dark)}.hero-date-nav-btn .material-symbols-outlined{font-size:1.25rem}.hero-search-swap-wrap{display:flex;align-items:flex-end;padding-bottom:.1rem;position:relative;z-index:2}.hero-search-swap{width:4rem;height:4rem;padding:0;display:flex;align-items:center;justify-content:center;background:var(--hero-search-green);border:none;border-radius:4px;cursor:pointer;color:#fff;flex-shrink:0}.hero-search-swap:hover{background:var(--hero-search-green);color:#fff}.hero-search-row2{display:flex;flex-wrap:wrap;align-items:center;gap:1rem;justify-content:space-between}.hero-search-row2-right{display:flex;align-items:center;gap:1rem}.hero-search-direct{display:flex;align-items:center;gap:.5rem;font-size:.9rem;font-weight:700;color:#374151;cursor:pointer}.hero-search-direct input{width:1rem;height:1rem;accent-color:var(--hero-search-green);cursor:pointer}.hero-search-dropdown{position:relative;min-width:75px}.hero-passengers-trigger{background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E") right .25rem center no-repeat;border:none!important;border-radius:0;outline:0;box-shadow:none;cursor:pointer;font-size:.9rem;padding:.4rem 1.25rem .4rem 0;min-height:auto;text-align:left;pointer-events:auto}.hero-search-dropdown select{width:100%;min-height:auto;padding:.35rem 1.15rem .35rem .5rem;border:none;border-radius:0;font-size:.9rem;outline:0;background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E") right .2rem center no-repeat;appearance:none;cursor:pointer;min-width:75px}.hero-search-btn{padding:.65rem 1.9rem;background:var(--hero-search-green);color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;white-space:nowrap}.hero-search-btn:hover{background:var(--hero-search-green);color:#fff}@media (max-width:768px){.hero-search-bar{width:calc(100% - 2rem);bottom:4rem;left:50%;transform:translateX(-50%)}.hero-search-bar-inner{padding:1rem 1rem 1.1rem}.hero-search-row1{grid-template-columns:1fr auto 1fr;gap:.5rem}.hero-search-row1 .hero-search-field:nth-child(4){grid-column:1/-1}}@media (max-width:480px){.hero-search-bar{width:calc(100% - 1rem);bottom:3rem}.hero-search-row1{grid-template-columns:1fr}.hero-search-row1 .hero-search-field:nth-child(2),.hero-search-row1 .hero-search-field:nth-child(3){grid-column:1/-1}}.flight-search-section{max-width:1200px;width:100%;margin:-4rem auto 3rem;padding:0 2rem;position:relative;z-index:1;box-sizing:border-box}.flight-search-card{width:100%;box-sizing:border-box;background:#fff;border-radius:4px;box-shadow:0 2px 12px rgba(0,0,0,.08);padding:0;border:1px solid #e5e7eb;overflow:visible}.flight-search-tabs{display:flex;align-items:center;justify-content:center;gap:0;padding:.4rem 1rem;border-bottom:1px solid #e5e7eb;background:#fff}.flight-search-tabs label{display:inline-flex;align-items:center;cursor:pointer;font-size:.9rem;font-weight:400;color:#6b7280;padding:.25rem .75rem;margin:0 0 -1px;border-bottom:2px solid transparent;transition:color .2s,font-weight .2s,border-color .2s}.flight-search-tabs label:hover{color:var(--text-dark)}.flight-search-tabs label:has(input[type=radio]:checked){color:var(--text-dark);font-weight:700;border-bottom:2px solid var(--brand-blue)}.flight-search-tabs .tab-sep{padding:0 .35rem;color:#9ca3af;font-size:.6rem;font-weight:400;user-select:none}.flight-search-tabs input[type=radio]{position:absolute;opacity:0;width:0;height:0;pointer-events:none}.flight-search-direct-only-inline{margin-left:auto;padding-left:1rem;font-weight:400;border-bottom:none!important}.flight-search-direct-only-inline input[type=checkbox]{position:static;opacity:1;width:1rem;height:1rem;margin-right:.4rem;accent-color:var(--brand-blue);cursor:pointer;vertical-align:middle}.flight-search-direct-only-inline span{cursor:pointer;font-size:.9rem;color:#374151}.flight-search-form-inner{padding:1.75rem 2rem 2rem}.flight-search-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem 1.25rem;align-items:end;margin-bottom:1.25rem}.flight-search-row,.flight-search-row-dates{display:contents}.flight-search-field{position:relative}.flight-search-field.full{grid-column:1/-1}.flight-search-field.with-swap{position:relative}.flight-search-field.with-swap .field-input-wrap{width:100%}.flight-search-field.with-swap .flight-search-swap{position:absolute;right:.5rem;bottom:.5rem;top:auto;margin:0}.flight-search-field.with-swap input,.flight-search-field.with-swap select{padding-right:2.5rem}.flight-search-field label{display:block;font-size:.8rem;font-weight:600;color:#374151;margin-bottom:.35rem}.flight-search-field .ek-date-trigger,.flight-search-field .passengers-trigger,.flight-search-field input,.flight-search-field select{width:100%;min-height:2.75rem;height:2.75rem;padding:0 .75rem;border:1px solid #d1d5db;border-radius:4px;font-size:.95rem;background:#fff;box-sizing:border-box}.flight-search-field input,.flight-search-field select{padding-top:.55rem;padding-bottom:.55rem}.flight-search-field select{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .75rem center;padding-right:2rem}.ek-date-trigger{padding:0 .75rem;display:flex;align-items:center}.flight-search-field input::placeholder{color:#9ca3af}.airport-autocomplete{position:relative;width:100%;overflow:visible}.airport-clear-btn{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);width:24px;height:24px;padding:0;border:none;background:0 0;color:#6b7280;cursor:pointer;display:none;align-items:center;justify-content:center;border-radius:50%;transition:color .2s,background .2s}.airport-clear-btn.visible{display:flex}.airport-clear-btn:hover{color:var(--primary-orange);background:#fff5eb}.airport-autocomplete.has-clear .airport-input{padding-right:2.25rem}.airport-field-prefix{position:absolute;left:.75rem;top:.5rem;font-size:.7rem;font-weight:500;color:#6b7280;pointer-events:none}.airport-autocomplete.has-prefix .airport-input{padding-top:1.4rem;padding-left:.75rem}.airport-dropdown{position:absolute;top:100%;left:0;right:0;max-height:450px;overflow-y:auto;background:#fff;border:1px solid #e5e7eb;border-top:none;border-radius:0 0 8px 8px;box-shadow:0 4px 12px rgba(0,0,0,.1);z-index:1000;display:none}.airport-dropdown.open{display:grid;grid-template-columns:repeat(3,1fr);gap:0}.airport-dropdown-heading{grid-column:1/-1;padding:.6rem .9rem .35rem;font-size:.75rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.05em;border-bottom:1px solid #f3f4f6}.airport-dropdown-item{padding:.5rem .6rem;cursor:pointer;font-size:.85rem;color:#374151;border-bottom:1px solid #f3f4f6;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.airport-dropdown-item:hover{background:var(--brand-blue-tint);color:var(--brand-blue)}.airport-dropdown-item:last-child{border-bottom:none}.airport-dropdown-item strong{color:var(--text-dark)}.flight-search-field input:focus,.flight-search-field select:focus{outline:0;border-color:var(--brand-blue)}.flight-search-field .ek-date-trigger.invalid,.flight-search-field input.invalid{border-color:#dc2626!important;background-color:#fef2f2}#from-hero.invalid,#to-hero.invalid,.hero-date-trigger.invalid{border-color:#dc2626!important;background-color:#fef2f2!important}.flight-search-validation-alert-overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;z-index:100001;padding:1rem}.flight-search-validation-alert-overlay.visible{display:flex}.flight-search-validation-alert{background:#fff;border-radius:8px;box-shadow:0 10px 40px rgba(0,0,0,.2);padding:1.5rem 1.75rem;max-width:400px;width:100%}.flight-search-validation-alert-icon{width:48px;height:48px;margin:0 auto 1rem;color:#dc2626}.flight-search-validation-alert-title{font-size:1.1rem;font-weight:600;color:var(--text-dark);margin-bottom:.5rem;text-align:center}.flight-search-validation-alert-msg{font-size:.95rem;color:#4b5563;text-align:center;line-height:1.5;margin-bottom:1.25rem}.flight-search-validation-alert-ok{display:block;width:100%;padding:.6rem 1rem;background:var(--brand-blue);color:#fff;border:none;border-radius:6px;font-size:.95rem;cursor:pointer}.flight-search-validation-alert-ok:hover{background:var(--brand-blue-dark)}.flight-search-swap{flex-shrink:0;width:2rem;height:2rem;min-height:2rem;padding:0;display:flex;align-items:center;justify-content:center;background:#f3f4f6;border:1px solid #e5e7eb;border-radius:4px;cursor:pointer;color:#6b7280;font-size:1rem}.flight-search-swap:hover{background:#e5e7eb;color:#374151}.flight-search-dates-single{width:100%}.flight-search-actions{display:flex;justify-content:stretch;align-items:stretch;width:100%}.flight-search-multicity-meta{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem 1.25rem;align-items:end;margin-top:1.25rem}.flight-search-multicity-meta .flight-search-actions{align-items:stretch}.btn-search-flight{width:100%;min-height:2.75rem;height:2.75rem;padding:0 .75rem;border-radius:4px;border:none;background:var(--brand-blue);color:#fff;font-size:.95rem;font-weight:600;cursor:pointer;transition:background .2s,transform .2s;box-sizing:border-box}.btn-search-flight:hover{background:var(--brand-blue-dark);transform:translateY(-1px)}.flight-search-card.multicity .flight-search-grid{display:none}.flight-search-card.multicity .flight-search-multicity{display:block}.flight-search-multicity{display:none;margin-bottom:1.25rem}.flight-search-segment{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;align-items:end;margin-bottom:1rem}.flight-search-segment .flight-search-segment-label{font-size:.75rem;color:#6b7280;margin-bottom:.25rem;grid-column:1/-1}.flight-search-add-segment{background:0 0;border:1px dashed #d1d5db;color:#6b7280;padding:.5rem 1rem;border-radius:4px;font-size:.9rem;cursor:pointer;margin-top:.25rem}.flight-search-add-segment:hover{border-color:var(--brand-blue);color:var(--brand-blue)}.passengers-trigger{display:flex;align-items:center;justify-content:space-between;width:100%;min-height:2.75rem;height:2.75rem;padding:0 2rem 0 .75rem;border:1px solid #d1d5db;border-radius:4px;font-size:.95rem;background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E") right .75rem center no-repeat #fff;color:var(--text-dark);cursor:pointer;text-align:left;box-sizing:border-box;appearance:none}.passengers-trigger:hover{border-color:#9ca3af}.passengers-trigger:focus{outline:0;border-color:var(--brand-blue)}.passengers-dropdown{position:fixed!important;width:231px;min-height:120px;background:#fff;border:1px solid #e5e7eb;border-radius:15px;box-shadow:0 10px 40px rgba(0,0,0,.12);z-index:99999;padding:1rem 1.25rem;display:none;pointer-events:auto}.passengers-dropdown.open{display:block!important}.hero-class-trigger{background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E") right .25rem center no-repeat;border:none;outline:0;box-shadow:none;cursor:pointer;font-size:.9rem;padding:.4rem 1.25rem .4rem 0;min-height:auto;text-align:left;pointer-events:auto;width:100%;min-width:75px}.class-dropdown{position:fixed!important;width:180px;background:#fff;border:1px solid #e5e7eb;border-radius:4px;box-shadow:0 10px 40px rgba(0,0,0,.12);z-index:99999;padding:.5rem 0;display:none;pointer-events:auto}.class-dropdown.open{display:block!important}.class-dropdown-option{display:block;width:100%;padding:.5rem 1rem;border:none;background:0 0;font-size:.9rem;color:#374151;text-align:left;cursor:pointer;transition:background .15s}.class-dropdown-option:hover{background:#f3f4f6;color:var(--text-dark)}.class-dropdown-option.selected{background:var(--hero-search-green-tint,#fff5eb);color:var(--hero-search-green-dark,var(--dark-orange));font-weight:600}.passengers-dropdown-title{font-size:1rem;font-weight:600;color:#374151;margin:0 0 .75rem;padding-bottom:.75rem;border-bottom:1px solid #e5e7eb}.passengers-dropdown-row{display:flex;align-items:center;justify-content:space-between;padding:.6rem 0;border-bottom:1px solid #f3f4f6}.passengers-dropdown-row:last-child{border-bottom:none}.passengers-dropdown-label-wrap{flex:1;min-width:0}.passengers-dropdown-label{display:block;font-size:.95rem;font-weight:600;color:var(--text-dark)}.passengers-dropdown-sublabel{display:block;font-size:.8rem;color:#6b7280;margin-top:.15rem}.passengers-dropdown-controls{display:flex;align-items:center;gap:.5rem;flex-shrink:0}.passengers-dropdown-btn{width:32px;height:32px;border-radius:50%;border:1px solid #d1d5db;background:var(--light-gray);color:#374151;font-size:1.1rem;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;transition:background .15s,border-color .15s;pointer-events:auto}.passengers-dropdown-btn:hover:not(:disabled){background:#f3f4f6;border-color:#9ca3af;color:var(--text-dark)}.passengers-dropdown-btn:disabled{opacity:.5;cursor:not-allowed}.passengers-dropdown-count{font-size:.95rem;font-weight:600;color:var(--text-dark);min-width:1.5rem;text-align:center}.ek-date-wrap{position:relative}.ek-date-trigger{display:flex;align-items:center;justify-content:space-between;color:var(--text-dark);cursor:pointer;text-align:left}.ek-date-trigger.placeholder{color:#9ca3af}.ek-date-trigger:hover{border-color:#9ca3af}.ek-date-trigger:focus{outline:0;border-color:var(--brand-blue)}.ek-date-trigger .ek-date-trigger-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;min-width:0;text-align:left;margin-right:.5rem}.ek-date-trigger svg{flex-shrink:0;color:#6b7280}.ek-calendar-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);z-index:9999;opacity:0;transition:opacity .2s}.ek-calendar-backdrop.visible{opacity:1}.ek-calendar-dropdown{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:400px;background:#fff;border:1px solid #e5e7eb;border-radius:8px;box-shadow:0 10px 40px rgba(0,0,0,.12);z-index:10000;padding:2rem;max-height:calc(100vh - 2rem);overflow-y:auto;pointer-events:auto}.ek-calendar-dropdown.ek-calendar-twomonths{width:860px;max-width:calc(100vw - 2rem)}.ek-calendar-top{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #e5e7eb}.ek-calendar-title-row{display:flex;align-items:center;gap:.5rem}.ek-calendar-plane-icon{display:flex;align-items:center;justify-content:center;color:#6b7280}.ek-calendar-title{font-size:1.1rem;font-weight:600;color:var(--text-dark)}.ek-calendar-twomonths-inner{display:flex;gap:2rem;margin-top:.75rem}.ek-calendar-dropdown.ek-calendar-twomonths .ek-calendar-single,.ek-calendar-dropdown:not(.ek-calendar-twomonths) .ek-calendar-twomonths-wrap{display:none}.ek-calendar-single-nav{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem}.ek-calendar-month-panel{flex:1;min-width:0}.ek-calendar-twomonths-inner .ek-calendar-month-panel:first-child{border-right:1px solid #e5e7eb;padding-right:1rem;margin-right:-1px}.ek-calendar-panel-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:.6rem}.ek-calendar-month-panel .ek-calendar-panel-title{font-size:1.1rem;font-weight:600;color:var(--text-dark)}.ek-calendar-month-panel .ek-calendar-weekdays{margin-bottom:.35rem}.ek-calendar-month-panel .ek-calendar-grid{margin-bottom:0}.ek-calendar-nav-btn{width:38px;height:38px;border:1px solid #e5e7eb;background:#fff;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#374151;font-size:1.2rem;padding:0;transition:background .2s,border-color .2s}.ek-calendar-nav-btn:hover{background:#f3f4f6;border-color:#d1d5db;color:var(--text-dark)}.ek-calendar-nav-btn:disabled{opacity:.4;cursor:not-allowed;pointer-events:none}.ek-calendar-month-year{font-size:1.1rem;font-weight:600;color:var(--text-dark)}@media (max-width:620px){.ek-calendar-dropdown.ek-calendar-twomonths{width:400px}.ek-calendar-twomonths-inner{flex-direction:column}.ek-calendar-twomonths-inner .ek-calendar-month-panel:first-child{border-right:none;padding-right:0;margin-right:0;border-bottom:1px solid #e5e7eb;padding-bottom:1rem;margin-bottom:.5rem}}.ek-calendar-dropdown.open{display:block}.ek-calendar-weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:.5rem}.ek-calendar-weekday{text-align:center;font-size:.8rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.02em}.ek-calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}.ek-calendar-day{aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-size:1rem;color:#374151;cursor:pointer;border-radius:50%}.ek-calendar-day:hover:not(.empty):not(.disabled){background:#f3f4f6;color:var(--text-dark)}.ek-calendar-day.today{font-weight:600;color:var(--text-dark)}.ek-calendar-day.selected{background:#e5e7eb;color:var(--text-dark)}.ek-calendar-day.selected:hover{background:#d1d5db;color:var(--text-dark)}.ek-calendar-day.disabled{color:#e5e7eb;cursor:not-allowed}.ek-calendar-day.empty{cursor:default;opacity:0;pointer-events:none}.why-choose-us-section{max-width:1400px;width:100%;margin:0 auto;padding:var(--section-padding);background:#fff}.why-choose-us-heading{text-align:center;font-size:var(--section-heading-size);font-weight:700;color:var(--primary-orange);margin:0 0 .5rem;letter-spacing:-.02em;font-family:inherit}.why-choose-us-underline{width:60px;height:4px;background:var(--brand-orange);margin:0 auto 1.5rem;border-radius:2px}.why-choose-us-intro{text-align:center;font-size:1rem;color:var(--text-secondary);max-width:720px;margin:0 auto 2.5rem;line-height:1.6}.why-choose-us-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem}.why-choose-us-card{text-align:center;padding:1.75rem 1.5rem;border-radius:var(--card-radius);border:none;background:#fff;box-shadow:var(--card-shadow);transition:transform .3s,box-shadow .3s}.why-choose-us-card:hover{transform:translateY(var(--card-lift));box-shadow:var(--card-shadow-hover)}.why-choose-us-icon-wrap{width:64px;height:64px;margin:0 auto 1rem;border-radius:50%;background:rgba(242,136,29,.12);display:flex;align-items:center;justify-content:center;color:var(--primary-orange);transition:transform .3s,background .25s}.why-choose-us-card:hover .why-choose-us-icon-wrap{transform:scale(1.05);background:rgba(242,136,29,.18)}.why-choose-us-card:nth-child(2) .why-choose-us-icon-wrap,.why-choose-us-card:nth-child(4) .why-choose-us-icon-wrap{background:rgba(242,136,29,.12);color:var(--primary-orange)}.why-choose-us-icon-wrap svg{flex-shrink:0}.why-choose-us-title{font-size:var(--section-subheading-size);font-weight:700;color:var(--text-dark);margin:0 0 .5rem;font-family:inherit}.why-choose-us-desc{font-size:.9rem;color:#6b7280;line-height:1.5;margin:0}@media (max-width:900px){.why-choose-us-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:600px){.why-choose-us-grid{grid-template-columns:1fr}.why-choose-us-heading{font-size:1.5rem}.why-choose-us-intro{font-size:.95rem}}.our-services-section{max-width:1400px;width:100%;margin:0 auto;padding:var(--section-padding);background:var(--light-gray)}.our-services-heading{text-align:center;font-size:var(--section-heading-size);font-weight:700;color:var(--primary-orange);margin:0 0 .5rem;letter-spacing:-.02em;font-family:inherit}.our-services-underline{width:60px;height:4px;background:var(--brand-orange);margin:0 auto 2rem;border-radius:2px}.our-services-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem}.our-services-card{background:#fff;border:none;border-radius:var(--card-radius);padding:2rem 1.5rem;box-shadow:var(--card-shadow);transition:box-shadow .3s,transform .3s;display:flex;flex-direction:column;align-items:center;text-align:center}.our-services-card:hover{box-shadow:var(--card-shadow-hover);transform:translateY(var(--card-lift))}.our-services-icon-wrap{width:72px;height:72px;border-radius:50%;background:rgba(242,136,29,.12);display:flex;align-items:center;justify-content:center;color:var(--primary-orange);margin-bottom:1.25rem;transition:transform .3s,background .25s}.our-services-card:hover .our-services-icon-wrap{transform:scale(1.05);background:rgba(242,136,29,.18)}.our-services-icon-wrap img.our-services-icon-img,.our-services-icon-wrap svg{flex-shrink:0;width:52px;height:52px}.our-services-icon-wrap img.our-services-icon-img{object-fit:contain;filter:brightness(0) saturate(100%) invert(55%) sepia(90%) saturate(1500%) hue-rotate(8deg) brightness(105%)}.our-services-title{font-size:var(--section-subheading-size);font-weight:700;color:var(--text-dark);margin:0 0 .5rem;font-family:inherit}.our-services-desc{font-size:.9rem;color:#6b7280;line-height:1.5;margin:0}@media (max-width:900px){.our-services-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:600px){.our-services-grid{grid-template-columns:1fr}.our-services-heading{font-size:1.5rem}}.testimonial-section{max-width:1400px;width:100%;margin:0 auto;padding:var(--section-padding);background:#fff}.testimonial-heading{text-align:center;font-size:var(--section-heading-size);font-weight:700;color:var(--primary-orange);margin:0 0 .5rem;letter-spacing:-.02em;font-family:inherit}.testimonial-underline{width:60px;height:4px;background:var(--brand-orange);margin:0 auto 2rem;border-radius:2px}.testimonial-marquee-wrap{width:100%;overflow:hidden;margin:0 -2rem;padding:0 2rem}.testimonial-track{display:flex;width:400%;animation:60s linear infinite testimonial-scroll}.testimonial-set{display:flex;gap:1.5rem;width:50%;flex-shrink:0;padding:0 .5rem}@keyframes testimonial-scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}.testimonial-card{flex:0 0 calc(25% - 1.2rem);min-width:280px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:1.5rem;box-shadow:0 1px 3px rgba(0,0,0,.06);transition:box-shadow .2s,transform .2s}.testimonial-card:hover{box-shadow:0 8px 24px rgba(0,0,0,.08);transform:translateY(-3px)}.testimonial-quote{font-size:.95rem;color:var(--text-secondary);line-height:1.6;margin:0 0 1rem;font-style:italic}.testimonial-quote::before{content:"\201C";font-size:1.5rem;color:var(--brand-blue);line-height:1}.testimonial-author{font-size:1rem;font-weight:700;color:var(--text-dark);margin:0 0 .2rem}.testimonial-role{font-size:.85rem;color:#6b7280;margin:0}@media (max-width:900px){.testimonial-card{min-width:260px;flex:0 0 calc(50% - 0.75rem)}.testimonial-track{animation-duration:45s}}.dream-team-section{max-width:1400px;width:100%;margin:0 auto;padding:var(--section-padding);background:var(--light-gray)}.dream-team-heading{text-align:center;font-size:var(--section-heading-size);font-weight:700;color:var(--primary-orange);margin:0 0 .5rem;font-family:inherit}.dream-team-underline{width:60px;height:4px;background:var(--brand-blue);margin:0 auto 2rem;border-radius:2px}.dream-team-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem;align-items:start}.dream-team-card{position:relative;border-radius:12px;overflow:hidden;aspect-ratio:3/4;box-shadow:0 1px 3px rgba(0,0,0,.06);transition:box-shadow .2s,transform .2s}.dream-team-card:hover{box-shadow:0 8px 24px rgba(0,0,0,.08);transform:translateY(-4px)}.dream-team-photo{position:absolute;inset:0;background:linear-gradient(135deg,var(--brand-blue) 0,var(--brand-blue-dark) 100%);display:flex;align-items:center;justify-content:center}.dream-team-photo img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:none}.dream-team-photo img.loaded{display:block}.dream-team-photo .dream-team-photo-placeholder{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}.dream-team-photo img.loaded~.dream-team-photo-placeholder{display:none}.dream-team-photo img.failed~.dream-team-photo-placeholder{display:flex}.dream-team-photo .dream-team-photo-placeholder svg{width:80px;height:80px;color:rgba(255,255,255,.9)}.dream-team-overlay{position:absolute;bottom:0;left:0;right:0;padding:1.25rem 1rem 1rem;background:linear-gradient(to top,rgba(0,0,0,.75),rgba(0,0,0,.4),transparent);color:#fff;text-align:center}.dream-team-name{font-size:1.05rem;font-weight:700;color:#fff;margin:0 0 .2rem;text-shadow:0 1px 2px rgba(0,0,0,.5)}.dream-team-role{font-size:.9rem;color:rgba(255,255,255,.95);margin:0;text-shadow:0 1px 2px rgba(0,0,0,.5)}@media (max-width:900px){.dream-team-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:500px){.dream-team-grid{grid-template-columns:1fr}}.leadership-team-section{max-width:1400px;width:100%;margin:0 auto;padding:var(--section-padding);background:#fff}.leadership-team-heading{text-align:center;font-size:var(--section-heading-size);font-weight:700;color:var(--primary-orange);margin:0 0 .5rem;letter-spacing:-.02em;font-family:inherit}.leadership-team-underline{width:60px;height:4px;background:var(--brand-orange);margin:0 auto 2rem;border-radius:2px}.leadership-team-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:2rem;max-width:1200px;margin:0 auto}@media (max-width:900px){.leadership-team-grid{grid-template-columns:repeat(2,1fr);gap:1.5rem}}@media (max-width:600px){.leadership-team-grid{grid-template-columns:1fr;gap:1.5rem}}.leadership-team-card{background:#fff;border-radius:var(--card-radius);box-shadow:var(--card-shadow);overflow:hidden;transition:transform .3s,box-shadow .3s;display:flex;flex-direction:column}.leadership-team-card:hover{transform:translateY(var(--card-lift));box-shadow:var(--card-shadow-hover)}.leadership-team-photo{width:100%;aspect-ratio:3/4;overflow:hidden;background:var(--light-gray);position:relative}.leadership-team-photo img{width:100%;height:100%;object-fit:cover;object-position:center;display:block;transition:transform .3s}.leadership-team-card:hover .leadership-team-photo img{transform:scale(1.05)}.leadership-team-photo-bg{background:#f8f9fa}.leadership-team-photo-bg::before{content:'';position:absolute;inset:0;background:#f8f9fa;z-index:1;pointer-events:none}.leadership-team-photo-bg img{position:relative;z-index:2}.leadership-team-info{padding:1.5rem 1.25rem;text-align:center;flex:1;display:flex;flex-direction:column;justify-content:center}.leadership-team-name{font-size:1.15rem;font-weight:700;color:var(--text-dark);margin:0 0 .5rem;font-family:inherit;line-height:1.3}.leadership-team-title{font-size:.95rem;color:var(--primary-orange);font-weight:600;margin:0;line-height:1.4}@media (max-width:600px){.leadership-team-info{padding:1.25rem 1rem}.leadership-team-name{font-size:1.05rem}.leadership-team-title{font-size:.9rem}}.support-section{max-width:1400px;width:100%;margin:0 auto;padding:var(--section-padding);background:var(--light-gray)}.support-section-heading{text-align:center;font-size:var(--section-heading-size);font-weight:700;color:var(--primary-orange);margin:0 0 .5rem;font-family:inherit}.support-section-underline{width:60px;height:4px;background:var(--primary-orange);margin:0 auto 1rem;border-radius:2px}.support-section-intro{text-align:center;font-size:1rem;color:#374151;max-width:640px;margin:0 auto 2rem;line-height:1.6}.support-section-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:1.5rem;max-width:1100px;margin:0 auto}.support-section-image-wrap{background:#fff;border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 1px 3px rgba(0,0,0,.06);overflow:hidden;min-height:160px;display:flex;align-items:stretch}.support-section-image-wrap img{width:100%;height:100%;min-height:160px;object-fit:cover;object-position:center;display:block}.support-section-card{text-align:center;padding:1.75rem 1.5rem;background:#fff;border-radius:var(--card-radius);border:none;box-shadow:var(--card-shadow);transition:transform .3s,box-shadow .3s;min-height:160px;display:flex;flex-direction:column;justify-content:center}.support-section-card:hover{transform:translateY(var(--card-lift));box-shadow:var(--card-shadow-hover)}.support-section-card a{text-decoration:none;color:inherit;display:flex;flex-direction:column;align-items:center;gap:.5rem}.support-section-card a:hover{color:var(--primary-orange)}.support-section-icon-wrap{width:56px;height:56px;margin:0 auto;border-radius:50%;background:rgba(242,136,29,.12);color:var(--primary-orange);display:flex;align-items:center;justify-content:center;transition:transform .3s,background .25s}.support-section-card:hover .support-section-icon-wrap{transform:scale(1.05);background:rgba(242,136,29,.18)}.support-section-icon-wrap .fa,.support-section-icon-wrap svg{font-size:1.5rem}.support-section-title{font-size:1.1rem;font-weight:700;color:var(--text-dark);margin:0}.support-section-desc{font-size:.9rem;color:#6b7280;margin:0}@media (max-width:900px){.support-section-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:700px){.support-section-grid{grid-template-columns:1fr}}.authorized-from-section{max-width:1400px;width:100%;margin:0 auto;padding:var(--section-padding);background:#fff;position:relative}.authorized-from-section::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 20% 50%,rgba(242,136,29,.03) 0,transparent 50%),radial-gradient(circle at 80% 80%,rgba(37,99,235,.03) 0,transparent 50%);pointer-events:none}.authorized-from-heading{text-align:center;font-size:var(--section-heading-size);font-weight:700;color:var(--primary-orange);letter-spacing:-.02em;margin:0 0 .5rem;position:relative;z-index:1;font-family:inherit}.authorized-from-heading::after{content:'';display:block;width:60px;height:4px;background:var(--brand-orange);margin:.5rem auto 0;border-radius:2px}.authorized-from-underline{width:0;height:0;margin:0;display:none}.authorized-from-grid{display:grid;grid-template-columns:repeat(7,170px);gap:2rem;align-items:center;justify-content:center;position:relative;z-index:1}.authorized-from-card{text-align:center;padding:0;width:170px;max-width:170px;height:170px;background:#fff;border-radius:20px;border:2px solid #f1f5f9;box-shadow:0 4px 6px rgba(0,0,0,.05),0 1px 3px rgba(0,0,0,.1);transition:.4s cubic-bezier(.4, 0, .2, 1);position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center}.authorized-from-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#f28d1d,#ff9500,#2563eb);transform:scaleX(0);transition:transform .4s}.authorized-from-card:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 40px rgba(0,0,0,.12),0 8px 16px rgba(242,136,29,.15);border-color:rgba(242,136,29,.3)}.authorized-from-card:hover::before{transform:scaleX(1)}.authorized-from-logo-wrap{width:170px;height:170px;margin:0;display:flex;align-items:center;justify-content:center;flex-shrink:0;background:linear-gradient(135deg,var(--light-gray) 0,#fff 100%);border-radius:16px;padding:20px;transition:.4s;position:relative}.authorized-from-card:hover .authorized-from-logo-wrap{background:linear-gradient(135deg,#fff7ed 0,#fff 100%);transform:scale(1.05)}.authorized-from-logo{width:100%;height:100%;object-fit:contain;display:block;transition:transform .4s;filter:grayscale(0%);transform:scale(1.05)}.authorized-from-card:hover .authorized-from-logo{transform:scale(1.15);filter:grayscale(0%) brightness(1.05)}.authorized-from-card--pia .authorized-from-logo-wrap{width:140px;height:50px;min-height:50px}.authorized-from-title{font-size:1.1rem;font-weight:700;color:var(--text-dark);margin:0 0 .5rem}.authorized-from-desc{font-size:.9rem;color:#6b7280;line-height:1.5;margin:0}.authorized-from-link{display:inline-block;font-size:.85rem;color:var(--brand-blue);text-decoration:none;margin-top:.5rem;font-weight:600;transition:color .2s}.authorized-from-link:hover{color:var(--brand-blue-dark);text-decoration:underline}@media (max-width:900px){.authorized-from-section{padding:3rem 1.5rem}.authorized-from-grid{grid-template-columns:repeat(7,140px);gap:1.5rem}.authorized-from-card{width:140px;max-width:140px;height:140px}.authorized-from-logo-wrap{width:140px;height:140px;padding:17px}}@media (max-width:600px){.authorized-from-section{padding:2.5rem 1rem}.authorized-from-heading{font-size:1.5rem}.authorized-from-grid{grid-template-columns:repeat(7,120px);gap:1rem}.authorized-from-card{width:120px;max-width:120px;height:120px}.authorized-from-logo-wrap{width:120px;height:120px;padding:15px}}.partner-airlines-section{width:100%;min-height:200px;padding:var(--section-padding);background:var(--light-gray);position:relative;display:flex;align-items:center;justify-content:center}.partner-airlines-overlay{max-width:1400px;width:100%;text-align:center}.partner-airlines-heading{font-size:var(--section-heading-size);font-weight:700;color:var(--primary-orange);margin:0 0 .5rem;font-family:inherit}.partner-airlines-underline{width:60px;height:4px;background:var(--brand-blue);margin:0 auto 2rem;border-radius:2px}.partner-airlines-marquee{width:100%;overflow:hidden;margin:0 auto}.partner-airlines-track{display:flex;flex-wrap:nowrap;width:max-content;gap:0 1.5rem;animation:90s linear infinite partner-airlines-scroll-ltr}.partner-airlines-marquee .partner-airlines-logos{display:flex;flex-wrap:nowrap;align-items:center;justify-content:flex-start;gap:0 1.25rem;flex-shrink:0}@keyframes partner-airlines-scroll-ltr{0%{transform:translateX(-50%)}100%{transform:translateX(0)}}.partner-airlines-logos{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:.75rem 1rem}.partner-airline-item{flex-shrink:0}.partner-airline-logo-wrap{width:96px;height:96px;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.5rem .4rem;background:#fff;border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 1px 3px rgba(0,0,0,.06);transition:background .2s,box-shadow .2s,transform .2s,border-color .2s;gap:.25rem}.partner-airline-logo-wrap:hover{background:#fff;border-color:#d1d5db;box-shadow:0 4px 12px rgba(0,0,0,.1);transform:translateY(-2px)}.partner-airline-img{width:40px;height:40px;object-fit:contain;display:block;flex-shrink:0}.partner-airline-name{font-size:.7rem;font-weight:700;color:var(--text-dark);text-transform:uppercase;letter-spacing:.02em;text-align:center;line-height:1.2;max-width:100%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}@media (max-width:768px){.partner-airlines-logos{gap:.5rem .75rem}.partner-airline-logo-wrap{width:80px;height:80px;padding:.4rem .35rem}.partner-airline-img{width:32px;height:32px}.partner-airline-name{font-size:.6rem}.partner-airlines-heading{font-size:1.5rem}}.flight-results-popup{position:fixed;inset:0;z-index:100000;display:flex;align-items:center;justify-content:center;padding:2rem;visibility:hidden;opacity:0;transition:visibility .2s,opacity .2s}.flight-results-popup.visible{visibility:visible;opacity:1}.flight-results-popup-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.5);cursor:pointer}.flight-results-popup-content{position:relative;width:100%;max-width:900px;height:100vh;max-height:100vh;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden;display:flex;flex-direction:column}.flight-results-popup-inner{overflow-y:auto;padding:1.5rem 2rem 2rem;flex:1;min-height:0}.flight-results-popup-close{position:absolute;top:1rem;right:1rem;width:28px;height:28px;border:none;background:var(--primary-orange);color:#fff;font-size:1.1rem;line-height:1;cursor:pointer;border-radius:6px;z-index:1;display:flex;align-items:center;justify-content:center;padding:0;transition:background .2s,color .2s}.flight-results-popup-close:hover{background:var(--dark-orange);color:#fff}.flight-results-popup .flight-results-filter-tabs{margin-bottom:1.5rem}.flight-results-section{max-width:1400px;width:100%;margin:0 auto;padding:0 2rem 2rem;display:none}.flight-results-inline-wrap{padding-top:1rem}.back-search{display:inline-flex;align-items:center;gap:.5rem;color:var(--primary-blue);text-decoration:none;font-weight:600;margin-bottom:1.5rem}.back-search:hover{color:var(--dark-blue)}.flight-results-section.visible{display:block}.flight-results-heading{font-size:1.5rem;font-weight:700;color:var(--text-dark);margin-bottom:.35rem}.flight-results-sub{font-size:.9rem;color:#6b7280;margin-bottom:1rem}.flight-results-layout{display:flex;gap:1.5rem;align-items:flex-start}.flight-results-main{flex:1;min-width:0}.flight-results-filter-tabs{display:flex;align-items:stretch;margin-bottom:1.5rem;background:#fff;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden}.filter-tab{flex:1;padding:.85rem 1.25rem;border:none;background:0 0;cursor:pointer;position:relative;transition:.2s;border-right:1px solid #e5e7eb;display:flex;flex-direction:column;align-items:flex-start;gap:.15rem}.filter-tab:last-of-type{border-right:none}.filter-tab-label{font-size:.95rem;font-weight:600;color:#374151}.filter-tab-price{font-size:.85rem;font-weight:600;color:#6b7280}.filter-tab:hover{background:var(--light-gray)}.filter-tab.active{border-bottom:3px solid var(--brand-blue)}.filter-tab.active .filter-tab-label{font-weight:600;color:var(--text-dark)}.flight-results-list{margin-top:0}.flight-results-empty{font-weight:600}.flight-search-loading-overlay{position:fixed;inset:0;z-index:10000;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,.75);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}.flight-search-loading-overlay.visible{display:flex}.flight-search-loading-content{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.25rem}.flight-search-loading-logo{width:120px;height:120px;object-fit:contain}.flight-search-loading-text{font-size:1.1rem;font-weight:600;color:var(--brand-blue)}.flight-result-card{font-weight:600;display:flex;flex-wrap:wrap;align-items:center;gap:1.5rem;padding:1.25rem 1.5rem;background:#fff;border:1px solid #e5e7eb;border-radius:12px;margin-bottom:1rem;box-shadow:0 1px 3px rgba(0,0,0,.05);transition:box-shadow .2s,transform .2s}.flight-result-card:hover{box-shadow:0 6px 20px rgba(0,0,0,.08);transform:translateY(-2px)}.flight-result-airline-wrap{display:flex;flex-direction:column;align-items:center;gap:.35rem;min-width:80px}.flight-result-airline-logo{width:48px;height:48px;object-fit:contain;display:block}.flight-result-airline{font-weight:700;font-size:.8rem;color:var(--text-dark);text-align:center}.flight-result-arrive,.flight-result-depart{display:flex;flex-direction:column;gap:.15rem}.flight-result-time{font-weight:600;font-size:1rem;color:var(--text-dark)}.flight-result-code{font-size:.85rem;font-weight:600;color:#6b7280}.flight-result-duration-wrap{flex:1;text-align:center;display:flex;flex-direction:column;align-items:center;min-width:100px}.flight-result-duration{font-size:.9rem;font-weight:600;color:#374151;padding-bottom:.5rem;border-bottom:1px solid #e5e7eb;margin-bottom:.5rem}.flight-result-stops{display:block;font-size:.8rem;font-weight:600;color:#6b7280}.flight-result-price-wrap{display:flex;flex-direction:column;align-items:flex-end;gap:.5rem}.flight-result-price{font-size:1.25rem;font-weight:700;color:var(--text-dark)}.flight-result-class{font-size:.85rem;font-weight:600;color:#6b7280}.btn-book-now{padding:.5rem 1.25rem;border-radius:8px;border:none;background:var(--brand-orange);color:#fff;font-size:.9rem;font-weight:400;cursor:pointer;transition:background .2s}.btn-book-now:hover{background:var(--brand-orange-dark)}.flight-result-number{display:block;font-size:.75rem;font-weight:600;color:#6b7280;margin-top:.2rem}.flight-api-data{display:flex;flex-direction:column;gap:1rem}.flight-api-table{width:100%;max-width:400px;border-collapse:collapse;font-size:.85rem}.flight-api-table td{padding:.35rem .75rem .35rem 0;vertical-align:top}.flight-api-label{color:#6b7280;font-weight:600;width:140px}.flight-api-itineraries{margin-top:.5rem}.flight-api-itineraries strong{display:block;margin-bottom:.5rem;color:var(--text-dark)}.flight-api-leg{font-weight:600;color:var(--brand-blue);margin:.75rem 0 .35rem}.flight-api-segment{padding:.5rem .75rem;background:var(--light-gray);border-radius:6px;margin-bottom:.5rem;font-size:.85rem}.flight-api-raw{margin-top:1rem;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden}.flight-api-raw summary{padding:.5rem .75rem;background:#f3f4f6;cursor:pointer;font-weight:600;font-size:.85rem}.flight-api-raw pre{margin:0;padding:1rem;background:#fff;font-size:.75rem;overflow-x:auto;max-height:300px;overflow-y:auto}.site-footer{margin-top:3rem;padding:0;background:#fff;width:100%;border-top:1px solid #e5e7eb;display:block}.footer-inner{max-width:1400px;margin:0 auto;padding:2.5rem 2rem 1.5rem;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:2rem;align-items:start}.footer-col h4{font-size:1rem;font-weight:700;color:var(--text-primary);margin:0 0 1rem;letter-spacing:.02em}.footer-col a,.footer-col p{font-size:.9rem;font-weight:500;color:var(--text-primary);text-decoration:none;line-height:1.6;transition:color .2s}.footer-col a:hover{color:var(--brand-orange)}.footer-col ul{list-style:none;padding:0;margin:0}.footer-col ul li{margin-bottom:.5rem}.footer-about-text{margin-bottom:1rem;max-width:260px;font-size:.9rem;font-weight:400;color:var(--text-secondary);line-height:1.6}.footer-socials{display:flex;gap:1rem;margin-top:1rem}.footer-socials a{display:inline-flex;align-items:center;justify-content:center;width:52px;height:52px;border-radius:50%;color:#fff;font-size:1.5rem;transition:transform .2s,box-shadow .2s}.footer-socials a:first-child{background:#25d366}.footer-socials a:nth-child(2){background:#1877f2}.footer-socials a:nth-child(3){background:linear-gradient(135deg,#f58529,#dd2a7b,#8134af)}.footer-socials a:nth-child(4){background:red}.footer-socials a:nth-child(5){background:#ea4335}.footer-socials a:hover{color:#fff;transform:scale(1.12) translateY(-3px);box-shadow:0 6px 16px rgba(0,0,0,.2)}.social ul{list-style:none;padding:0;margin:0;display:flex;flex-wrap:wrap;gap:.5rem 1rem}.social ul li{margin:0}.social a{display:inline-flex;align-items:center;gap:.4rem;color:#374151;text-decoration:none;font-size:.9rem;font-weight:600;transition:color .2s}.social a:hover{color:var(--primary-orange)}.social .fa{font-size:1.1rem}.footer-contact-item{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem;font-size:.9rem;font-weight:500;color:var(--text-primary)}.footer-contact-item svg{flex-shrink:0;color:var(--brand-orange)}.footer-brand-logo{height:56px;width:auto;max-width:200px;object-fit:contain;margin-bottom:1rem}.footer-col-logo .footer-logo-design{display:none;margin-bottom:.75rem}.site-footer .footer-logo-icon{width:48px;height:48px;background:0 0;border:3px solid var(--primary-orange);border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.site-footer .footer-logo-icon img{width:42px;height:42px;object-fit:contain}.site-footer .footer-logo-text-container{display:flex;flex-direction:column;line-height:1.2}.site-footer .footer-logo-main-text{font-family:"Russo One",sans-serif;font-size:1.25rem;font-weight:700;letter-spacing:.02em;margin-top:0;margin-left:0}.site-footer .footer-logo-ian,.site-footer .footer-logo-travel{font-family:"Russo One",sans-serif;color:var(--primary-orange)}.site-footer .footer-logo-sub-text{font-family:"Russo One",sans-serif;font-size:calc(.65rem * .95 * .95);font-weight:700;color:#6b7280;letter-spacing:.06em;text-transform:uppercase;margin-top:.15rem;margin-left:0;transform:translateX(-10%)}.footer-bottom{max-width:1400px;margin:0 auto;padding:1.25rem 2rem;border-top:1px solid var(--border-light);display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:1rem;clear:both;text-align:center}.footer-bottom p{font-size:.875rem;font-weight:500;color:var(--text-secondary);margin:0}.footer-bottom-links{display:flex;flex-wrap:wrap;gap:1.25rem}.footer-bottom-links a{font-size:.85rem;color:#6b7280;text-decoration:none}.footer-bottom-links a:hover{color:var(--primary-orange)}@media (max-width:900px){.utility-bar{padding:.6rem 1rem}.main-header{padding:.75rem 1rem}.hero{padding:0}.flight-search-section{padding:0 1rem 2rem}.flight-search-form-inner{padding:1.25rem 1.5rem 1.5rem}.flight-search-grid{grid-template-columns:1fr}.flight-search-field.with-swap .flight-search-swap{transform:rotate(90deg)}.flight-search-multicity-meta,.flight-search-segment{grid-template-columns:1fr}.flight-search-segment .flight-search-segment-label{grid-column:1/-1}.flight-search-tabs{flex-wrap:wrap;gap:.25rem;justify-content:center}.flight-search-tabs .tab-sep{display:none}.ek-calendar-dropdown{left:50%!important;top:50%!important;transform:translate(-50%,-50%);max-width:calc(100vw - 2rem)}.passengers-dropdown{left:50%!important;transform:translateX(-50%);max-width:calc(100vw - 2rem)}.utility-bar{flex-wrap:wrap;gap:1rem;font-size:.75rem}.main-header{flex-wrap:wrap;gap:1rem}.nav-menu{gap:1.2rem;font-size:.85rem}.site-footer .footer-inner{padding:2rem 1rem;grid-template-columns:1fr 1fr;gap:1.5rem}.site-footer .footer-col-logo{grid-column:1/-1}.flight-results-layout{flex-direction:column}}@media (max-width:600px){.utility-bar{justify-content:center}.main-header{flex-direction:column;align-items:flex-start}.header-nav-right{width:100%;flex-wrap:wrap}.nav-menu{flex-wrap:wrap;width:100%}.hero{margin-top:0}.flight-search-section{padding:0 1rem 1.5rem}.flight-search-form-inner{padding:1rem 1.25rem 1.25rem}.flight-search-tabs label{padding:.35rem .5rem;font-size:.85rem}.site-footer .footer-inner{padding:1.5rem 1rem;grid-template-columns:1fr;gap:1.5rem}.site-footer .footer-col-logo{grid-column:1/-1}.footer-bottom{padding:1rem;flex-direction:column;text-align:center}}
  </style>
  <script>
    // Prevent scroll restoration as early as possible
    if('scrollRestoration' in history){
      history.scrollRestoration='manual';
    }
    // Immediately prevent scrolling
    window.scrollTo(0,0);
    document.documentElement.scrollTop=0;
    if(document.body) document.body.scrollTop=0;
    // Prevent scroll on beforeunload
    window.addEventListener('beforeunload',function(){
      window.scrollTo(0,0);
    });
  </script>
  <style>
    html { scroll-behavior: auto; }
    .main-header { transition: box-shadow .25s ease; }
    .main-header.scrolled { box-shadow: 0 4px 20px rgba(0,0,0,.25); }
    .section-animate { opacity: 0; transform: translateY(28px); transition: opacity .55s ease-out, transform .5s ease-out; }
    .section-animate.visible { opacity: 1; transform: translateY(0); }
    .nav-menu a { transition: color .2s, transform .2s ease; }
    .nav-menu a:hover { transform: translateY(-2px); }
    .footer-col a, .footer-bottom-links a { transition: color .2s, transform .15s ease; }
    .footer-col a:hover, .footer-bottom-links a:hover { transform: translateX(2px); }
    #scroll-to-top { position: fixed; bottom: calc(24px + env(safe-area-inset-bottom)); right: calc(24px + env(safe-area-inset-right)); width: 48px; height: 48px; border-radius: 50%; background: var(--primary-orange); color: #fff; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 16px rgba(242,137,27,.45); z-index: 997; opacity: 0; visibility: hidden; transition: opacity .3s, visibility .3s, transform .2s; }
    #scroll-to-top.visible { opacity: 1; visibility: visible; }
    #scroll-to-top:hover { background: var(--dark-orange); transform: scale(1.08); }
    @media (max-width:600px){ #scroll-to-top { bottom: calc(24px + env(safe-area-inset-bottom)); right: calc(16px + env(safe-area-inset-right)); width: 44px; height: 44px; } }
    .nav-toggle{display:none;background:0 0;border:none;padding:.5rem;cursor:pointer;flex-direction:column;justify-content:center;gap:5px;width:44px;height:44px;align-items:center;margin-left:auto}
    .nav-toggle-bar{display:block;width:24px;height:2px;background:#fff;border-radius:1px;transition:transform .3s,opacity .3s}
    .nav-toggle[aria-expanded="true"] .nav-toggle-bar:nth-child(1){transform:translateY(7px) rotate(45deg)}
    .nav-toggle[aria-expanded="true"] .nav-toggle-bar:nth-child(2){opacity:0}
    .nav-toggle[aria-expanded="true"] .nav-toggle-bar:nth-child(3){transform:translateY(-7px) rotate(-45deg)}
    @media (max-width:768px){.main-header{flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center}.nav-toggle{display:flex}.header-nav-right{display:none;width:100%;flex-basis:100%;order:3;padding-top:.5rem;border-top:1px solid rgba(255,255,255,.2);margin-top:.25rem;flex-direction:column}.main-header.nav-open .header-nav-right{display:flex}.header-nav-right .nav-menu{flex-direction:column;width:100%;align-items:stretch}.header-nav-right .nav-menu a{padding:.75rem 1rem;border-bottom:1px solid rgba(255,255,255,.1)}.header-nav-right .nav-menu a:last-child{border-bottom:none}}
    /* Remove space between header and banner */
    .page-hero { margin-top: 0 !important; }
    /* Remove space between banner and search area on home */
    .hero .page-hero.hero-banner .page-hero__content { min-height: 0 !important; padding: 0 !important; display: none !important; }
    .hero .page-hero.hero-banner { margin-top: -12px !important; margin-bottom: 0 !important; }
    .hero .home-flight-search-wrap { margin-top: 0 !important; padding-top: 0 !important; }
    .main-header { position: fixed !important; top: 0 !important; z-index: 1000 !important; }
    .container { padding-top: 72px !important; }
    .nav-agent-btn { background: linear-gradient(135deg, #F7B04A 0%, #F09020 100%) !important; color: #fff !important; padding: 0.35rem 0.9rem !important; border-radius: 10px !important; font-weight: 600 !important; font-size: 0.85rem !important; box-shadow: 0 3px 10px rgba(247,176,74,0.35); }
    .nav-agent-btn:hover { background: linear-gradient(135deg, #F09020 0%, #E08518 100%) !important; color: #fff !important; box-shadow: 0 6px 20px rgba(247,176,74,0.45); transform: translateY(-1px); }
    .nav-menu a.nav-agent-btn:hover { color: #fff !important; }
    /* Ensure banner images start below header */
    .page-hero { margin-top: 0 !important; position: relative !important; z-index: 1 !important; }
    @media (max-width: 768px) {
      .container { padding-top: 68px !important; }
    }
    /* White header – fixed height so logo can be larger without growing the bar */
    .main-header { background: #fff !important; border-bottom-color: #e5e7eb !important; padding: 0.5rem 1rem !important; height: 60px !important; min-height: 60px !important; overflow: visible !important; align-items: center !important; }
    /* Logo wrapper - separate styling for logo only */
    .logo-wrapper { display: flex; align-items: center; background: #fff !important; }
    .logo-wrapper .brand-logo { height: 50px !important; }
    .nav-menu a { color: #333 !important; font-size: 1rem !important; font-weight: 700 !important; }
    .nav-menu a:hover, .nav-menu a.active { color: var(--primary-orange) !important; }
    .nav-toggle-bar { background: #333 !important; }
    /* Decrease footer social media icons size */
    .footer-socials a { width: 40px !important; height: 40px !important; font-size: 1.2rem !important; }
    /* Why Choose Us – more visible, attractive icons */
    .why-choose-us-icon-wrap {
      width: 80px !important;
      height: 80px !important;
      border-radius: 50% !important;
      background: linear-gradient(135deg, rgba(242, 136, 29, 0.2) 0%, rgba(242, 136, 29, 0.35) 100%) !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      color: var(--primary-orange) !important;
      box-shadow: 0 4px 16px rgba(242, 136, 29, 0.25) !important;
      border: 2px solid rgba(242, 136, 29, 0.3) !important;
    }
    .why-choose-us-card:hover .why-choose-us-icon-wrap {
      background: linear-gradient(135deg, var(--primary-orange) 0%, var(--dark-orange) 100%) !important;
      color: #fff !important;
      box-shadow: 0 8px 24px rgba(242, 136, 29, 0.45) !important;
      border-color: var(--primary-orange) !important;
      transform: scale(1.08) !important;
    }
    .why-choose-us-icon-wrap i.fa-solid {
      font-size: 2rem !important;
    }
    /* Airline logos – rounded rectangle to suit various logo shapes */
    .flight-result-airline-logo { border-radius: 12px; object-fit: contain; }
    /* Flight results – style aligned with transparent-flight-search */
    .flight-results-section { max-width: 1140px; margin: 0 auto; padding: 1.5rem 1rem 2rem; box-sizing: border-box; }
    .flight-results-inline-wrap {
      background: rgba(244, 136, 26, 0.97);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      overflow: hidden;
      font-family: "Salam Air Effra", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    }
    .flight-results-heading {
      background: #f5ebe0;
      color: #5D4037;
      font-size: 1.1rem;
      font-weight: 800;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      margin: 0;
      padding: 1rem 1.5rem;
      border-radius: 16px 16px 0 0;
      text-align: center;
    }
    .flight-results-sub {
      background: rgba(244, 136, 26, 0.97);
      color: #fff;
      font-size: 0.9rem;
      font-weight: 600;
      margin: 0;
      padding: 0.5rem 1.5rem 1rem;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .flight-results-dates-grid {
      display: flex;
      gap: 1rem;
      padding: 1rem 1.5rem;
      background: #fdf8f3;
      overflow-x: auto;
      flex-wrap: nowrap;
      -webkit-overflow-scrolling: touch;
      border-bottom: 1px solid #e8ddd4;
    }
    .flight-result-date-card {
      flex: 0 0 auto;
      min-width: 100px;
      padding: 1rem 1.25rem;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
      cursor: pointer;
      transition: box-shadow 0.2s, transform 0.2s;
    }
    .flight-result-date-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
      transform: translateY(-2px);
    }
    .flight-result-date-card.selected {
      border: 2px solid #D4732B;
      box-shadow: 0 2px 8px rgba(242,137,27,0.25);
    }
    .flight-result-date-card-date {
      font-size: 0.85rem;
      color: #6b7280;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .flight-result-date-card-price {
      font-size: 1.1rem;
      font-weight: 700;
      color: #5D4037;
    }
    .flight-result-date-card-price.lowest {
      color: #dc2626;
    }
    .flight-results-body {
      display: flex;
      gap: 1.5rem;
      align-items: flex-start;
      background: #fffbf7;
      padding: 1.5rem;
      border-radius: 0 0 16px 16px;
    }
    .flight-results-filters {
      flex: 0 0 260px;
      background: #faf6f1;
      border-radius: 12px;
      padding: 1.25rem;
      border: 1px solid #e8ddd4;
      position: sticky;
      top: 100px;
    }
    .filter-block {
      margin-bottom: 1.25rem;
    }
    .filter-block:last-child {
      margin-bottom: 0;
    }
    .filter-block-title {
      font-size: 0.95rem;
      font-weight: 700;
      color: #5D4037;
      margin: 0 0 0.75rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid #e8ddd4;
    }
    .filter-airlines-hint {
      font-size: 0.75rem;
      color: #6b7280;
      margin: 0 0 0.5rem 0;
      font-weight: 500;
    }
    .filter-airlines {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .filter-airline-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      color: #374151;
      cursor: pointer;
      font-weight: 500;
    }
    .filter-airline-item input[type="checkbox"] {
      accent-color: #D4732B;
      cursor: pointer;
      width: 1rem;
      height: 1rem;
      margin: 0;
      flex-shrink: 0;
    }
    .filter-airline-item:hover {
      color: #5D4037;
    }
    .filter-sort-wrap,
    .filter-departure-wrap {
      margin-top: 0.25rem;
    }
    .filter-select {
      width: 100%;
      padding: 0.6rem 0.75rem;
      font-size: 0.9rem;
      font-weight: 500;
      color: #374151;
      background: #fff;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.75rem center;
      padding-right: 2rem;
    }
    .filter-select:hover,
    .filter-select:focus {
      border-color: #D4732B;
      outline: none;
    }
    .flight-results-main {
      flex: 1;
      min-width: 0;
    }
    .flight-results-list {
      background: transparent;
      padding: 0;
      border-radius: 0;
    }
    .flight-result-card {
      background: #fffcf9;
      border: 1px solid #e8ddd4;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(93,64,55,0.06);
      transition: box-shadow 0.2s, transform 0.2s, border-color 0.2s;
    }
    .flight-result-card:hover {
      box-shadow: 0 6px 20px rgba(93,64,55,0.12);
      transform: translateY(-2px);
      border-color: rgba(212,115,43,0.5);
    }
    .flight-result-airline { color: #5D4037; font-weight: 800; }
    .flight-result-time { color: #111827; font-size: 1.15rem; font-weight: 700; display: block; }
    .flight-result-code { color: #5D4037; font-size: 1.05rem; font-weight: 700; display: block; }
    .flight-result-duration { color: #1f2937; font-size: 1rem; font-weight: 700; }
    .flight-result-stops { color: #374151; font-size: 0.9rem; font-weight: 700; }
    .flight-result-date { display: block; color: #6b7280; font-size: 0.85rem; font-weight: 600; margin-top: 0.35rem; }
    .flight-result-depart .flight-result-code,
    .flight-result-arrive .flight-result-code { margin-top: 0.2rem; }
    .flight-result-duration-wrap .flight-result-stops { margin-top: 0.25rem; }
    .flight-result-price { color: #5D4037; font-weight: 800; }
    .flight-results-empty { color: #6b7280; padding: 2rem; text-align: center; font-weight: 600; }
    .flight-results-section .btn-book-now {
      background: linear-gradient(135deg, #D4732B 0%, #C85A2B 100%);
      color: #fff;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: background 0.2s;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }
    .flight-results-section .btn-book-now:hover {
      background: linear-gradient(135deg, #C85A2B 0%, #B84A1F 100%);
    }
    @media (max-width: 768px) {
      .flight-results-section { padding: 1rem 0.75rem; }
      .flight-results-heading { font-size: 0.95rem; padding: 0.85rem 1rem; }
      .flight-results-body {
        flex-direction: column;
        padding: 1rem;
      }
      .flight-results-filters {
        flex: 0 0 auto;
        width: 100%;
        position: static;
      }
      .flight-results-main { width: 100%; }
    }
    /* Transparent Flight Search Section */
    .transparent-flight-search-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); z-index: 9999; display: none; opacity: 0; transition: opacity 0.3s ease; }
    .transparent-flight-search-overlay.active { display: block; opacity: 1; }
    .transparent-flight-search { position: absolute; top: 50%; left: 50%; transform: translate(-50%, 0); width: 80%; max-width: 1140px; z-index: 10000; padding-right: 15px; padding-left: 15px; margin-right: auto; margin-left: auto; box-sizing: border-box; font-family: "Salam Air Effra", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; font-size: 12px; line-height: 1.5; color: #707271; text-align: start; -webkit-text-size-adjust: 100%; -webkit-tap-highlight-color: transparent; border-radius: 16px; overflow: visible; }
    .transparent-flight-search.popup-mode { position: fixed; top: 120px; left: 50%; transform: translateX(-50%); display: block; }
    .transparent-flight-search-close { position: absolute; top: 0.5rem; right: 1rem; width: 32px; height: 32px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 50%; cursor: pointer; display: none; align-items: center; justify-content: center; z-index: 10001; font-size: 1.2rem; color: #313a8f; transition: background 0.2s, transform 0.2s; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15); }
    /* Ensure calendar appears above popup */
    #ek-calendar, .ek-calendar-dropdown { z-index: 10002 !important; }
    #ek-calendar-backdrop, .ek-calendar-backdrop { z-index: 10001 !important; }
    /* Ensure all calendar libraries appear above popup */
    .flatpickr-calendar, .flatpickr-calendar.open { z-index: 10002 !important; }
    .flatpickr-calendar.animate.open { z-index: 10002 !important; }
    .flatpickr-calendar.open { right: auto !important; }
    .etihad-field-dates { position: relative !important; overflow: visible !important; }
    .flatpickr-months .flatpickr-month { display: flex; justify-content: center; align-items: center; }
    .flatpickr-current-month { left: 50% !important; transform: translateX(-50%) translate3d(0,0,0) !important; width: auto !important; }
    /* Flatpickr – improved view, left-aligned, proper form */
    .flatpickr-calendar { font-size: 15px; padding: 1rem; border-radius: 14px; box-shadow: 0 16px 48px rgba(0,0,0,.15); }
    .flatpickr-calendar .flatpickr-months .flatpickr-month { height: 44px; }
    .flatpickr-current-month { font-size: 1.1rem !important; font-weight: 600 !important; color: #5D4037 !important; }
    .flatpickr-weekday { font-size: .8rem !important; font-weight: 700 !important; color: #4b5563 !important; text-transform: uppercase; letter-spacing: .04em; }
    .flatpickr-day { font-size: .95rem !important; font-weight: 500 !important; max-width: 42px !important; height: 42px !important; line-height: 42px !important; border-radius: 10px !important; }
    .flatpickr-day:hover { background: #fff5eb !important; border-color: #F2891B !important; color: #5D4037 !important; }
    .flatpickr-day.today { border: 2px solid #D4732B !important; background: rgba(242,137,27,.12) !important; color: #5D4037 !important; font-weight: 700 !important; }
    .flatpickr-day.selected, .flatpickr-day.startRange, .flatpickr-day.endRange,
    .flatpickr-day.selected:hover, .flatpickr-day.startRange:hover, .flatpickr-day.endRange:hover,
    .flatpickr-day.inRange { background: #F2891B !important; border-color: #F2891B !important; color: #fff !important; }
    .flatpickr-day.flatpickr-disabled, .flatpickr-day.prevMonthDay, .flatpickr-day.nextMonthDay { color: #d1d5db !important; }
    .flatpickr-prev-month:hover svg, .flatpickr-next-month:hover svg { fill: #F2891B !important; }
    .flatpickr-innerContainer { display: contents !important; }
    .dayContainer { padding: 0 .25rem !important; }
    .datepicker, .datepicker-dropdown { z-index: 10002 !important; }
    [id*="calendar"], [class*="calendar"]:not(.transparent-flight-search) { z-index: 10002 !important; }
    /* Improved calendar view */
    .ek-calendar-backdrop { position: fixed !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; width: 100vw !important; height: 100vh !important; min-width: 100vw !important; min-height: 100vh !important; background: rgba(0, 0, 0, 0.45); backdrop-filter: blur(4px); z-index: 10001 !important; pointer-events: auto !important; }
    .ek-calendar-dropdown {
      position: fixed !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) !important;
      z-index: 10002 !important;
      pointer-events: auto !important;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.12), 0 4px 16px rgba(0, 0, 0, 0.06);
      border: 1px solid rgba(229, 231, 235, 0.95);
      padding: 1.5rem 1.75rem;
      width: 360px;
      max-height: 90vh;
      overflow-y: auto;
    }
    .ek-calendar-dropdown.ek-calendar-twomonths { width: 720px; padding: 1.75rem 2rem; }
    .ek-calendar-dropdown.ek-calendar-threemonths { width: 960px; max-width: calc(100vw - 2rem); padding: 1.75rem 2rem; }
    .ek-calendar-twomonths-wrap { display: none; }
    .ek-calendar-dropdown.ek-calendar-twomonths .ek-calendar-single { display: none !important; }
    .ek-calendar-dropdown.ek-calendar-twomonths .ek-calendar-twomonths-wrap { display: block !important; }
    .ek-calendar-dropdown.ek-calendar-threemonths .ek-calendar-single { display: none !important; }
    .ek-calendar-dropdown.ek-calendar-threemonths .ek-calendar-twomonths-wrap { display: block !important; }
    .ek-calendar-dropdown.open { display: block !important; visibility: visible !important; }
    .ek-calendar-top {
      background: linear-gradient(135deg, #D4732B 0%, #C85A2B 100%);
      margin: -1.5rem -1.75rem 1.25rem -1.75rem;
      padding: 1.25rem 1.75rem;
      border-radius: 14px 14px 0 0;
    }
    .ek-calendar-dropdown.ek-calendar-twomonths .ek-calendar-top { margin: -1.75rem -2rem 1.5rem -2rem; padding: 1.25rem 2rem; }
    .ek-calendar-title-row { gap: 0.6rem; }
    .ek-calendar-plane-icon { color: #F2891B !important; }
    .ek-calendar-title { color: #fff !important; font-size: 1.05rem; font-weight: 600; }
    .ek-calendar-single-nav, .ek-calendar-panel-header {
      margin-bottom: 1rem;
      align-items: center;
    }
    .ek-calendar-month-year, .ek-calendar-panel-title {
      font-size: 1.15rem;
      font-weight: 700;
      color: #fff;
    }
    .ek-calendar-nav-btn {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.4);
      color: #fff;
      font-size: 1.25rem;
      transition: all 0.2s ease;
    }
    .ek-calendar-nav-btn:hover:not(:disabled) {
      background: #F2891B;
      border-color: #F2891B;
      color: #fff;
      transform: scale(1.05);
    }
    .ek-calendar-weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      margin-bottom: 0.5rem;
    }
    .ek-calendar-weekday {
      text-align: center;
      font-size: 0.7rem;
      font-weight: 700;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }
    .ek-calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
    }
    .ek-calendar-day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.95rem;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      border-radius: 10px;
      transition: all 0.2s ease;
    }
    .ek-calendar-day:hover:not(.empty):not(.disabled) {
      background: #fff5eb;
      color: #E97800;
      transform: scale(1.08);
    }
    .ek-calendar-day.today {
      font-weight: 700;
      color: #5D4037;
      background: rgba(242, 137, 27, 0.12);
      border: 2px solid rgba(212, 115, 43, 0.4);
    }
    .ek-calendar-day.selected {
      background: #F2891B;
      color: #fff;
      box-shadow: 0 2px 8px rgba(242, 137, 27, 0.4);
    }
    .ek-calendar-day.selected:hover {
      background: #E97800;
      color: #fff;
    }
    .ek-calendar-day.disabled {
      color: #d1d5db;
      cursor: not-allowed;
      background: transparent;
    }
    .ek-calendar-day.empty { opacity: 0; pointer-events: none; }
    .ek-calendar-twomonths-inner .ek-calendar-month-panel:first-child {
      border-right: 1px solid #e5e7eb;
      padding-right: 1.5rem;
    }
    /* Three-month calendar with prices */
    .ek-calendar-threemonths-wrap { position: relative; }
    .ek-calendar-top-nav-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.25rem;
      padding: 0 0.25rem;
    }
    .ek-calendar-threemonths-inner {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }
    .ek-calendar-threemonths-inner .ek-calendar-month-panel {
      border-right: none;
      padding-right: 0;
      padding: 0 0.5rem;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 1rem;
    }
    .ek-calendar-threemonths-inner .ek-calendar-month-panel:not(:last-child) { border-right: 1px solid #e5e7eb; }
    .ek-calendar-day-with-price {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      padding: 0.35rem 0;
      min-height: 52px;
    }
    .ek-calendar-day-with-price .ek-calendar-day-num { font-weight: 600; }
    .ek-calendar-day-with-price .ek-calendar-day-price {
      font-size: 0.65rem;
      font-weight: 600;
      color: #6b7280;
      line-height: 1.1;
    }
    .ek-calendar-day-with-price .ek-calendar-day-price.low-fare { color: #16a34a; }
    .ek-calendar-day-with-price .ek-calendar-day-price.unavailable { color: #9ca3af; }
    .ek-calendar-day.selected.ek-calendar-day-with-price {
      background: #fff;
      color: #5D4037;
      box-shadow: 0 0 0 2px #F2891B;
      border-radius: 8px;
    }
    .ek-calendar-day.selected.ek-calendar-day-with-price .ek-calendar-day-price { color: #6b7280; }
    .ek-calendar-day.selected.ek-calendar-day-with-price .ek-calendar-day-price.low-fare { color: #16a34a; }
    @media (max-width: 1024px) {
      .ek-calendar-threemonths-inner { grid-template-columns: 1fr; }
      .ek-calendar-threemonths-inner .ek-calendar-month-panel:not(:last-child) { border-right: none; border-bottom: 1px solid #e5e7eb; }
      .ek-calendar-dropdown.ek-calendar-threemonths { width: calc(100vw - 2rem); }
    }
    @media (max-width: 620px) {
      .ek-calendar-dropdown { width: calc(100vw - 2rem); padding: 1.25rem; }
      .ek-calendar-dropdown.ek-calendar-twomonths { width: calc(100vw - 2rem); padding: 1.25rem; }
      .ek-calendar-day { font-size: 0.9rem; }
    }
    .transparent-flight-search.popup-mode .transparent-flight-search-close { display: flex; }
    .transparent-flight-search-close:hover { background: #fff; transform: scale(1.1); }
    .transparent-flight-search-close i { display: block; }
    .transparent-search-tabs { margin-bottom: 0; border-radius: 16px 16px 0 0; overflow: hidden; }
    .transparent-home-search .transparent-search-tabs { border-radius: 16px 16px 0 0; border-bottom: none; }
    .transparent-tab-row { display: flex; align-items: flex-end; gap: 0; }
    .transparent-tab-col { flex: 1; }
    .transparent-tab-link { display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.9rem 1.5rem; background: #f5ebe0; color: #5D4037; font-size: 1rem; font-weight: 800; text-transform: none; text-decoration: none; border-radius: 0; transition: background 0.2s, color 0.2s; white-space: nowrap; border: none; width: 100%; letter-spacing: 0.03em; }
    .transparent-tab-col.active .transparent-tab-link { background: rgba(244, 136, 26, 0.97); color: #fff; padding-bottom: calc(0.75rem + 1rem); margin-bottom: -1rem; border-bottom: none; font-weight: 800; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); }
    .transparent-tab-col:not(.active) .transparent-tab-link { padding-bottom: 0.75rem; }
    .transparent-tab-col:not(.active) .transparent-tab-link:hover { background: #edd9c8; }
    .transparent-tab-col.tab-disabled .transparent-tab-link { cursor: not-allowed; opacity: 0.65; pointer-events: none; }
    .transparent-tab-col.tab-disabled .transparent-tab-link:hover { background: #EBEBEB; }
    .transparent-tab-link .icon.plane, .transparent-tab-link .icon.hotel, .transparent-tab-link .icon.insurance { display: inline-flex; align-items: center; }
    .transparent-tab-link .icon.plane i, .transparent-tab-link .icon.hotel i, .transparent-tab-link .icon.insurance i { font-size: 1rem; }
    .transparent-search-content { background: rgba(244, 136, 26, 0.97); padding: calc(1.5rem * 1.05) 1.5rem; border-radius: 0 0 20px 20px; margin-top: -1rem; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); }
    /* Etihad-style hero form – warm cream card */
    .transparent-search-content:has(.etihad-hero-form.active) { background: #fffbf7; box-shadow: 0 4px 24px rgba(0,0,0,0.08); border-radius: 0 0 20px 20px; padding: 1.25rem 1.5rem 1rem 1.5rem; margin-top: 0; }
    /* Home search: tabs and form extend to border */
    .transparent-home-search .transparent-search-tabs { margin-left: 0; margin-right: 0; }
    .transparent-home-search .transparent-search-content { padding-left: 1rem; padding-right: 1rem; }
    .transparent-home-search .transparent-search-content:has(.etihad-hero-form.active) { padding: 0.25rem 1rem 0.9rem 1rem; }
    .etihad-search-form { display: flex; flex-direction: column; gap: 0.4rem; }
    .etihad-pill-row { display: flex; align-items: center; justify-content: flex-start; gap: 0; background: #f5ebe0; border-radius: 999px; padding: 2px 3px; width: fit-content; margin: 0 0 0.35rem 0; }
    .etihad-pill-option { flex: 1; cursor: pointer; }
    .etihad-pill-option input { position: absolute; opacity: 0; pointer-events: none; }
    .etihad-pill-option span { display: block; padding: 0.35rem 1.1rem; font-size: 0.88rem; font-weight: 600; color: #6B5344; background: #f5ebe0; border-radius: 999px; transition: all 0.2s; white-space: nowrap; }
    .etihad-pill-option:hover span { color: #5D4037; background: #f0e4d8; }
    .etihad-pill-option input:checked + span { background: var(--primary-orange); color: #fff; }
    .etihad-pill-option input:disabled + span { opacity: 0.55; cursor: not-allowed; pointer-events: none; background: #f5ebe0; }
    .etihad-fields-row { display: flex; align-items: stretch; gap: 0.6rem; flex-wrap: wrap; }
    .etihad-field { flex: 1 1 140px; min-width: 0; display: flex; align-items: stretch; gap: 0.6rem; background: #fffcf9; border: 1.5px solid #e8ddd4; border-radius: 12px; padding: 0.6rem 0.75rem; transition: border-color 0.2s, box-shadow 0.2s; min-height: 52px; }
    .etihad-field:focus-within { border-color: #D4732B; box-shadow: 0 0 0 3px rgba(242,137,27,0.15); }
    .etihad-field-dates { cursor: pointer; }
    .etihad-field-icon { flex-shrink: 0; width: 34px; height: 34px; min-width: 34px; min-height: 34px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; margin: auto 0; }
    .etihad-icon-gold { background: #b8860b; color: #fff; }
    .etihad-icon-grey { background: #e8ddd4; color: #6B5344; }
    .etihad-field.etihad-field-guests .etihad-field-icon { background: var(--primary-orange) !important; color: #fff !important; }
    .etihad-field-inner { flex: 1; min-width: 0; position: relative; display: flex; flex-direction: column; justify-content: center; }
    .etihad-field .transparent-input { background: transparent !important; padding: 0.2rem 0; padding-left: 0; border: none; min-height: 1.3rem; font-size: 0.95rem; line-height: 1.35; }
    .etihad-field label { position: static; transform: none; margin-bottom: 0.2rem; font-size: 0.7rem; font-weight: 700; color: #64748b; line-height: 1.2; text-transform: none; letter-spacing: 0.02em; }
    .etihad-field label.etihad-label-empty { display: none; }
    /* From/To labels stacked above Origin/Destination placeholder - left aligned */
    .etihad-field-from .transparent-search-field label,
    .etihad-field-to .transparent-search-field label {
      position: static !important; left: auto !important; top: auto !important; transform: none !important;
      margin-bottom: 0.15rem; display: block; align-items: flex-start; text-align: left; font-size: 0.65rem !important;
    }
    .etihad-field-from .transparent-input,
    .etihad-field-to .transparent-input { font-size: 0.95rem; padding-right: 1.6rem !important; }
    .etihad-field-to .etihad-field-icon { align-self: flex-start; margin-top: 0; }
    .etihad-field-from .etihad-field-icon,
    .etihad-field-to .etihad-field-icon,
    .etihad-field-dates .etihad-field-icon { background: var(--primary-orange) !important; color: #fff !important; }
    .etihad-field-from .field-clear-btn,
    .etihad-field-to .field-clear-btn { position: absolute; right: 0.35rem; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; border: none; background: transparent; color: #9ca3af; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; border-radius: 50%; transition: color 0.2s, background 0.2s; padding: 0; }
    .etihad-field-from .field-clear-btn:hover,
    .etihad-field-to .field-clear-btn:hover { color: #374151; background: rgba(0,0,0,0.06); }
    .etihad-field-from .etihad-field-inner,
    .etihad-field-to .etihad-field-inner,
    .etihad-field-guests .etihad-field-inner { align-items: flex-start; text-align: left; }
    /* Third & fourth field: label on top, value below - left aligned */
    .etihad-field-guests .transparent-search-field label,
    .etihad-field-dates .transparent-search-field label {
      position: static !important; left: auto !important; top: auto !important; transform: none !important;
      margin-bottom: 0.15rem; display: block; align-items: flex-start; font-size: 0.7rem; text-align: left;
    }
    .etihad-field-dates .etihad-field-inner { align-items: flex-start; text-align: left; }
    .etihad-field-guests .transparent-input,
    .etihad-field-dates .transparent-input { font-size: 0.85rem; color: #4b5563; font-weight: 500; }
    .etihad-field-guests .transparent-input::placeholder,
    .etihad-field-dates .transparent-input::placeholder { color: #9ca3af; font-weight: 400; }
    /* Warm cream for guests & dates fields */
    .etihad-field-guests,
    .etihad-field-dates { background: #fdf6f0; border-color: #e8ddd4; }
    .etihad-field .transparent-input { color: #374151; font-weight: 600; }
    .etihad-field .transparent-input::placeholder { color: #9ca3af; font-weight: 400; }
    .etihad-swap-btn { flex-shrink: 0; width: 40px; height: 40px; min-width: 40px; min-height: 40px; border-radius: 12px; border: 1.5px solid #e8ddd4; background: #f8f0e8; color: #6B5344; cursor: pointer; display: flex; align-items: center; justify-content: center; margin: auto 0; transition: all 0.2s; font-size: 0.9rem; }
    .etihad-swap-btn:hover { background: #D4732B; border-color: #D4732B; color: #fff; }
    .etihad-search-btn-wrap { flex: 0 0 auto; display: flex; align-items: center; }
    .etihad-search-btn { padding: 0 0.75rem; height: 40px; min-height: 40px; min-width: auto; width: auto; max-width: 115px; background: linear-gradient(135deg, #F4881A 0%, #E87800 100%); color: #fff; border: none; border-radius: 8px; font-size: 0.8rem; font-weight: 700; cursor: pointer; transition: all 0.2s; white-space: nowrap; box-shadow: 0 3px 10px rgba(244,136,26,0.3); }
    .etihad-search-btn:hover { background: linear-gradient(135deg, #E87800 0%, #d86a00 100%); box-shadow: 0 6px 20px rgba(244,136,26,0.4); transform: translateY(-1px); }
    @media (max-width: 900px) {
      .etihad-fields-row { flex-wrap: wrap; }
      .etihad-field { flex: 1 1 calc(50% - 0.5rem); min-width: 140px; }
      .etihad-search-btn-wrap { flex: 1 1 100%; }
      .etihad-search-btn { width: 100%; }
    }
    .transparent-tab-content { display: none; }
    .transparent-tab-content.active { display: block; }
    .transparent-compact-search { }
    /* Flight form: use 4-column grid so row 2 fields match row 1 width */
    #flights-home .transparent-compact-search {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.5rem;
    }
    #flights-home .transparent-form-row {
      display: contents;
    }
    #flights-home .transparent-form-row .transparent-search-field,
    #flights-home .transparent-form-row .transparent-search-btn-container {
      min-width: 0;
    }
    #flights-home .transparent-trip-type-row {
      grid-column: 1 / -1;
      margin-bottom: 0.5rem;
    }
    .transparent-form-row { display: flex; align-items: stretch; gap: 0.5rem; flex-wrap: nowrap; margin-bottom: 1rem; }
    .transparent-form-row:last-child { margin-bottom: 0; }
    .transparent-search-field { position: relative; flex: 1 1 0; display: flex; align-items: center; min-width: 0; }
    .transparent-input-container { position: relative; width: 100%; flex: 1; min-width: 0; }
    .transparent-input { width: 100%; padding: 1.2rem 2.5rem 1.2rem 3.5rem; border: none; background: #fff; font-size: 1rem; color: #1a202c; font-weight: 600; border-radius: 8px; outline: none; box-sizing: border-box; min-height: 50px; }
    .transparent-input-container select.transparent-input { padding-right: 3rem; cursor: pointer; appearance: none; -webkit-appearance: none; -moz-appearance: none; }
    .transparent-input-container select.transparent-input option { padding: 0.5rem; }
    .transparent-input::placeholder { color: transparent; }
    .transparent-input:focus::placeholder { color: #9ca3af; }
    .transparent-search-field label { position: absolute; left: 1rem; top: 50%; visibility: visible; transform: translateY(-50%); pointer-events: none; display: flex; align-items: center; font-size: 0.9rem; color: #1a202c; transition: opacity 0.2s, transform 0.2s; }
    .transparent-search-field label .label { font-weight: 700; }
    .transparent-input-container::after { content: ''; position: absolute; right: 2.5rem; top: 50%; transform: translateY(-50%); width: 1px; height: 20px; background: #e5e7eb; pointer-events: none; }
    .etihad-field .transparent-input-container::after { display: none; }
    .transparent-input-container .icon-right { position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%); pointer-events: none; display: flex; align-items: center; color: #f4881a; font-size: 1.2rem; z-index: 1; }
    /* Airport dropdown - same look as Passengers & Cabin dropdown */
    .airport-dropdown-transparent {
      display: none; position: fixed !important;
      box-sizing: border-box;
      overflow-y: auto; overflow-x: hidden;
      width: 380px; min-width: 320px; max-width: 420px; min-height: 120px;
      background: #fff;
      border: 1px solid rgba(229, 231, 235, 0.95);
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
      z-index: 100999;
      padding: 1.25rem 1.5rem;
      pointer-events: auto;
    }
    .airport-dropdown-transparent.open { display: block !important; visibility: visible !important; }
    .airport-dropdown-transparent .airport-dropdown-header {
      margin: 0 0 0.75rem; font-size: 0.9rem; font-weight: 700; color: #1f2937;
    }
    .airport-dropdown-transparent .airport-dropdown-row {
      display: flex; align-items: center; gap: 1rem;
      padding: 0.6rem 0;
      border-bottom: 1px solid #f3f4f6;
      cursor: pointer; box-sizing: border-box;
      transition: background 0.2s;
    }
    .airport-dropdown-transparent .airport-dropdown-row:last-child { border-bottom: none; }
    .airport-dropdown-transparent .airport-dropdown-row:hover {
      background: #f9fafb;
    }
    .airport-dropdown-transparent .airport-dropdown-icon {
      flex-shrink: 0; width: 32px; height: 32px; min-width: 32px; min-height: 32px;
      display: flex; align-items: center; justify-content: center;
      background: #f3f4f6; border: 1px solid #d1d5db;
      color: #374151; font-size: 0.85rem; border-radius: 50%;
      transition: background 0.15s, border-color 0.15s, color 0.15s;
    }
    .airport-dropdown-transparent .airport-dropdown-row:hover .airport-dropdown-icon {
      background: #e5e7eb; border-color: #9ca3af; color: #1f2937;
    }
    .airport-dropdown-transparent .airport-dropdown-content {
      flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 0.15rem;
    }
    .airport-dropdown-transparent .airport-dropdown-city {
      font-size: 0.95rem; font-weight: 600; color: #374151; line-height: 1.3;
    }
    .airport-dropdown-transparent .airport-dropdown-name {
      font-size: 0.8rem; color: #6b7280; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-weight: 400;
    }
    .airport-dropdown-transparent .airport-dropdown-code {
      flex-shrink: 0; font-size: 0.95rem; font-weight: 600; color: #374151;
      min-width: 1.5rem; text-align: center;
    }
    .airport-dropdown-transparent .airport-dropdown-empty { padding: 1rem; color: #6b7280; text-align: center; }
    /* From dropdown – matches reference image (white, clean rows, gray IATA box) */
    .airport-dropdown-from {
      background: #fff; border: 1px solid #e5e7eb; border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    }
    .airport-dropdown-from .airport-dropdown-header { font-size: 0.95rem; font-weight: 700; }
    .airport-dropdown-from .airport-dropdown-row { padding: 0.85rem 0; border-bottom: 1px solid #f3f4f6; }
    .airport-dropdown-from .airport-dropdown-row:last-child { border-bottom: none; }
    .airport-dropdown-from .airport-dropdown-row:hover { background: #f9fafb; }
    .airport-dropdown-from .airport-dropdown-icon {
      background: linear-gradient(135deg, #d4b896 0%, #c4a574 50%, #a08060 100%) !important;
      border: none !important; color: #fff !important; border-radius: 8px;
    }
    .airport-dropdown-from .airport-dropdown-row:hover .airport-dropdown-icon {
      background: linear-gradient(135deg, #c4a574 0%, #b89564 50%, #8b7355 100%) !important;
    }
    .airport-dropdown-from .airport-dropdown-code {
      background: #f3f4f6 !important; border: 1px solid #e5e7eb !important;
      color: #374151 !important; padding: 0.35rem 0.65rem; border-radius: 8px; font-weight: 600;
    }
    /* From dropdown – Etihad origin-typeahead style */
    .origin-typeahead-wrapper { padding: 0; }
    .origin-typeahead-header { padding: 0 0 0.5rem; border-bottom: 1px solid #f3f4f6; }
    .origin-typeahead-header .dropdown-header { margin: 0; }
    .origin-typeahead-region.ey-heading-6 { font-size: 0.95rem; font-weight: 700; color: #1f2937; margin: 0; }
    .ey-font__light { font-weight: 400; }
    .ey-margin__bottom--8 { margin-bottom: 0.5rem; }
    .origin-typeahead-content.isShow { padding: 0.5rem 0; max-height: 340px; overflow-y: auto; }
    .airport-dropdown-from .dropdown-item { display: block; text-decoration: none; color: inherit; cursor: pointer; padding: 0.6rem 0; transition: background 0.15s; border: none; }
    .airport-dropdown-from .dropdown-item:hover, .airport-dropdown-from .dropdown-item.active { background: #f9fafb; }
    .airport-dropdown-from .dropdown-item--content { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; }
    .airport-dropdown-from .ey-row { display: flex; width: 100%; }
    .airport-dropdown-from .ey-border-radius-8 { border-radius: 8px; }
    .airport-dropdown-from .ey-column { flex: 1; min-width: 0; }
    .airport-dropdown-from .ey-text-start { text-align: left; }
    .airport-dropdown-from .ey-text-end { text-align: right; flex-shrink: 0; }
    .airport-dropdown-from .ey-display--flex { display: flex; align-items: center; gap: 0.5rem; }
    .airport-dropdown-from .tailfin-icon .ond-group-icons img { width: 32px; height: 32px; object-fit: contain; }
    .airport-dropdown-from .ey-margin__left--8 { margin-left: 0.5rem; }
    .airport-dropdown-from .origin-typeahead-airportName { font-size: 0.95rem; font-weight: 600; color: #374151; }
    .airport-dropdown-from .origin-typeahead-airportCode { font-size: 0.95rem; color: #6b7280; font-weight: 400; }
    .airport-dropdown-from .airport-grouping .origin-typeahead-airportName { font-size: 0.82rem; color: #6b7280; font-weight: 400; }
    .airport-dropdown-from .ey-chip--neutral { background: #f3f4f6; border: 1px solid #e5e7eb; color: #374151; padding: 0.35rem 0.65rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem; }
    .airport-dropdown-from .ey-chip--no-icon { }
    .airport-dropdown-from .ey-padding--none { padding: 0; }
    .airport-dropdown-from .align-center { align-items: center; }
    .airport-dropdown-from .ey-align-center { align-items: center; }
    .airport-dropdown-from .ey-column-xs-8 { flex: 1; }
    /* From field – Etihad-style typeahead (ey-* / rbt classes) */
    .ey-fsp-stat--card-field { flex: 1; min-width: 0; position: relative; }
    .ey-font__medium--xsmall.ey-text-subtle { font-size: 0.65rem; font-weight: 700; color: #64748b; margin-bottom: 0.15rem; }
    .ey-position--relative { position: relative; }
    .ey-ond__toggle--link { display: block; }
    .ey-typeahead--container-ond--fsp { width: 100%; }
    .origin-component.blured { width: 100%; }
    .shared-dropdown-comp.typeahead-dropdown { width: 100%; position: relative; }
    .etihad-field-from .rbt,
    .etihad-field-to .rbt { width: 100%; display: block; }
    .etihad-field-from .rbt-input-main,
    .etihad-field-from .rbt-input.form-item__field,
    .etihad-field-to .rbt-input-main,
    .etihad-field-to .rbt-input.form-item__field {
      width: 100%; min-height: 1.3rem; padding: 0.2rem 0; padding-left: 0;
      border: none; background: transparent !important; font-size: 0.95rem; line-height: 1.35;
      font-family: inherit; box-sizing: border-box; outline: none;
    }
    .etihad-field-from .ey-typeahead-input-wrap,
    .etihad-field-to .ey-typeahead-input-wrap { position: relative; width: 100%; }
    .etihad-field-from .rbt-input-hint,
    .etihad-field-to .rbt-input-hint {
      position: absolute; top: 0; left: 0; width: 100%;
      background: transparent; border: none; box-shadow: none;
      color: rgba(0,0,0,0.54); pointer-events: none;
      font-size: 0.82rem; font-weight: 500; height: 1.3rem; line-height: 1.35;
    }
    .etihad-field-from .ondMenu,
    .etihad-field-to .ondMenu { display: none; }
    .etihad-field-from .field-clear-btn,
    .etihad-field-to .field-clear-btn { position: absolute; right: 0.35rem; top: 50%; transform: translateY(-50%); z-index: 2; }
    /* From field – click-to-open panel (legacy, kept for popup) */
    .from-airport-panel {
      display: none; position: fixed !important; z-index: 1009999;
      box-sizing: border-box; overflow-y: auto; overflow-x: hidden;
      width: 380px; min-width: 320px; max-width: 420px; min-height: 120px;
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      padding: 1rem 1.25rem 1.25rem;
      pointer-events: auto;
    }
    .from-airport-panel.open { display: block !important; visibility: visible !important; }
    .from-airport-panel .from-panel-header {
      margin: 0 0 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb;
      font-size: 0.95rem; font-weight: 700; color: #1f2937;
    }
    .from-airport-panel .from-panel-list { max-height: 340px; overflow-y: auto; }
    .from-airport-panel .from-panel-row {
      display: flex; align-items: center; gap: 1rem;
      padding: 0.85rem 0;
      border-bottom: 1px solid #f3f4f6;
      cursor: pointer;
      transition: background 0.15s; box-sizing: border-box;
    }
    .from-airport-panel .from-panel-row:last-child { border-bottom: none; }
    .from-airport-panel .from-panel-row:hover { background: #f9fafb; }
    .from-airport-panel .from-panel-icon {
      flex-shrink: 0; width: 36px; height: 36px; min-width: 36px;
      display: flex; align-items: center; justify-content: center;
      background: linear-gradient(135deg, #d4b896 0%, #c4a574 50%, #a08060 100%);
      border-radius: 8px; color: #fff; font-size: 0.85rem;
      box-shadow: 0 1px 3px rgba(139, 115, 85, 0.25);
    }
    .from-airport-panel .from-panel-row:hover .from-panel-icon {
      background: linear-gradient(135deg, #c4a574 0%, #b89564 50%, #8b7355 100%);
    }
    .from-airport-panel .from-panel-content { flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 0.2rem; }
    .from-airport-panel .from-panel-city { font-size: 0.95rem; font-weight: 700; color: #1f2937; line-height: 1.35; }
    .from-airport-panel .from-panel-name { font-size: 0.82rem; color: #6b7280; font-weight: 400; line-height: 1.3; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .from-airport-panel .from-panel-code {
      flex-shrink: 0; font-size: 0.9rem; font-weight: 600; color: #374151;
      background: #f3f4f6; border: 1px solid #e5e7eb;
      padding: 0.35rem 0.65rem; border-radius: 8px; min-width: 3ch; text-align: center;
    }
    .from-airport-panel::-webkit-scrollbar { width: 8px; }
    .from-airport-panel::-webkit-scrollbar-track { background: #f9fafb; }
    .from-airport-panel::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
    .airport-dropdown-transparent::-webkit-scrollbar { width: 8px; }
    .airport-dropdown-transparent::-webkit-scrollbar-track { background: #f3f4f6; }
    .airport-dropdown-transparent::-webkit-scrollbar-thumb { background: #D4732B; border-radius: 4px; }
    .transparent-input-container .icon-right i { display: block; font-size: 1.2rem; }
    .transparent-input[readonly] { cursor: pointer; }
    .transparent-input[readonly] + label { cursor: pointer; }
    .transparent-input:focus + label, .transparent-input:not(:placeholder-shown) + label, .transparent-input:valid + label { opacity: 1; visibility: visible; transform: translateY(-50%); }
    /* Calendar fields - labels always visible and clear (for both home and popup) */
    .transparent-input[readonly].select-field + label,
    #transparent-depart-date-popup + label,
    #transparent-return-date-popup + label,
    #transparent-passengers-popup + label,
    #transparent-depart-date-home + label,
    #transparent-return-date-home-input + label,
    #transparent-passengers-home + label,
    #transparent-class-home-2 + label {
      opacity: 1 !important;
      visibility: visible !important;
      color: #1a202c !important;
      font-weight: 700 !important;
    }
    .transparent-search-field.return-date-disabled { opacity: 0.55; cursor: not-allowed; pointer-events: none; }
    
    /* Search area validation styles */
    .transparent-search-field.has-error,
    .transparent-search-field.invalid { border-radius: 8px; box-shadow: 0 0 0 2px #dc2626; }
    .transparent-search-field.has-error .transparent-input,
    .transparent-search-field.invalid .transparent-input { border-color: #dc2626 !important; background-color: #fef2f2 !important; }
    .transparent-search-field.has-error .transparent-input:focus,
    .transparent-search-field.invalid .transparent-input:focus { outline: none; box-shadow: 0 0 0 2px rgba(220,38,38,0.3); }
    .transparent-search-field .validation-error-msg { display: none; font-size: 0.75rem; color: #dc2626; font-weight: 600; margin-top: 0.35rem; padding-left: 0.25rem; width: 100%; order: 10; }
    .transparent-search-field.has-error,
    .transparent-search-field.invalid { flex-wrap: wrap; }
    .transparent-search-field.has-error .validation-error-msg,
    .transparent-search-field.invalid .validation-error-msg { display: block; }
    /* Etihad field validation – whole field container */
    .etihad-field.has-error,
    .etihad-field.invalid { border-color: #dc2626 !important; background-color: #fef2f2 !important; box-shadow: 0 0 0 2px rgba(220,38,38,0.25); }
    .etihad-field.has-error .etihad-field-icon,
    .etihad-field.invalid .etihad-field-icon { background: rgba(220,38,38,0.15) !important; color: #dc2626 !important; }
    .etihad-field-guests.has-error .etihad-field-icon,
    .etihad-field-guests.invalid .etihad-field-icon { background: rgba(220,38,38,0.15) !important; color: #dc2626 !important; }
    .flight-search-validation-alert-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: none; align-items: center; justify-content: center; z-index: 100001; padding: 1rem; backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); }
    .flight-search-validation-alert-overlay.visible { display: flex; animation: validationOverlayIn 0.2s ease; }
    @keyframes validationOverlayIn { from { opacity: 0; } to { opacity: 1; } }
    .flight-search-validation-alert { background: #fff; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.25); padding: 1.75rem 2rem; max-width: 420px; width: 100%; border: 1px solid #e5e7eb; animation: validationAlertIn 0.25s ease; }
    @keyframes validationAlertIn { from { opacity: 0; transform: scale(0.96) translateY(-8px); } to { opacity: 1; transform: scale(1) translateY(0); } }
    .flight-search-validation-alert-icon { width: 56px; height: 56px; margin: 0 auto 1.25rem; color: #dc2626; display: block; }
    .flight-search-validation-alert-title { font-size: 1.15rem; font-weight: 700; color: #1f2937; margin-bottom: 0.5rem; text-align: center; }
    .flight-search-validation-alert-msg { font-size: 0.95rem; color: #4b5563; text-align: center; line-height: 1.5; margin-bottom: 1.5rem; }
    .flight-search-validation-alert-ok { display: block; width: 100%; padding: 0.75rem 1.25rem; background: var(--primary-orange); color: #fff; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: background 0.2s, transform 0.2s; }
    .flight-search-validation-alert-ok:hover { background: var(--dark-orange); transform: translateY(-1px); }
    
    /* Home flight search – overlaid on banner, above Why Choose Travelian */
    .hero { position: relative;}
    .hero .page-hero.hero-banner { position: relative; padding-bottom: 1rem; }
    .hero .home-flight-search-wrap {
      position: absolute;
      top: 92%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 96%;
      max-width: 1300px;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      z-index: 10;
      scroll-margin-top: 100px;
      filter: drop-shadow(0 8px 24px rgba(0,0,0,0.12)) drop-shadow(0 4px 12px rgba(0,0,0,0.08));
    }
    .transparent-home-search {
      position: relative;
      top: auto;
      left: auto;
      transform: none;
      width: 100%;
      overflow: hidden;
      border-radius: 20px;
      border: 2px solid rgba(255,255,255,0.9);
      background: rgba(255,251,247,0.99);
      box-shadow: 0 12px 48px rgba(0,0,0,0.15), 0 0 0 1px rgba(0,0,0,0.04), inset 0 1px 0 rgba(255,255,255,0.8);
      padding-left: 0;
      padding-right: 0;
    }
    @media (max-width: 768px) {
      .hero .home-flight-search-wrap { width: 98%; top: 1rem; padding: 0; }
      .hero .page-hero.hero-banner { padding-bottom: 1rem; }
    }
    @media (max-width: 480px) {
      .hero .home-flight-search-wrap { width: 100%; top: 0.75rem; padding: 0; }
      .hero .page-hero.hero-banner { padding-bottom: 1rem; }
    }
    
    /* Why Choose Travelian – below hero/search, never overlaps */
    #home-middle-content {
      margin-top: 0;
      position: relative;
      z-index: 0;
    }
    #home-middle-content .why-choose-us-section {
      background: #fff;
      position: relative;
      z-index: 1;
    }
    
    /* Popup search styles - loaded from popup-search.html */
    .transparent-flight-search.popup-mode {
      position: fixed;
      top: 120px;
      left: 50%;
      transform: translateX(-50%);
      display: block;
    }
    
    /* Trip Type Radio Buttons for Popup */
    .transparent-trip-type-row {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      padding: 0.5rem 0;
    }
    .transparent-trip-type-option {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      color: #fff;
      user-select: none;
    }
    .transparent-trip-type-option input[type="radio"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: #D4732B;
      margin: 0;
    }
    .transparent-trip-type-option span {
      cursor: pointer;
      color: #fff;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .transparent-trip-type-option:hover {
      color: #fff;
    }
    .transparent-trip-type-option:hover span {
      color: #fff;
    }
    .transparent-trip-type-option input[type="radio"]:checked + span {
      color: #fff;
      font-weight: 800;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
    }
    
    /* Ensure all popup fields are same size and don't overlap */
    .transparent-flight-search.popup-mode .transparent-form-row {
      display: flex;
      flex-wrap: nowrap;
      align-items: stretch;
      gap: 0.5rem;
      width: 100%;
      margin-bottom: 1rem;
    }
    .transparent-flight-search.popup-mode .transparent-form-row:last-child {
      margin-bottom: 0;
    }
    .transparent-flight-search.popup-mode .transparent-search-field {
      flex: 1 1 0;
      min-width: 0;
      width: auto;
      position: relative;
    }
    .transparent-flight-search.popup-mode .transparent-input-container {
      width: 100%;
      flex: 1;
      min-width: 0;
      position: relative;
    }
    .transparent-flight-search.popup-mode .transparent-input {
      width: 100%;
      min-width: 0;
      box-sizing: border-box;
    }
    .transparent-flight-search.popup-mode .transparent-search-btn-container {
      flex: 1 1 0;
      min-width: 0;
      display: flex;
      align-items: stretch;
    }
    .transparent-flight-search.popup-mode .transparent-search-btn {
      width: 100%;
      min-height: 50px;
      box-sizing: border-box;
    }

    /* On medium/small screens, stack popup fields nicely */
    @media (max-width: 900px) {
      .transparent-flight-search.popup-mode {
        width: 95%;
        max-width: 100%;
      }
      .transparent-flight-search.popup-mode .transparent-form-row {
        flex-wrap: wrap;
      }
      .transparent-flight-search.popup-mode .transparent-form-row .transparent-search-field {
        flex: 1 1 100%;
      }
      .transparent-flight-search.popup-mode .transparent-form-row .transparent-search-btn-container {
        flex: 1 1 100%;
      }
    }
    .transparent-input[readonly] + label:not(.transparent-input[readonly].select-field + label) { opacity: 0 !important; visibility: hidden; }
    .transparent-input[readonly] { color: #333; }
    .transparent-search-btn-container { flex: 1 1 0; min-width: 0; }
    .transparent-search-btn { width: 100%; min-width: 0; padding: 1.2rem 2rem; border: none; background: linear-gradient(135deg, #F4881A 0%, #E87800 100%); color: #fff; font-size: 1.05rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; cursor: pointer; border-radius: 8px; white-space: nowrap; transition: all 0.2s; min-height: 50px; box-sizing: border-box; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); box-shadow: 0 3px 10px rgba(244,136,26,0.3); }
    .transparent-search-btn:hover { background: linear-gradient(135deg, #E87800 0%, #d86a00 100%); box-shadow: 0 6px 20px rgba(244,136,26,0.4); transform: translateY(-1px); }
    
    /* Transparent Passengers Dropdown Styles */
    .transparent-passengers-dropdown {
      position: fixed !important;
      width: 280px;
      min-height: 180px;
      background: #fff;
      border: 1px solid rgba(229, 231, 235, 0.95);
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
      z-index: 10001;
      padding: 1rem 1.25rem;
      display: none;
      pointer-events: auto;
    }
    /* Combined Guests + Cabin dropdown - two-column layout */
    .guests-cabin-dropdown {
      width: 420px;
      min-width: 380px;
      padding: 1.25rem 1.5rem;
    }
    .guests-cabin-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }
    .guests-cabin-heading {
      margin: 0 0 0.75rem;
      font-size: 0.9rem;
      font-weight: 700;
      color: #1f2937;
    }
    .guests-section .transparent-passengers-row {
      padding: 0.6rem 0;
    }
    .cabin-radio-wrap {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .cabin-radio-option {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.6rem;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 500;
      color: #374151;
    }
    .cabin-radio-option input {
      width: 18px;
      height: 18px;
      accent-color: #D4732B;
      cursor: pointer;
    }
    .rewards-section {
      margin-top: 1.25rem;
      padding-top: 1rem;
      border-top: 1px solid #e5e7eb;
    }
    .promo-input {
      width: 100%;
      padding: 0.6rem 0.75rem;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 0.9rem;
      color: #374151;
      box-sizing: border-box;
    }
    .promo-input::placeholder {
      color: #9ca3af;
    }
    /* Class dropdown - narrower width (hidden when using combined) */
    #transparent-class-dropdown-home-2 {
      width: 150px;
      min-height: auto;
      padding: 0.75rem 0;
    }
    /* Center text in class dropdown */
    #transparent-class-dropdown-home-2 .transparent-passengers-label-wrap {
      text-align: center;
      width: 100%;
    }
    #transparent-class-dropdown-home-2 .transparent-passengers-label {
      text-align: center;
      width: 100%;
      margin-bottom: 0;
    }
    .transparent-passengers-dropdown.open {
      display: block !important;
    }
    .transparent-passengers-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 0;
      border-bottom: 1px solid #f3f4f6;
    }
    .transparent-passengers-row:last-child {
      border-bottom: none;
    }
    /* Class dropdown rows - clickable without controls */
    #transparent-class-dropdown-home-2 .transparent-passengers-row {
      cursor: pointer;
      transition: background 0.2s;
    }
    #transparent-class-dropdown-home-2 .transparent-passengers-row:hover {
      background: #f9fafb;
    }
    #transparent-class-dropdown-home-2 .transparent-passengers-controls {
      display: none;
    }
    .transparent-passengers-label-wrap {
      flex: 1;
      min-width: 0;
    }
    .transparent-passengers-label {
      display: block;
      font-size: 0.95rem;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.15rem;
    }
    .transparent-passengers-sublabel {
      display: block;
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 0.15rem;
    }
    .transparent-passengers-controls {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-shrink: 0;
    }
    .transparent-passengers-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid #d1d5db;
      background: #f3f4f6;
      color: #374151;
      font-size: 1.1rem;
      line-height: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      transition: background 0.15s, border-color 0.15s, color 0.15s;
      pointer-events: auto;
    }
    .transparent-passengers-btn:hover:not(:disabled) {
      background: #e5e7eb;
      border-color: #9ca3af;
      color: #1f2937;
    }
    .transparent-passengers-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .transparent-passengers-minus {
      background: rgba(140, 198, 63, 0.15);
      border-color: rgba(140, 198, 63, 0.4);
      color: #8CC63F;
    }
    .transparent-passengers-minus:hover:not(:disabled) {
      background: rgba(140, 198, 63, 0.25);
      border-color: #8CC63F;
      color: #6ba82a;
    }
    .transparent-passengers-plus {
      background: rgba(140, 198, 63, 0.3);
      border-color: rgba(140, 198, 63, 0.5);
      color: #6ba82a;
    }
    .transparent-passengers-plus:hover:not(:disabled) {
      background: rgba(140, 198, 63, 0.4);
      border-color: #6ba82a;
      color: #5a8a1f;
    }
    .transparent-passengers-count {
      font-size: 0.95rem;
      font-weight: 600;
      color: #374151;
      min-width: 1.5rem;
      text-align: center;
    }
    @media (max-width: 768px) {
      .transparent-flight-search { padding-right: 15px; padding-left: 15px; top: 50%; transform: translate(-50%, -50%); border-radius: 12px; }
      .transparent-search-tabs { flex-wrap: wrap; border-radius: 12px 12px 0 0; }
      .transparent-search-content { border-radius: 0 0 12px 12px; }
      .transparent-tab { padding: 0.6rem 1rem; font-size: 0.8rem; }
      .transparent-search-form { flex-direction: column; gap: 0.5rem; }
      .transparent-search-btn { width: 100%; }
    }
    @media (max-width:768px) {
      .header-nav-right { border-top: 1px solid #e5e7eb !important; }
      .header-nav-right .nav-menu a { border-bottom: 1px solid #e5e7eb !important; }
    }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var transparentSearch = document.querySelector('.transparent-flight-search');
      // Auto-scroll for clear view of dropdown when user interacts with search
      (function initSearchAreaScroll() {
        var searchWrap = document.querySelector('.hero .home-flight-search-wrap');
        if (!searchWrap) return;
        var headerOffset = 100;
        var dropdownSpace = 420;
        function scrollForDropdownView() {
          var rect = searchWrap.getBoundingClientRect();
          if (rect.top < headerOffset) {
            var scrollTop = window.scrollY + rect.top - headerOffset;
            window.scrollTo({ top: Math.max(0, scrollTop), behavior: 'smooth' });
          } else if (rect.bottom + dropdownSpace > window.innerHeight) {
            var scrollBy = rect.bottom + dropdownSpace - window.innerHeight;
            window.scrollTo({ top: window.scrollY + scrollBy, behavior: 'smooth' });
          }
        }
        function onFieldFocus() {
          scrollForDropdownView();
          setTimeout(scrollForDropdownView, 180);
        }
        var fields = [
          'transparent-txtOriginFull-home', 'transparent-txtDestinationFull-home',
          'transparent-passengers-home', 'transparent-depart-date-home'
        ];
        fields.forEach(function(id) {
          var el = document.getElementById(id);
          if (el) {
            el.addEventListener('focus', onFieldFocus);
            el.addEventListener('click', onFieldFocus);
          }
        });
        document.querySelectorAll('.hero .etihad-field-dates label, .hero .etihad-field-from label, .hero .etihad-field-to label, .hero .etihad-field-guests label').forEach(function(lab) {
          lab.addEventListener('click', function() { setTimeout(onFieldFocus, 50); });
        });
      })();

      // Tab switching functionality
      if (transparentSearch) {
        const tabCols = transparentSearch.querySelectorAll('.transparent-tab-col');
        const tabContents = transparentSearch.querySelectorAll('.transparent-tab-content');
        
        tabCols.forEach(tabCol => {
          const tabLink = tabCol.querySelector('.transparent-tab-link');
          if (tabLink) {
            tabLink.addEventListener('click', function(e) {
              if (tabCol.getAttribute('data-disabled') === 'true') {
                e.preventDefault();
                return;
              }
              e.preventDefault();
              const targetTab = this.getAttribute('href');
              
              // Remove active class from all tabs and contents
              tabCols.forEach(col => col.classList.remove('active'));
              tabContents.forEach(content => {
                content.classList.remove('active');
                content.style.display = 'none';
              });
              
              // Add active class to clicked tab
              tabCol.classList.add('active');
              
              // Show corresponding content
              const targetContent = transparentSearch.querySelector(targetTab);
              if (targetContent) {
                targetContent.classList.add('active');
                targetContent.style.display = 'block';
              }
            });
          }
        });
      }
      
      // Popup functionality for From field (HOME PAGE)
      const fromInput = document.getElementById('transparent-txtOriginFull-home');
      let popupLoaded = false;
      let searchModal = null;
      let searchOverlay = null;
      let searchClose = null;
      
      function loadPopupSearch() {
        if (popupLoaded) return Promise.resolve();
        
        return fetch('/src/pages/popup-search.html')
          .then(response => response.text())
          .then(html => {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html.trim();
            
            // Get overlay and modal from the loaded HTML
            const overlay = tempDiv.querySelector('.transparent-flight-search-overlay');
            const modal = tempDiv.querySelector('.transparent-flight-search');
            
            if (overlay) {
              document.body.appendChild(overlay);
            }
            if (modal) {
              document.body.appendChild(modal);
            }
            
            searchModal = document.getElementById('transparent-flight-search-modal');
            searchOverlay = document.getElementById('transparent-search-overlay');
            searchClose = document.getElementById('transparent-search-close');
            
            popupLoaded = true;
            
            // Initialize popup event listeners
            if (searchClose) {
              searchClose.addEventListener('click', closePopup);
            }
            if (searchOverlay) {
              searchOverlay.addEventListener('click', closePopup);
            }
            
            // Load popup JavaScript
            const script = document.createElement('script');
            script.src = '/src/pages/popup-search.js';
            script.onload = function() {
              setTimeout(function() {
                if (typeof initPopupFunctionality === 'function') {
                  initPopupFunctionality();
                }
              }, 100);
            };
            document.head.appendChild(script);
          })
          .catch(function() {});
      }
      
      function openPopup() {
        loadPopupSearch().then(() => {
          if (searchOverlay && searchModal) {
            searchOverlay.classList.add('active');
            searchModal.classList.add('popup-mode');
            searchModal.classList.add('active');
            document.body.style.overflow = 'hidden';
          }
        });
      }
      
      function closePopup() {
        if (searchOverlay && searchModal) {
          searchOverlay.classList.remove('active');
          searchModal.classList.remove('popup-mode');
          searchModal.classList.remove('active');
          document.body.style.overflow = '';
        }
      }
      
      if (fromInput) {
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && searchModal && searchModal.classList.contains('popup-mode')) {
            closePopup();
          }
        });
      }
      
      // Airport autocomplete + auto-advance for From/To
      (function initTransparentAirportAutocomplete() {
        function run() {
          if (typeof window.setupAirportAutocomplete !== 'function') return;
          var fromInput = document.getElementById('transparent-txtOriginFull-home');
          var toInput = document.getElementById('transparent-txtDestinationFull-home');
          if (!fromInput || !toInput) return;
          window.setupAirportAutocomplete(fromInput, 'transparent-origin-home', 'from');
          window.setupAirportAutocomplete(toInput, 'transparent-destination-home', 'to');
          fromInput.addEventListener('change', function() {
            if ((fromInput.value || '').trim() && toInput) setTimeout(function() { toInput.focus(); }, 80);
          });
          toInput.addEventListener('change', function() {
            if ((toInput.value || '').trim() && typeof window.openTravelDatePicker === 'function') setTimeout(function() { window.openTravelDatePicker(); }, 120);
          });
        }
        if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', run);
        else run();
        window.addEventListener('load', run);
        // Clear buttons for From and To
        (function initFieldClearBtns() {
          var fromInp = document.getElementById('transparent-txtOriginFull-home');
          var toInp = document.getElementById('transparent-txtDestinationFull-home');
          var clearFrom = document.getElementById('clear-from-home');
          var clearTo = document.getElementById('clear-to-home');
          var origHidden = document.getElementById('transparent-origin-home');
          var destHidden = document.getElementById('transparent-destination-home');
          function toggleClear(btn, hasVal) { if (btn) btn.style.display = hasVal ? '' : 'none'; }
          function updateFromClear() { toggleClear(clearFrom, (fromInp && fromInp.value || '').trim()); }
          function updateToClear() { toggleClear(clearTo, (toInp && toInp.value || '').trim()); }
          if (fromInp) {
            fromInp.addEventListener('input', updateFromClear);
            fromInp.addEventListener('change', updateFromClear);
          }
          if (toInp) {
            toInp.addEventListener('input', updateToClear);
            toInp.addEventListener('change', updateToClear);
          }
          if (clearFrom) {
            clearFrom.addEventListener('click', function(e) {
              e.preventDefault();
              if (fromInp) { fromInp.value = ''; fromInp.focus(); updateFromClear(); }
              if (origHidden) origHidden.value = '';
            });
          }
          if (clearTo) {
            clearTo.addEventListener('click', function(e) {
              e.preventDefault();
              if (toInp) { toInp.value = ''; toInp.focus(); updateToClear(); }
              if (destHidden) destHidden.value = '';
            });
          }
          updateFromClear();
          updateToClear();
        })();
      })();
      // Field order validation: click To without From → show From; click Date without From/To → show From or To
      (function initFieldOrderValidation() {
        var fromInput = document.getElementById('transparent-txtOriginFull-home');
        var toInput = document.getElementById('transparent-txtDestinationFull-home');
        var departDateInput = document.getElementById('transparent-depart-date-home');
        if (!fromInput || !toInput || !departDateInput) return;
        function getOriginCode() {
          var v = (fromInput && fromInput.value) || (document.getElementById('from') && document.getElementById('from').value) || '';
          if (!v) return '';
          var m = v.match(/\(([A-Z]{3})\)/) || v.match(/,\s*([A-Z]{3})\s*$/);
          return m ? m[1] : (v.length === 3 ? v : '');
        }
        function getDestCode() {
          var v = (toInput && toInput.value) || (document.getElementById('to') && document.getElementById('to').value) || '';
          if (!v) return '';
          var m = v.match(/\(([A-Z]{3})\)/) || v.match(/,\s*([A-Z]{3})\s*$/);
          return m ? m[1] : (v.length === 3 ? v : '');
        }
        if (toInput) {
          toInput.addEventListener('mousedown', function(e) {
            if (!getOriginCode()) {
              e.preventDefault();
              e.stopPropagation();
              if (typeof showValidationError === 'function') {
                showValidationError('Please select a departure airport first.', ['transparent-txtOriginFull-home']);
              }
              fromInput.focus();
            }
          }, true);
          toInput.addEventListener('focus', function() {
            if (!getOriginCode()) {
              toInput.blur();
              if (typeof showValidationError === 'function') {
                showValidationError('Please select a departure airport first.', ['transparent-txtOriginFull-home']);
              }
              fromInput.focus();
            }
          }, true);
        }
        function requireFromAndToBeforeDate() {
          if (!getOriginCode()) {
            if (typeof showValidationError === 'function') {
              showValidationError('Please select a departure airport first.', ['transparent-txtOriginFull-home']);
            }
            fromInput.focus();
            return false;
          }
          if (!getDestCode()) {
            if (typeof showValidationError === 'function') {
              showValidationError('Please select an arrival airport first.', ['transparent-txtDestinationFull-home']);
            }
            toInput.focus();
            return false;
          }
          return true;
        }
        departDateInput.addEventListener('mousedown', function(e) {
          if (!requireFromAndToBeforeDate()) {
            e.preventDefault();
            e.stopPropagation();
          }
        }, true);
        departDateInput.addEventListener('focus', function() {
          if (!requireFromAndToBeforeDate()) departDateInput.blur();
        }, true);
      })();
      // Transparent form submit: sync to main form and trigger flight search (international flow)
      (function initTransparentFormSubmit() {
        var transparentForm = document.getElementById('transparent-search-form-home');
        var mainForm = document.getElementById('flight-search-form');
        if (!transparentForm || !mainForm) return;
        transparentForm.addEventListener('submit', function(e) {
          e.preventDefault();
          var fromDisplay = (document.getElementById('transparent-txtOriginFull-home') || {}).value || '';
          var toDisplay = (document.getElementById('transparent-txtDestinationFull-home') || {}).value || '';
          var origHidden = document.getElementById('transparent-origin-home');
          var destHidden = document.getElementById('transparent-destination-home');
          var fromVal = fromDisplay.trim() || (origHidden && origHidden.value ? origHidden.value : '');
          var toVal = toDisplay.trim() || (destHidden && destHidden.value ? destHidden.value : '');
          var fromMain = document.getElementById('from');
          var toMain = document.getElementById('to');
          if (fromMain) fromMain.value = fromVal;
          if (toMain) toMain.value = toVal;
          var fromHero = document.getElementById('from-hero');
          var toHero = document.getElementById('to-hero');
          if (fromHero) fromHero.value = fromVal;
          if (toHero) toHero.value = toVal;
          var tripHome = document.querySelector('input[name="trip-home"]:checked');
          var tripVal = tripHome && tripHome.value !== 'multicity' ? tripHome.value : 'oneway';
          var tripMain = document.querySelector('input[name="trip"][value="' + tripVal + '"]');
          if (tripMain) { tripMain.checked = true; tripMain.dispatchEvent(new Event('change', { bubbles: true })); }
          var cabinField = document.getElementById('transparent-class-home-2');
          var classSelect = document.getElementById('class');
          if (cabinField && classSelect) {
            var cabinToClass = { Economy: 'Economy Class', 'Premium Economy': 'Premium Economy', Business: 'Business Class', First: 'First Class' };
            classSelect.value = cabinToClass[cabinField.value] || 'Economy Class';
          }
          mainForm.requestSubmit();
        });
      })();
      // Swap From/To (Etihad-style)
      (function initEtihadSwap() {
        var swapBtn = document.getElementById('etihad-swap-origin-dest');
        var fromInput = document.getElementById('transparent-txtOriginFull-home');
        var toInput = document.getElementById('transparent-txtDestinationFull-home');
        var fromMain = document.getElementById('from');
        var toMain = document.getElementById('to');
        if (!swapBtn || !fromInput || !toInput) return;
        swapBtn.addEventListener('click', function(e) {
          e.preventDefault();
          var tmp = fromInput.value;
          fromInput.value = toInput.value;
          toInput.value = tmp;
          if (fromMain) fromMain.value = fromInput.value;
          if (toMain) toMain.value = toInput.value;
          var origHidden = document.getElementById('transparent-origin-home');
          var destHidden = document.getElementById('transparent-destination-home');
          if (origHidden && destHidden) {
            tmp = origHidden.value;
            origHidden.value = destHidden.value;
            destHidden.value = tmp;
          }
        });
      })();
      // Airport dropdown functionality
    });
  </script>
</head>
<body>
  <div class="container">
    <!-- MAIN NAVIGATION -->
    <header class="main-header">
      <a href="/" class="brand brand-link" aria-label="Go to home">
        <div class="logo-wrapper">
          <img src="/src/assets/images/Travelian%20logo.png" alt="Travelian – Travel, Tours & Beyond" class="brand-logo" />
        </div>
        <div class="brand-logo-design">
          <div class="logo-icon">
            <img src="/src/assets/images/plane.png" alt="Travelian plane icon" class="plane-icon-img" />
          </div>
          <div class="logo-text-container">
            <div class="logo-main-text"><span class="logo-travel">TRAVEL</span><span class="logo-ian">IAN</span></div>
            <div class="logo-sub-text">TRAVEL, TOURS & BEYOND</div>
          </div>
        </div>
      </a>
      <button type="button" class="nav-toggle" id="nav-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="nav-menu">
        <span class="nav-toggle-bar"></span>
        <span class="nav-toggle-bar"></span>
        <span class="nav-toggle-bar"></span>
      </button>
      <div class="header-nav-right" id="nav-menu">
        <nav class="nav-menu">
          <a href="/" class="active">Home</a>
          <a href="/src/pages/umrah-packages.html">Umrah Packages</a>
          <a href="/src/pages/visit-visa.html">Visit Visa</a>
          <a href="/src/pages/study-visa.html">Study Visa</a>
          <a href="/src/pages/hotel-bookings.html">Hotel Bookings</a>
          <a href="/src/pages/travel-insurance.html">Travel Insurance</a>
          <a href="/src/pages/about.html">About Us</a>
          <a href="/src/pages/contact-us.html">Contact Us</a>
          <a href="#" class="agent-login-btn nav-agent-btn">Agent Portal</a>
        </nav>
      </div>
    </header>

    <div id="home-content">
    <!-- HERO SECTION (search bar on top of plane image) -->
    <main class="hero">
      <div class="hero-social-top">
        <a href="https://wa.me/923244440014" target="_blank" rel="noopener noreferrer" title="WhatsApp - +92 324 4440014"><i class="fa-brands fa-whatsapp"></i></a>
        <a href="https://www.facebook.com/Travelian.pk/" target="_blank" rel="noopener noreferrer" title="Facebook"><i class="fa-brands fa-square-facebook"></i></a>
        <a href="https://www.instagram.com/travelian.pk/" target="_blank" rel="noopener noreferrer" title="Instagram"><i class="fa-brands fa-instagram"></i></a>
        <a href="mailto:travelian.pk@gmail.com" title="Email - travelian.pk@gmail.com"><i class="fa-brands fa-google"></i></a>
      </div>
      <!-- BANNER IMAGE – search overlays bottom -->
      <section class="page-hero hero-banner" aria-label="Hero banner">
        <div class="page-hero__bg">
          <picture><source type="image/webp" srcset="/src/assets/images/Homepagebanner.webp?v=2" /><img src="/src/assets/images/Homepagebanner-opt.jpg?v=2" alt="Travelian travel banner – flights, tours and beyond" width="1920" height="600" loading="eager" decoding="async" /></picture>
        </div>
        <div class="page-hero__overlay"></div>
        <div class="page-hero__content">
        </div>
      </section>
      <!-- FLIGHT SEARCH – overlaid on banner (outside page-hero so not cut off) -->
      <section class="home-flight-search-wrap">
        <section class="transparent-flight-search transparent-home-search" aria-label="Flight search">
      <div class="transparent-search-tabs">
        <div class="transparent-tab-row">
          <div class="transparent-tab-col active" data-tab="flight">
            <a href="#flights-home" class="transparent-tab-link">
              <span class="icon plane"><i class="fa-solid fa-plane"></i></span>
              Book Flights
            </a>
          </div>
          <div class="transparent-tab-col tab-disabled" data-tab="groupticketing" data-disabled="true" title="Coming soon">
            <span class="transparent-tab-link">
              <span class="icon plane"><i class="fa-solid fa-plane"></i></span>
              Group Ticketing
            </span>
          </div>
          <div class="transparent-tab-col tab-disabled" data-tab="hotels" data-disabled="true" title="Coming soon">
            <span class="transparent-tab-link">
              <span class="icon hotel"><i class="fa-solid fa-hotel"></i></span>
              HOTEL BOOKING
            </span>
          </div>
          <div class="transparent-tab-col tab-disabled" data-tab="insurance" data-disabled="true" title="Coming soon">
            <span class="transparent-tab-link">
              <span class="icon insurance"><i class="fa-solid fa-shield-halved"></i></span>
              Buy Travel Insurance
            </span>
          </div>
        </div>
      </div>
      <div class="transparent-search-content">
        <!-- BOOK A FLIGHT Tab Content (Etihad-style hero) -->
        <div id="flights-home" class="transparent-tab-content active etihad-hero-form">
          <form id="transparent-search-form-home" class="etihad-search-form">
            <input type="hidden" id="transparent-origin-home" name="origin" autocomplete="off">
            <input type="hidden" id="transparent-destination-home" name="destination" autocomplete="off">
            <datalist id="airports-datalist"><option value="Karachi, KHI"><option value="Lahore, LHE"><option value="Islamabad, ISB"><option value="Dubai, DXB"><option value="Abu Dhabi, AUH"><option value="London, LHR"><option value="Paris, CDG"><option value="Frankfurt, FRA"><option value="Doha, DOH"><option value="Istanbul, IST"><option value="Jeddah, JED"><option value="Singapore, SIN"><option value="Kuala Lumpur, KUL"><option value="Bangkok, BKK"></datalist>
            <div class="etihad-pill-row">
              <label class="etihad-pill-option">
                <input type="radio" name="trip-home" value="oneway" id="trip-oneway-home" checked>
                <span>One-way</span>
              </label>
              <label class="etihad-pill-option">
                <input type="radio" name="trip-home" value="return" id="trip-return-home">
                <span>Round trip</span>
              </label>
              <label class="etihad-pill-option" title="Coming soon">
                <input type="radio" name="trip-home" value="multicity" id="trip-multicity-home" disabled>
                <span>Multi-city</span>
              </label>
            </div>
            <div class="etihad-fields-row">
              <div class="etihad-field etihad-field-from">
                <span class="etihad-field-icon etihad-icon-grey"><i class="fa-solid fa-plane-departure"></i></span>
                <div id="originContainer" class="ey-fsp-stat--card-field etihad-field-inner transparent-input-container transparent-search-field">
                  <div class="ey-font__medium--xsmall ey-text-subtle ey-position--relative">
                    <label for="transparent-txtOriginFull-home" class="ey-ond__toggle--link ey-display--block">From</label>
                  </div>
                  <div class="ey-typeahead--container-ond--fsp" role="tab" tabindex="0">
                    <div class="origin-component blured">
                      <div class="shared-dropdown-comp typeahead-dropdown">
                        <div class="rbt" tabindex="-1" style="outline: none; position: relative;">
                          <div class="ey-typeahead-input-wrap" style="display: flex; flex: 1 1 0%; height: 100%; position: relative;">
                            <input autocomplete="off" placeholder="Origin" type="text" role="combobox" id="transparent-txtOriginFull-home" aria-autocomplete="both" aria-haspopup="listbox" aria-expanded="false" class="rbt-input-main form-control rbt-input form-item__field transparent-input" name="txtOriginFull" value="">
                            <input aria-hidden="true" class="rbt-input-hint" readonly tabindex="-1" value="" style="background-color: transparent; border-color: transparent; box-shadow: none; color: rgba(0, 0, 0, 0.54); left: 0; pointer-events: none; position: absolute; top: 0; width: 100%; border: none; font-size: 14px; font-weight: 500; height: 20px; line-height: 20px; margin: 0; padding: 0;">
                          </div>
                          <div id="from-ondMenu" class="ondMenu" role="listbox" aria-label="Airport results"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <button type="button" class="field-clear-btn" id="clear-from-home" aria-label="Clear" title="Clear" style="display:none"><i class="fa-solid fa-xmark"></i></button>
                  <span class="validation-error-msg" role="alert"></span>
                </div>
              </div>
              <button type="button" class="etihad-swap-btn" id="etihad-swap-origin-dest" aria-label="Swap From and To"><i class="fa-solid fa-right-left"></i></button>
              <div class="etihad-field etihad-field-to">
                <span class="etihad-field-icon etihad-icon-grey"><i class="fa-solid fa-plane-arrival"></i></span>
                <div id="destContainer" class="ey-fsp-stat--card-field etihad-field-inner transparent-input-container transparent-search-field">
                  <div class="ey-font__medium--xsmall ey-text-subtle ey-position--relative">
                    <label for="transparent-txtDestinationFull-home" class="ey-ond__toggle--link ey-display--block">To</label>
                  </div>
                  <div class="ey-typeahead--container-ond--fsp" role="tab" tabindex="0">
                    <div class="origin-component blured">
                      <div class="shared-dropdown-comp typeahead-dropdown">
                        <div class="rbt" tabindex="-1" style="outline: none; position: relative;">
                          <div class="ey-typeahead-input-wrap" style="display: flex; flex: 1 1 0%; height: 100%; position: relative;">
                            <input autocomplete="off" placeholder="Destination" type="text" role="combobox" id="transparent-txtDestinationFull-home" aria-autocomplete="both" aria-haspopup="listbox" aria-expanded="false" class="rbt-input-main form-control rbt-input form-item__field transparent-input" name="txtDestinationFull" value="">
                            <input aria-hidden="true" class="rbt-input-hint" readonly tabindex="-1" value="" style="background-color: transparent; border-color: transparent; box-shadow: none; color: rgba(0, 0, 0, 0.54); left: 0; pointer-events: none; position: absolute; top: 0; width: 100%; border: none; font-size: 14px; font-weight: 500; height: 20px; line-height: 20px; margin: 0; padding: 0;">
                          </div>
                          <div id="to-ondMenu" class="ondMenu" role="listbox" aria-label="Airport results"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <button type="button" class="field-clear-btn" id="clear-to-home" aria-label="Clear" title="Clear" style="display:none"><i class="fa-solid fa-xmark"></i></button>
                  <span class="validation-error-msg" role="alert"></span>
                </div>
              </div>
              <div class="etihad-field etihad-field-dates">
                <span class="etihad-field-icon etihad-icon-grey"><i class="fa-solid fa-calendar-days"></i></span>
                <div class="etihad-field-inner transparent-input-container transparent-search-field">
                  <label for="transparent-depart-date-home"><span class="label">Travel Date</span></label>
                  <input id="transparent-depart-date-home" type="text" class="transparent-input select-field etihad-input" placeholder="Departure – Return" name="departDate" autocomplete="off" readonly>
                  <input type="hidden" id="transparent-return-date-home-input" name="returnDate" autocomplete="off">
                  <span class="validation-error-msg" role="alert"></span>
                </div>
              </div>
              <div class="etihad-field etihad-field-guests">
                <span class="etihad-field-icon etihad-icon-gold"><i class="fa-solid fa-user-group"></i></span>
                <div class="etihad-field-inner transparent-input-container transparent-search-field">
                  <label for="transparent-passengers-home"><span class="label">Passengers & Cabin</span></label>
                  <input id="transparent-passengers-home" type="text" class="transparent-input select-field etihad-input" placeholder="1 Passenger, Economy" name="passengers" value="" autocomplete="off" readonly>
                  <span class="validation-error-msg" role="alert"></span>
                </div>
              </div>
              <div class="etihad-search-btn-wrap">
                <button type="submit" class="etihad-search-btn" id="hero-search-btn">Search</button>
              </div>
            </div>
          </form>
          <div id="transparent-class-home-2-hidden-wrap" style="display:none;"><input id="transparent-class-home-2" type="hidden" name="class2" value="Economy"></div>
        </div>
        <!-- HOTEL BOOKINGS Tab Content -->
        <div id="booking-search-home" class="transparent-tab-content" style="display:none;">
          <form id="transparent-hotels-form-home">
            <input type="hidden" id="transparent-booking-origin-home" name="booking-origin" autocomplete="off">
            <div class="transparent-compact-search">
              <div class="transparent-form-row">
                <div class="transparent-search-field transparent-input-container">
                  <input id="transparent-txtBookingOriginFull-home" type="text" class="transparent-input select-field" placeholder="" name="txtBookingOriginFull" autocomplete="off">
                  <label for="transparent-txtBookingOriginFull-home">
                    <span class="label">Where?</span>
                  </label>
                  <span class="icon-right"><i class="fa-solid fa-list"></i></span>
                </div>
                <div class="transparent-search-field transparent-input-container">
                  <input id="transparent-hotel-checkin-home" type="text" class="transparent-input" placeholder="" name="checkin" autocomplete="off" readonly>
                  <label for="transparent-hotel-checkin-home">
                    <span class="label">Checkin</span>
                  </label>
                  <span class="icon-right"><i class="fa-solid fa-calendar"></i></span>
                </div>
                <div class="transparent-search-field transparent-input-container">
                  <input id="transparent-hotel-checkout-home" type="text" class="transparent-input" placeholder="" name="checkout" autocomplete="off" readonly>
                  <label for="transparent-hotel-checkout-home">
                    <span class="label">Checkout</span>
                  </label>
                  <span class="icon-right"><i class="fa-solid fa-calendar"></i></span>
                </div>
                <div class="transparent-search-field transparent-input-container">
                  <input id="transparent-hotel-passengers-home" type="text" class="transparent-input" placeholder="" name="passengers" value="1 Adult" autocomplete="off" readonly>
                  <label for="transparent-hotel-passengers-home">
                    <span class="label">1 Adult</span>
                  </label>
                  <span class="icon-right"><i class="fa-solid fa-chevron-down"></i></span>
                </div>
                <div class="transparent-search-field transparent-search-btn-container">
                  <button type="submit" class="transparent-search-btn">SEARCH</button>
                </div>
              </div>
            </div>
          </form>
        </div>
        <!-- TRAVEL INSURANCE Tab Content -->
        <div id="travel-insurance-home" class="transparent-tab-content" style="display:none;">
          <form id="transparent-insurance-form-home">
            <div class="transparent-compact-search">
              <div class="transparent-form-row">
                <div class="transparent-search-field transparent-input-container">
                  <input id="transparent-insurance-from-home" type="text" class="transparent-input select-field" placeholder="" name="from" autocomplete="off">
                  <label for="transparent-insurance-from-home">
                    <span class="label">From</span>
                  </label>
                  <span class="icon-right"><i class="fa-solid fa-list"></i></span>
                </div>
                <div class="transparent-search-field transparent-input-container">
                  <input id="transparent-insurance-to-home" type="text" class="transparent-input select-field" placeholder="" name="to" autocomplete="off">
                  <label for="transparent-insurance-to-home">
                    <span class="label">To</span>
                  </label>
                  <span class="icon-right"><i class="fa-solid fa-list"></i></span>
                </div>
                <div class="transparent-search-field transparent-input-container">
                  <input id="transparent-insurance-departure-home" type="text" class="transparent-input" placeholder="" name="departure" autocomplete="off" readonly>
                  <label for="transparent-insurance-departure-home">
                    <span class="label">Departure Date</span>
                  </label>
                  <span class="icon-right"><i class="fa-solid fa-calendar"></i></span>
                </div>
                <div class="transparent-search-field transparent-input-container">
                  <input id="transparent-insurance-return-home" type="text" class="transparent-input" placeholder="" name="return" autocomplete="off" readonly>
                  <label for="transparent-insurance-return-home">
                    <span class="label">Return Date</span>
                  </label>
                  <span class="icon-right"><i class="fa-solid fa-calendar"></i></span>
                </div>
                <div class="transparent-search-field transparent-search-btn-container">
                  <button type="submit" class="transparent-search-btn">SEARCH</button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>
      </section>
    </main>

<!-- Combined Guests + Cabin Dropdown for Home Form -->
<div id="transparent-passengers-dropdown-home" class="transparent-passengers-dropdown guests-cabin-dropdown" role="dialog">
  <div class="guests-cabin-grid">
    <div class="guests-cabin-col guests-section">
      <h4 class="guests-cabin-heading">Passengers</h4>
      <div class="transparent-passengers-row" data-type="adult">
        <div class="transparent-passengers-label-wrap">
          <span class="transparent-passengers-label">Adults</span>
          <span class="transparent-passengers-sublabel">Age 12+</span>
        </div>
        <div class="transparent-passengers-controls">
          <button type="button" class="transparent-passengers-btn transparent-passengers-minus" id="pax-adult-minus-home" aria-label="Decrease adults">−</button>
          <span class="transparent-passengers-count" id="pax-adult-val-home">1</span>
          <button type="button" class="transparent-passengers-btn transparent-passengers-plus" id="pax-adult-plus-home" aria-label="Increase adults">+</button>
        </div>
      </div>
      <div class="transparent-passengers-row" data-type="child">
        <div class="transparent-passengers-label-wrap">
          <span class="transparent-passengers-label">Children</span>
          <span class="transparent-passengers-sublabel">Age 2 - 11 years</span>
        </div>
        <div class="transparent-passengers-controls">
          <button type="button" class="transparent-passengers-btn transparent-passengers-minus" id="pax-child-minus-home" aria-label="Decrease children">−</button>
          <span class="transparent-passengers-count" id="pax-child-val-home">0</span>
          <button type="button" class="transparent-passengers-btn transparent-passengers-plus" id="pax-child-plus-home" aria-label="Increase children">+</button>
        </div>
      </div>
      <div class="transparent-passengers-row" data-type="infant">
        <div class="transparent-passengers-label-wrap">
          <span class="transparent-passengers-label">Infants</span>
          <span class="transparent-passengers-sublabel">Under 2 years</span>
        </div>
        <div class="transparent-passengers-controls">
          <button type="button" class="transparent-passengers-btn transparent-passengers-minus" id="pax-infant-minus-home" aria-label="Decrease infants">−</button>
          <span class="transparent-passengers-count" id="pax-infant-val-home">0</span>
          <button type="button" class="transparent-passengers-btn transparent-passengers-plus" id="pax-infant-plus-home" aria-label="Increase infants">+</button>
        </div>
      </div>
    </div>
    <div class="guests-cabin-col cabin-section">
      <h4 class="guests-cabin-heading">Cabin</h4>
      <div class="cabin-radio-wrap">
        <label class="cabin-radio-option">
          <span>Economy</span>
          <input type="radio" name="cabin-home" value="Economy" checked>
        </label>
        <label class="cabin-radio-option">
          <span>Premium Economy</span>
          <input type="radio" name="cabin-home" value="Premium Economy">
        </label>
        <label class="cabin-radio-option">
          <span>Business</span>
          <input type="radio" name="cabin-home" value="Business">
        </label>
        <label class="cabin-radio-option">
          <span>First Class</span>
          <input type="radio" name="cabin-home" value="First">
        </label>
      </div>
    </div>
  </div>
</div>

<!-- Class Dropdown 2 (hidden - cabin now in combined dropdown) -->
<div id="transparent-class-dropdown-home-2" class="transparent-passengers-dropdown" role="dialog" style="display:none !important;"></div>

    <!-- Hidden form + calendar + passengers dropdown (used by hero search) -->
    <section class="flight-search-section" style="display:none;">
      <div class="flight-search-card">
        <form class="flight-search-form" id="flight-search-form">
          <input type="hidden" id="from" name="from" value="" />
          <input type="hidden" id="to" name="to" value="" />
          <input type="hidden" name="departure" id="departure" value="" />
          <input type="hidden" name="return-date" id="return-date" value="" />
          <input type="hidden" name="passengers-adults" id="passengers-adults" value="1" />
          <input type="hidden" name="passengers-children" id="passengers-children" value="0" />
          <input type="hidden" name="passengers-infants" id="passengers-infants" value="0" />
          <input type="radio" name="trip" value="return" id="trip-return" />
          <input type="radio" name="trip" value="oneway" id="trip-oneway" checked />
          <input type="radio" name="trip" value="multicity" id="trip-multicity" />
          <input type="checkbox" id="direct-flights-only" name="directFlightsOnly" />
          <select id="class" name="class">
            <option>Economy Class</option>
            <option>Premium Economy</option>
            <option>Business Class</option>
            <option>First Class</option>
          </select>
          <div class="flight-search-multicity" id="multicity-segments" style="display:none;">
            <div class="flight-search-segment" data-segment="0">
              <input type="hidden" class="airport-input mc-from" value="" />
              <input type="hidden" class="airport-input mc-to" value="" />
              <input type="hidden" class="mc-date-input" id="mc-date-0" name="mc-date-0" value="" />
            </div>
          </div>
          <input type="hidden" name="mc-passengers-adults" id="mc-passengers-adults" value="1" />
          <input type="hidden" name="mc-passengers-children" id="mc-passengers-children" value="0" />
          <input type="hidden" name="mc-passengers-infants" id="mc-passengers-infants" value="0" />
        </form>
      </div>
    </section>

    <div id="validation-alert-overlay" class="flight-search-validation-alert-overlay" role="alertdialog" aria-modal="true" aria-labelledby="validation-alert-title">
      <div class="flight-search-validation-alert">
        <svg class="flight-search-validation-alert-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>
        </svg>
        <div class="flight-search-validation-alert-title" id="validation-alert-title">Please correct before searching</div>
        <div class="flight-search-validation-alert-msg" id="validation-alert-msg"></div>
        <button type="button" class="flight-search-validation-alert-ok" id="validation-alert-ok">OK</button>
      </div>
    </div>

    <div id="ek-calendar-backdrop" class="ek-calendar-backdrop" style="display:none;" aria-hidden="true"></div>
    <div id="ek-calendar" class="ek-calendar-dropdown" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="ek-calendar-title">
      <div class="ek-calendar-top">
        <div class="ek-calendar-title-row">
          <span class="ek-calendar-plane-icon" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.8 19.2L16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2l-1.8-8.2L16 11z"/></svg>
          </span>
          <span class="ek-calendar-title" id="ek-calendar-title">Please choose your departure date</span>
        </div>
      </div>
      <div class="ek-calendar-single">
        <div class="ek-calendar-single-nav">
          <button type="button" class="ek-calendar-prev ek-calendar-nav-btn" aria-label="Previous month">‹</button>
          <span class="ek-calendar-month-year" id="ek-calendar-month-year-single"></span>
          <button type="button" class="ek-calendar-next ek-calendar-nav-btn" aria-label="Next month">›</button>
        </div>
        <div class="ek-calendar-weekdays">
          <span class="ek-calendar-weekday">MON</span>
          <span class="ek-calendar-weekday">TUE</span>
          <span class="ek-calendar-weekday">WED</span>
          <span class="ek-calendar-weekday">THU</span>
          <span class="ek-calendar-weekday">FRI</span>
          <span class="ek-calendar-weekday">SAT</span>
          <span class="ek-calendar-weekday">SUN</span>
        </div>
        <div class="ek-calendar-grid"></div>
      </div>
      <div class="ek-calendar-twomonths-wrap ek-calendar-threemonths-wrap">
        <div class="ek-calendar-top-nav-row">
          <button type="button" class="ek-calendar-prev ek-calendar-nav-btn" aria-label="Previous months">‹</button>
          <button type="button" class="ek-calendar-next ek-calendar-nav-btn" aria-label="Next months">›</button>
        </div>
        <div class="ek-calendar-twomonths-inner ek-calendar-threemonths-inner">
          <div class="ek-calendar-month-panel">
            <span class="ek-calendar-panel-title" id="ek-calendar-panel-title-0"></span>
            <div class="ek-calendar-weekdays">
              <span class="ek-calendar-weekday">MON</span>
              <span class="ek-calendar-weekday">TUE</span>
              <span class="ek-calendar-weekday">WED</span>
              <span class="ek-calendar-weekday">THU</span>
              <span class="ek-calendar-weekday">FRI</span>
              <span class="ek-calendar-weekday">SAT</span>
              <span class="ek-calendar-weekday">SUN</span>
            </div>
            <div class="ek-calendar-grid ek-calendar-grid-m1" id="ek-calendar-grid-m1"></div>
          </div>
          <div class="ek-calendar-month-panel">
            <span class="ek-calendar-panel-title" id="ek-calendar-panel-title-1"></span>
            <div class="ek-calendar-weekdays">
              <span class="ek-calendar-weekday">MON</span>
              <span class="ek-calendar-weekday">TUE</span>
              <span class="ek-calendar-weekday">WED</span>
              <span class="ek-calendar-weekday">THU</span>
              <span class="ek-calendar-weekday">FRI</span>
              <span class="ek-calendar-weekday">SAT</span>
              <span class="ek-calendar-weekday">SUN</span>
            </div>
            <div class="ek-calendar-grid ek-calendar-grid-m2" id="ek-calendar-grid-m2"></div>
          </div>
          <div class="ek-calendar-month-panel">
            <span class="ek-calendar-panel-title" id="ek-calendar-panel-title-2"></span>
            <div class="ek-calendar-weekdays">
              <span class="ek-calendar-weekday">MON</span>
              <span class="ek-calendar-weekday">TUE</span>
              <span class="ek-calendar-weekday">WED</span>
              <span class="ek-calendar-weekday">THU</span>
              <span class="ek-calendar-weekday">FRI</span>
              <span class="ek-calendar-weekday">SAT</span>
              <span class="ek-calendar-weekday">SUN</span>
            </div>
            <div class="ek-calendar-grid ek-calendar-grid-m3" id="ek-calendar-grid-m3"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="class-dropdown" class="class-dropdown" role="listbox">
      <button type="button" class="class-dropdown-option" data-value="Economy Class">Economy</button>
      <button type="button" class="class-dropdown-option" data-value="Premium Economy">Premium Economy</button>
      <button type="button" class="class-dropdown-option" data-value="Business Class">Business Class</button>
      <button type="button" class="class-dropdown-option" data-value="First Class">First Class</button>
    </div>

    <div id="passengers-dropdown" class="passengers-dropdown" role="dialog">
      <div class="passengers-dropdown-row" data-type="adult">
        <div class="passengers-dropdown-label-wrap">
          <span class="passengers-dropdown-label" id="pax-adult-label">1 Adult</span>
          <span class="passengers-dropdown-sublabel">Ages 12+</span>
        </div>
        <div class="passengers-dropdown-controls">
          <button type="button" class="passengers-dropdown-btn" id="pax-adult-minus" aria-label="Decrease adults">−</button>
          <span class="passengers-dropdown-count" id="pax-adult-val">1</span>
          <button type="button" class="passengers-dropdown-btn" id="pax-adult-plus" aria-label="Increase adults">+</button>
        </div>
      </div>
      <div class="passengers-dropdown-row" data-type="child">
        <div class="passengers-dropdown-label-wrap">
          <span class="passengers-dropdown-label" id="pax-child-label">0 Child</span>
          <span class="passengers-dropdown-sublabel">Ages 2–11</span>
        </div>
        <div class="passengers-dropdown-controls">
          <button type="button" class="passengers-dropdown-btn" id="pax-child-minus" aria-label="Decrease children">−</button>
          <span class="passengers-dropdown-count" id="pax-child-val">0</span>
          <button type="button" class="passengers-dropdown-btn" id="pax-child-plus" aria-label="Increase children">+</button>
        </div>
      </div>
      <div class="passengers-dropdown-row" data-type="infant">
        <div class="passengers-dropdown-label-wrap">
          <span class="passengers-dropdown-label" id="pax-infant-label">0 Infant</span>
          <span class="passengers-dropdown-sublabel">Ages under 2</span>
        </div>
        <div class="passengers-dropdown-controls">
          <button type="button" class="passengers-dropdown-btn" id="pax-infant-minus" aria-label="Decrease infants">−</button>
          <span class="passengers-dropdown-count" id="pax-infant-val">0</span>
          <button type="button" class="passengers-dropdown-btn" id="pax-infant-plus" aria-label="Increase infants">+</button>
        </div>
      </div>
    </div>

    <div id="flight-search-loading-overlay" class="flight-search-loading-overlay" aria-hidden="true" style="display:none;">
      <div class="flight-search-loading-content">
        <img src="/src/assets/images/load.gif" alt="Loading flight search results" class="flight-search-loading-logo" loading="lazy" decoding="async">
        <span class="flight-search-loading-text">Searching for flights...</span>
      </div>
    </div>

    <!-- FLIGHT RESULTS POPUP -->
    <div id="flight-results-popup" class="flight-results-popup" aria-hidden="true">
      <div class="flight-results-popup-backdrop"></div>
      <div class="flight-results-popup-content">
        <button type="button" class="flight-results-popup-close" aria-label="Close">&times;</button>
        <div class="flight-results-popup-inner">
          <div class="flight-results-filter-tabs">
            <button class="filter-tab" data-filter="cheapest">
              <span class="filter-tab-label">Cheapest</span>
              <span class="filter-tab-price" id="filter-cheapest-price">-</span>
            </button>
            <button class="filter-tab active" data-filter="best">
              <span class="filter-tab-label">Best</span>
              <span class="filter-tab-price" id="filter-best-price">-</span>
            </button>
            <button class="filter-tab" data-filter="quickest">
              <span class="filter-tab-label">Quickest</span>
              <span class="filter-tab-price" id="filter-quickest-price">-</span>
            </button>
          </div>
          <div class="flight-results-list" id="flight-results-list-popup">
            <!-- Results are loaded here by JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <div id="home-middle-content">
    <!-- WHY CHOOSE US – Travelian branding -->
    <section class="why-choose-us-section section-animate">
      <h2 class="why-choose-us-heading">Why Choose Travelian?</h2>
      <div class="why-choose-us-underline"></div>
      <div class="why-choose-us-grid">
        <div class="why-choose-us-card">
          <div class="why-choose-us-icon-wrap">
            <i class="fa-solid fa-calendar-check"></i>
          </div>
          <h3 class="why-choose-us-title">Easy Booking</h3>
        </div>
        <div class="why-choose-us-card">
          <div class="why-choose-us-icon-wrap">
            <i class="fa-solid fa-tag"></i>
          </div>
          <h3 class="why-choose-us-title">Best Price</h3>
        </div>
        <div class="why-choose-us-card">
          <div class="why-choose-us-icon-wrap">
            <i class="fa-solid fa-shield-halved"></i>
          </div>
          <h3 class="why-choose-us-title">Safe & Reliable</h3>
        </div>
        <div class="why-choose-us-card">
          <div class="why-choose-us-icon-wrap">
            <i class="fa-solid fa-headset"></i>
          </div>
          <h3 class="why-choose-us-title">Support When You Need It</h3>
        </div>
      </div>
    </section>

    <!-- OUR SERVICES (ref 9) -->
    <section class="our-services-section section-animate">
      <h2 class="our-services-heading">Our Services</h2>
      <div class="our-services-underline"></div>
      <div class="our-services-grid">
        <div class="our-services-card">
          <div class="our-services-icon-wrap">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.8 19.2L16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2l-1.8-8.2L16 11z"/></svg>
          </div>
          <h3 class="our-services-title">Tickets</h3>
        </div>
        <div class="our-services-card">
          <div class="our-services-icon-wrap">
            <img src="/src/assets/images/mosque.svg" alt="Umrah" class="our-services-icon-img" loading="lazy" decoding="async">
          </div>
          <h3 class="our-services-title">Umrah</h3>
        </div>
        <div class="our-services-card">
          <div class="our-services-icon-wrap">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
          </div>
          <h3 class="our-services-title">Visit Visa</h3>
        </div>
        <div class="our-services-card">
          <div class="our-services-icon-wrap">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
          </div>
          <h3 class="our-services-title">Study Visa</h3>
        </div>
        <div class="our-services-card">
          <div class="our-services-icon-wrap">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 21h16"/><path d="M5 21V8l7-4 7 4v13"/><path d="M5 11h14"/><path d="M5 15h14"/><path d="M9 11v10"/><path d="M15 11v10"/></svg>
          </div>
          <h3 class="our-services-title">Hotel Booking</h3>
        </div>
        <div class="our-services-card">
          <div class="our-services-icon-wrap">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/></svg>
          </div>
          <h3 class="our-services-title">Travel Insurance</h3>
        </div>
      </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="testimonial-section section-animate">
      <h2 class="testimonial-heading">What Our Customers Say</h2>
      <div class="testimonial-underline"></div>
      <div class="testimonial-marquee-wrap">
        <div class="testimonial-track">
          <div class="testimonial-set">
            <div class="testimonial-card">
              <p class="testimonial-quote">Travelian made our Umrah trip smooth from start to finish. Flights and accommodation were well arranged. Highly recommend for anyone planning a spiritual journey.</p>
              <p class="testimonial-author">Ahmed Khan</p>
              <p class="testimonial-role">Umrah Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Best travel agency in Lahore. Got great fares for our family trip to Athens. The team was responsive and helped with every detail. Will book again.</p>
              <p class="testimonial-author">Sara Mahmood</p>
              <p class="testimonial-role">Family Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Professional and reliable. They handled my study visa documentation and flight booking together. Saved me time and stress. Thank you Travelian!</p>
              <p class="testimonial-author">Usman Ali</p>
              <p class="testimonial-role">Student</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Hotel booking was seamless. Great deals on Umrah packages. The Travelian team is very professional and always available.</p>
              <p class="testimonial-author">Fatima Hussain</p>
              <p class="testimonial-role">Umrah Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Quick visa processing and excellent support. Travelian made my study abroad dream come true. Highly recommended!</p>
              <p class="testimonial-author">Ali Raza</p>
              <p class="testimonial-role">Student</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Booked flights for the whole family. Smooth experience from start to finish. Will definitely use Travelian again for our next trip.</p>
              <p class="testimonial-author">Mariam Khan</p>
              <p class="testimonial-role">Family Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Best prices for Umrah. Transparent and trustworthy. I will recommend Travelian to everyone planning a spiritual journey.</p>
              <p class="testimonial-author">Hassan Ahmed</p>
              <p class="testimonial-role">Umrah Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Excellent customer service. They answered all my questions patiently and helped me choose the right package. Very satisfied!</p>
              <p class="testimonial-author">Zainab Malik</p>
              <p class="testimonial-role">First-time Traveler</p>
            </div>
          </div>
          <div class="testimonial-set">
            <div class="testimonial-card">
              <p class="testimonial-quote">Travelian made our Umrah trip smooth from start to finish. Flights and accommodation were well arranged. Highly recommend for anyone planning a spiritual journey.</p>
              <p class="testimonial-author">Ahmed Khan</p>
              <p class="testimonial-role">Umrah Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Best travel agency in Lahore. Got great fares for our family trip to Athens. The team was responsive and helped with every detail. Will book again.</p>
              <p class="testimonial-author">Sara Mahmood</p>
              <p class="testimonial-role">Family Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Professional and reliable. They handled my study visa documentation and flight booking together. Saved me time and stress. Thank you Travelian!</p>
              <p class="testimonial-author">Usman Ali</p>
              <p class="testimonial-role">Student</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Hotel booking was seamless. Great deals on Umrah packages. The Travelian team is very professional and always available.</p>
              <p class="testimonial-author">Fatima Hussain</p>
              <p class="testimonial-role">Umrah Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Quick visa processing and excellent support. Travelian made my study abroad dream come true. Highly recommended!</p>
              <p class="testimonial-author">Ali Raza</p>
              <p class="testimonial-role">Student</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Booked flights for the whole family. Smooth experience from start to finish. Will definitely use Travelian again for our next trip.</p>
              <p class="testimonial-author">Mariam Khan</p>
              <p class="testimonial-role">Family Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Best prices for Umrah. Transparent and trustworthy. I will recommend Travelian to everyone planning a spiritual journey.</p>
              <p class="testimonial-author">Hassan Ahmed</p>
              <p class="testimonial-role">Umrah Traveler</p>
            </div>
            <div class="testimonial-card">
              <p class="testimonial-quote">Excellent customer service. They answered all my questions patiently and helped me choose the right package. Very satisfied!</p>
              <p class="testimonial-author">Zainab Malik</p>
              <p class="testimonial-role">First-time Traveler</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 24/7 SUPPORT SECTION -->
    <section class="support-section section-animate">
      <div class="support-section-grid">
        <div class="support-section-image-wrap">
          <picture><source type="image/webp" srcset="/src/assets/images/24.7%20support.webp" /><img src="/src/assets/images/24.7 support.png" alt="24/7 Support - We're here for you around the clock" loading="lazy" decoding="async" /></picture>
        </div>
        <div class="support-section-card">
          <a href="tel:+923244440014">
            <div class="support-section-icon-wrap">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
            </div>
            <span class="support-section-title">Call Us</span>
            <span class="support-section-desc">+92 324 444 0014</span>
          </a>
        </div>
        <div class="support-section-card">
          <a href="https://wa.me/923244440014" target="_blank" rel="noopener noreferrer">
            <div class="support-section-icon-wrap">
              <i class="fa-brands fa-whatsapp"></i>
            </div>
            <span class="support-section-title">WhatsApp</span>
            <span class="support-section-desc">Chat with us instantly</span>
          </a>
        </div>
        <div class="support-section-card">
          <a href="mailto:travelian.pk@gmail.com">
            <div class="support-section-icon-wrap">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            </div>
            <span class="support-section-title">Email</span>
            <span class="support-section-desc">travelian.pk@gmail.com</span>
          </a>
        </div>
        <div class="support-section-card">
          <a href="https://www.instagram.com/travelian.pk" target="_blank" rel="noopener noreferrer">
            <div class="support-section-icon-wrap">
              <i class="fa-brands fa-instagram"></i>
            </div>
            <span class="support-section-title">Instagram</span>
            <span class="support-section-desc">Follow & message us</span>
          </a>
        </div>
      </div>
    </section>

    <!-- AUTHORIZED FROM (ref 8) -->
    <section class="authorized-from-section section-animate">
      <h2 class="authorized-from-heading">Authorized From</h2>
      <div class="authorized-from-underline"></div>
      <div class="authorized-from-grid">
        <div class="authorized-from-card">
          <div class="authorized-from-logo-wrap">
            <picture><source type="image/webp" srcset="/src/assets/icons/authorized-logos/SECP.webp" /><img src="/src/assets/icons/authorized-logos/SECP.png" alt="SECP – Securities and Exchange Commission of Pakistan" class="authorized-from-logo" loading="lazy" decoding="async" /></picture>
          </div>
        </div>
        <div class="authorized-from-card">
          <div class="authorized-from-logo-wrap">
            <img src="/src/assets/icons/authorized-logos/FBR-Logo.png" alt="FBR – Federal Board of Revenue" class="authorized-from-logo" loading="lazy" decoding="async" />
          </div>
        </div>
        <div class="authorized-from-card">
          <div class="authorized-from-logo-wrap">
            <img src="/src/assets/icons/authorized-logos/IPO-wbg.png" alt="IPO – Intellectual Property Organization Pakistan" class="authorized-from-logo" loading="lazy" decoding="async" />
          </div>
        </div>
        <div class="authorized-from-card">
          <div class="authorized-from-logo-wrap">
            <img src="/src/assets/icons/authorized-logos/dts.jpeg" alt="DTS – Department of Tourism Services" class="authorized-from-logo" loading="lazy" decoding="async" />
          </div>
        </div>
        <div class="authorized-from-card">
          <div class="authorized-from-logo-wrap">
            <img src="/src/assets/icons/authorized-logos/iata-logo-header.svg" alt="IATA – International Air Transport Association" class="authorized-from-logo" loading="lazy" decoding="async" />
          </div>
        </div>
        <div class="authorized-from-card">
          <div class="authorized-from-logo-wrap">
            <img src="/src/assets/icons/authorized-logos/taap-travel.png" alt="TAAP – Travel Agents Association of Pakistan" class="authorized-from-logo" loading="lazy" decoding="async" />
          </div>
        </div>
        <div class="authorized-from-card">
          <div class="authorized-from-logo-wrap">
            <picture><source type="image/webp" srcset="/src/assets/icons/authorized-logos/Lcoc2.webp" /><img src="/src/assets/icons/authorized-logos/Lcoc2.jpeg" alt="LCOC – Licensed Company" class="authorized-from-logo" loading="lazy" decoding="async" /></picture>
          </div>
        </div>
      </div>
    </section>

    <!-- OUR PARTNER AIRLINES (ref 11) -->
    <section class="partner-airlines-section section-animate">
      <div class="partner-airlines-overlay">
        <h2 class="partner-airlines-heading">Our Partner Airlines</h2>
        <div class="partner-airlines-underline"></div>
        <div class="partner-airlines-marquee">
          <div class="partner-airlines-track">
        <div class="partner-airlines-logos">
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="/src/assets/icons/airline-logos/airsial.svg" alt="AirSial" class="partner-airline-img" loading="lazy" decoding="async" /><span class="partner-airline-name">AirSial</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="/src/assets/icons/airline-logos/pia.svg" alt="PIA" class="partner-airline-img" loading="lazy" decoding="async" /><span class="partner-airline-name">PIA</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/PA.png" alt="Airblue" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Airblue</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="/src/assets/icons/airline-logos/flyjinnah.svg" alt="Fly Jinnah" class="partner-airline-img" loading="lazy" decoding="async" /><span class="partner-airline-name">Fly Jinnah</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/FZ.png" alt="Fly Dubai" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Fly Dubai</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/OV.png" alt="Salam Air" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Salam Air</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/XY.png" alt="Flynas" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Flynas</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/WY.png" alt="Oman Air" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Oman Air</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="/src/assets/icons/airline-logos/airarabia.svg" alt="Air Arabia" class="partner-airline-img" loading="lazy" decoding="async" /><span class="partner-airline-name">Air Arabia</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/F3.png" alt="Flyadeal" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Flyadeal</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/J9.png" alt="Jazeera" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Jazeera</span></div></div>
        </div>
        <div class="partner-airlines-logos" aria-hidden="true">
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="/src/assets/icons/airline-logos/airsial.svg" alt="AirSial" class="partner-airline-img" loading="lazy" decoding="async" /><span class="partner-airline-name">AirSial</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="/src/assets/icons/airline-logos/pia.svg" alt="PIA" class="partner-airline-img" loading="lazy" decoding="async" /><span class="partner-airline-name">PIA</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/PA.png" alt="Airblue" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Airblue</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="/src/assets/icons/airline-logos/flyjinnah.svg" alt="Fly Jinnah" class="partner-airline-img" loading="lazy" decoding="async" /><span class="partner-airline-name">Fly Jinnah</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/FZ.png" alt="Fly Dubai" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Fly Dubai</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/OV.png" alt="Salam Air" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Salam Air</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/XY.png" alt="Flynas" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Flynas</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/WY.png" alt="Oman Air" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Oman Air</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="/src/assets/icons/airline-logos/airarabia.svg" alt="Air Arabia" class="partner-airline-img" loading="lazy" decoding="async" /><span class="partner-airline-name">Air Arabia</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/F3.png" alt="Flyadeal" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Flyadeal</span></div></div>
          <div class="partner-airline-item"><div class="partner-airline-logo-wrap"><img src="https://images.kiwi.com/airlines/64/J9.png" alt="Jazeera" class="partner-airline-img" loading="lazy" decoding="async" onerror="this.src='/src/assets/icons/airline-logos/placeholder.svg'" /><span class="partner-airline-name">Jazeera</span></div></div>
        </div>
          </div>
        </div>
      </div>
    </section>
    </div><!-- /#home-middle-content -->
    </div><!-- /#home-content -->

    <!-- FLIGHT RESULTS (header + results + footer only when shown) -->
    <section class="flight-results-section" id="flight-results" style="display:none;">
      <div class="flight-results-inline-wrap">
        <h2 class="flight-results-heading" id="flight-results-heading">Flight Results</h2>
        <p class="flight-results-sub" id="flight-results-sub"></p>
        <div class="flight-results-dates-grid" id="flight-results-dates-grid"></div>
        <div class="flight-results-body">
          <aside class="flight-results-filters">
            <div class="filter-block">
              <h3 class="filter-block-title">Airlines</h3>
              <p class="filter-airlines-hint">Select airlines (leave empty for all)</p>
              <div class="filter-airlines">
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="S9"> AirSial</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="PK"> PIA</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="PA"> Airblue</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="9P"> Fly Jinnah</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="FZ"> Fly Dubai</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="OV"> Salam Air</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="XY"> Flynas</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="WY"> Oman Air</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="G9"> Air Arabia</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="F3"> Flyadeal</label>
                <label class="filter-airline-item"><input type="checkbox" name="filter-airline" value="J9"> Jazeera</label>
              </div>
            </div>
            <div class="filter-block">
              <h3 class="filter-block-title">Sort By</h3>
              <div class="filter-sort-wrap">
                <select id="filter-sort-by" class="filter-select">
                  <option value="price-low">Price - Low to High</option>
                  <option value="price-high">Price - High to Low</option>
                </select>
              </div>
            </div>
            <div class="filter-block">
              <h3 class="filter-block-title">Departure Time</h3>
              <div class="filter-departure-wrap">
                <select id="filter-departure-time" class="filter-select">
                  <option value="">All Times</option>
                  <option value="morning">Morning (05:00 - 11:59)</option>
                  <option value="noon">Noon (12:00 - 13:59)</option>
                  <option value="afternoon">Afternoon (14:00 - 17:59)</option>
                  <option value="evening">Evening (18:00 - 20:59)</option>
                  <option value="late-night">Late Night (21:00 - 04:59)</option>
                </select>
              </div>
            </div>
          </aside>
          <div class="flight-results-main">
            <div class="flight-results-list" id="flight-results-list"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOOTER (ref 6 style: white area only, no blue) -->
    <footer class="site-footer section-animate">
      <div class="footer-inner">
        <div class="footer-col footer-col-logo">
          <img src="/src/assets/images/Travelian%20logo.png" alt="Travelian Logo" class="footer-brand-logo" loading="lazy" decoding="async" />
          <p class="footer-about-text">Travelian.pk – Your trusted partner offering professional services for flights, Umrah, visit visas, study visas, hotel bookings, and beyond. Explore the world with Travelian.</p>
          <div class="footer-socials">
            <a href="https://wa.me/923244440014" target="_blank" rel="noopener noreferrer" title="WhatsApp - +92 324 4440014"><i class="fa-brands fa-whatsapp"></i></a>
            <a href="https://www.facebook.com/Travelian.pk/" target="_blank" rel="noopener noreferrer" title="Facebook"><i class="fa-brands fa-square-facebook"></i></a>
            <a href="https://www.instagram.com/travelian.pk/" target="_blank" rel="noopener noreferrer" title="Instagram"><i class="fa-brands fa-instagram"></i></a>
            <a href="mailto:travelian.pk@gmail.com" title="Email - travelian.pk@gmail.com"><i class="fa-brands fa-google"></i></a>
          </div>
        </div>
        <div class="footer-col">
          <h4>Our Services</h4>
          <ul>
            <li><a href="/">Flight Tickets</a></li>
            <li><a href="/src/pages/umrah-packages.html">Umrah Packages</a></li>
            <li><a href="/src/pages/visit-visa.html">Visit Visa</a></li>
            <li><a href="/src/pages/study-visa.html">Study Visa</a></li>
            <li><a href="/src/pages/hotel-bookings.html">Hotel Bookings</a></li>
            <li><a href="/src/pages/travel-insurance.html">Travel Insurance</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Contact Info</h4>
          <div class="footer-contact-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            <span>Johar Town Lahore</span>
          </div>
          <div class="footer-contact-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
            <span>+92 324 444 0014</span>
          </div>
          <div class="footer-contact-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            <span>travelian.pk@gmail.com</span>
          </div>
          <div class="footer-contact-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            <span>24/7 Support</span>
          </div>
          <div class="footer-contact-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
            <span style="color:inherit;">Travelian.pk FAQs</span>
          </div>
        </div>
        <div class="footer-col">
          <h4>Stay in the Loop</h4>
          <p class="footer-about-text" style="margin-bottom:0.5rem; max-width:260px;">Like our Facebook and Instagram Page, connect with us on WhatsApp, or visit our website for the latest travel tips, exclusive offers, and updates on your next journey.</p>
          <p style="margin-top:0.5rem; font-size:0.8rem; font-weight:600; color:#374151; max-width:260px;">Your privacy will be respected.</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>© Copyright by Travelian. All rights reserved.</p>
      </div>
    </footer>
  </div>

  <script>
    if (window.location.protocol === 'file:') {
      window.location.replace('http://localhost:3000/');
    }
    var API_BASE = (window.location.protocol === 'http:' || window.location.protocol === 'https:') ? window.location.origin : 'http://localhost:3000';
    var AIRLINE_LOGOS = {
      S9: '/src/assets/icons/airline-logos/airsial.svg',
      PK: 'https://images.kiwi.com/airlines/64/PK.png',
      PA: 'https://images.kiwi.com/airlines/64/PA.png',
      '9P': 'https://images.kiwi.com/airlines/64/9P.png',
      FZ: 'https://images.kiwi.com/airlines/64/FZ.png',
      OV: 'https://images.kiwi.com/airlines/64/OV.png',
      XY: 'https://images.kiwi.com/airlines/64/XY.png',
      WY: 'https://images.kiwi.com/airlines/64/WY.png',
      G9: 'https://images.kiwi.com/airlines/64/G9.png',
      F3: 'https://images.kiwi.com/airlines/64/F3.png',
      J9: 'https://images.kiwi.com/airlines/64/J9.png'
    };
    function getAirlineLogoUrl(code) {
      var url = AIRLINE_LOGOS[code];
      if (url) return url;
      if (code) return 'https://images.kiwi.com/airlines/64/' + code + '.png';
      return '/src/assets/icons/airline-logos/placeholder.svg';
    }
    var searchTimeout = null;
    var AIRPORTS_PRELOADED = null;

    (function preloadAirports() {
      var fb = { departure: [{name:'Karachi',code:'KHI'},{name:'Lahore',code:'LHE'},{name:'Islamabad',code:'ISB'}], arrival: [{name:'Dubai',code:'DXB'},{name:'Doha',code:'DOH'},{name:'London',code:'LHR'},{name:'Istanbul',code:'IST'},{name:'Abu Dhabi',code:'AUH'},{name:'Jeddah',code:'JED'},{name:'Singapore',code:'SIN'},{name:'Kuala Lumpur',code:'KUL'}] };
      fetch(API_BASE + '/api/airports?_=' + Date.now()).then(function(r) { return r.json(); }).then(function(data) {
        AIRPORTS_PRELOADED = data;
      }).catch(function() { AIRPORTS_PRELOADED = fb; });
    })();

    function showAirportResults(dropdownEl, inputEl, items) {
      dropdownEl.innerHTML = '';
      var isFromOrTo = inputEl && (inputEl.id === 'from-hero' || inputEl.id === 'from' || inputEl.id === 'to-hero' || inputEl.id === 'to');
      var headingHtml = isFromOrTo ? '<div class="airport-dropdown-heading">Popular Cities</div>' : '';
      if (!items || items.length === 0) {
        dropdownEl.innerHTML = headingHtml;
      } else {
        var list = (items.departure || []).concat(items.arrival || []);
        if (Array.isArray(items)) list = items;
        else if (items.data) list = items.data;
        if (!Array.isArray(list)) list = [];
        var seen = {};
        list = list.filter(function(a) {
          var k = (a.iataCode || a.code || '').toUpperCase();
          if (!k || seen[k]) return false;
          seen[k] = true;
          return true;
        });
        dropdownEl.innerHTML = headingHtml + list.slice(0, 20).map(function(a) {
          var name = a.name || '';
          var city = a.city || a.name || '';
          var code = a.iataCode || a.code || '';
          var val = city + ', ' + code;
          return '<div class="airport-dropdown-item" data-value="' + val.replace(/"/g, '&quot;') + '">' + name + ' <strong>(' + code + ')</strong></div>';
        }).join('');
        dropdownEl.querySelectorAll('.airport-dropdown-item[data-value]').forEach(function(el) {
          el.addEventListener('click', function() {
            inputEl.value = el.getAttribute('data-value');
            inputEl.classList.remove('invalid');
            dropdownEl.classList.remove('open');
            inputEl.dispatchEvent(new Event('input', { bubbles: true }));
            // Sync hero bar to main form
            if (inputEl.id === 'from-hero') { var m = document.getElementById('from'); if (m) m.value = inputEl.value; }
            if (inputEl.id === 'to-hero') { var m = document.getElementById('to'); if (m) m.value = inputEl.value; }
            // Auto-open calendar when arrival airport is selected
            if (inputEl.id === 'to' || inputEl.id === 'to-hero') {
              requestAnimationFrame(function() {
                requestAnimationFrame(function() {
                  setTimeout(function() {
                    var card = document.querySelector('.flight-search-card');
                    if (card && !card.classList.contains('multicity')) {
                      var heroTrig = document.getElementById('hero-date-trigger');
                      if (heroTrig && typeof window.openRangeCalendar === 'function') {
                        window.openRangeCalendar(heroTrig);
                      }
                    }
                  }, 100);
                });
              });
            }
          });
        });
      }
      dropdownEl.classList.add('open');
    }

    function getAirportList() {
      if (AIRPORTS_PRELOADED) {
        var d = AIRPORTS_PRELOADED.departure || [], a = AIRPORTS_PRELOADED.arrival || [];
        return d.concat(a);
      }
      return null;
    }

    function filterAirports(list, q) {
      if (!list || !list.length) return [];
      if (!q) return list;
      var k = q.toLowerCase();
      return list.filter(function(x) {
        return (x.name || '').toLowerCase().indexOf(k) >= 0 || (x.code || '').toLowerCase().indexOf(k) >= 0;
      });
    }

    function showFromPreloaded(dropdownEl, inputEl, q) {
      var list = getAirportList();
      if (!list) return false;
      var filtered = filterAirports(list, q);
      showAirportResults(dropdownEl, inputEl, filtered);
      return true;
    }

    function initAirportAutocomplete(inputEl, dropdownEl) {
      if (!inputEl || !dropdownEl) return;

      function doSearch(q) {
        q = (q || '').trim();
        if (showFromPreloaded(dropdownEl, inputEl, q)) return;
        if (!q) {
          fetch(API_BASE + '/api/airports?_=' + Date.now()).then(function(r) { return r.json(); }).then(function(res) {
            AIRPORTS_PRELOADED = res;
            showAirportResults(dropdownEl, inputEl, res);
          }).catch(function() {
            var fb = { departure: [{name:'Karachi',code:'KHI'},{name:'Lahore',code:'LHE'},{name:'Islamabad',code:'ISB'}], arrival: [{name:'Dubai',code:'DXB'},{name:'Doha',code:'DOH'},{name:'London',code:'LHR'},{name:'Istanbul',code:'IST'}] };
            showAirportResults(dropdownEl, inputEl, fb);
          });
          return;
        }
        if (q.length >= 2) {
          var list = getAirportList();
          if (list) {
            showAirportResults(dropdownEl, inputEl, filterAirports(list, q));
            return;
          }
          fetch(API_BASE + '/api/city-and-airport-search/' + encodeURIComponent(q) + '?_=' + Date.now())
            .then(function(r) { return r.json(); })
            .then(function(res) { showAirportResults(dropdownEl, inputEl, res); })
            .catch(function() { showFromPreloaded(dropdownEl, inputEl, q); });
        }
      }

      inputEl.addEventListener('input', function() {
        var q = (inputEl.value || '').trim();
        clearTimeout(searchTimeout);
        dropdownEl.classList.remove('open');
        dropdownEl.innerHTML = '';
        if (showFromPreloaded(dropdownEl, inputEl, q)) return;
        if (q.length < 2) return;
        searchTimeout = setTimeout(function() { doSearch(q); }, 200);
      });

      inputEl.addEventListener('focus', function() {
        var q = (inputEl.value || '').trim();
        clearTimeout(searchTimeout);
        doSearch(q);
      });

      inputEl.addEventListener('blur', function() {
        setTimeout(function() { dropdownEl.classList.remove('open'); }, 220);
      });
    }

    (function initAllAirportAutocomplete() {
      initAirportAutocomplete(document.getElementById('from'), document.getElementById('from-dropdown'));
      initAirportAutocomplete(document.getElementById('to'), document.getElementById('to-dropdown'));
      document.querySelectorAll('.airport-autocomplete').forEach(function(wrap) {
        var inp = wrap.querySelector('.airport-input');
        var dd = wrap.querySelector('.airport-dropdown');
        if (inp && dd) initAirportAutocomplete(inp, dd);
      });
    })();

    (function initAirportClearButtons() {
      var fromInp = document.getElementById('from-hero');
      var toInp = document.getElementById('to-hero');
      var fromClear = document.getElementById('from-hero-clear');
      var toClear = document.getElementById('to-hero-clear');
      var fromWrap = document.getElementById('from-hero-wrap');
      var toWrap = document.getElementById('to-hero-wrap');
      function updateClearBtn(inp, btn, wrap) {
        if (!inp || !btn || !wrap) return;
        var hasVal = (inp.value || '').trim().length > 0;
        btn.classList.toggle('visible', hasVal);
        wrap.classList.toggle('has-clear', hasVal);
      }
      function setupClear(inp, btn, wrap, mainId) {
        if (!inp || !btn) return;
        inp.addEventListener('input', function() { updateClearBtn(inp, btn, wrap); });
        inp.addEventListener('change', function() { updateClearBtn(inp, btn, wrap); });
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          inp.value = '';
          inp.classList.remove('invalid');
          var main = document.getElementById(mainId);
          if (main) main.value = '';
          updateClearBtn(inp, btn, wrap);
          var dd = wrap ? wrap.querySelector('.airport-dropdown') : null;
          if (dd) dd.classList.remove('open');
        });
        updateClearBtn(inp, btn, wrap);
      }
      setupClear(fromInp, fromClear, fromWrap, 'from');
      setupClear(toInp, toClear, toWrap, 'to');
    })();

    // Initialize calendar for home form date fields
    (function initHomeDateFields() {
      var departDateInput = document.getElementById('transparent-depart-date-home');
      var returnDateInput = document.getElementById('transparent-return-date-home-input');
      var departureHidden = document.getElementById('departure');
      var returnDateHidden = document.getElementById('return-date');
      
      if (!departDateInput || !returnDateInput || !departureHidden || !returnDateHidden) return;
      
      // Function to format date for display
      function formatDateForDisplay(ymd) {
        if (!ymd) return '';
        var parts = ymd.split('-');
        if (parts.length !== 3) return ymd;
        var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        var month = months[parseInt(parts[1], 10) - 1] || parts[1];
        return month + ' ' + parseInt(parts[2], 10) + ', ' + parts[0];
      }
      
      // Function to sync dates from hidden fields to display fields
      function syncHomeDates() {
        if (departureHidden && departureHidden.value && departDateInput) {
          var ymd = departureHidden.value;
          var formatted = formatDateForDisplay(ymd);
          departDateInput.setAttribute('data-ymd', ymd);
          departDateInput.value = formatted;
        } else if (departDateInput) {
          departDateInput.value = '';
          departDateInput.removeAttribute('data-ymd');
        }
        
        if (returnDateHidden && returnDateInput) {
          returnDateInput.value = returnDateHidden.value || '';
        }
      }
      
      // Open calendar for departure date (skipToReturn: when true, start at return-date step)
      function openHomeDepartCalendar(skipToReturn) {
        if (!departureHidden || typeof window.openRangeCalendar !== 'function') return;
        
        var tempDep = document.getElementById('departure');
        var tempRet = document.getElementById('return-date');
        
        if (!tempDep || !tempRet) return;
        
        tempDep.value = departureHidden.value || '';
        tempRet.value = returnDateHidden.value || '';
        
        var tripHome = document.querySelector('input[name="trip-home"]:checked');
        var tripMain = document.querySelector('input[name="trip"]');
        if (tripHome && tripMain) {
          var oneway = tripHome.value === 'oneway';
          var tripRadio = document.getElementById(oneway ? 'trip-oneway' : 'trip-return');
          if (tripRadio) tripRadio.checked = true;
        }
        
        window.transparentHomeCalendarActive = true;
        window.openRangeCalendar(departDateInput, !!skipToReturn);
        
        var checkInterval = setInterval(function() {
          syncHomeDates();
          var cal = document.getElementById('ek-calendar');
          if (!cal || cal.style.display === 'none' || !cal.classList.contains('open')) {
            clearInterval(checkInterval);
            syncHomeDates();
            window.transparentHomeCalendarActive = false;
          }
        }, 100);
      }
      
      // Open calendar for return date
      function openHomeReturnCalendar() {
        if (!returnDateHidden || !departureHidden) return;
        
        if (!departureHidden.value) {
          openHomeDepartCalendar();
          return;
        }
        
        openHomeDepartCalendar(true);  // true = skip to return date selection
      }
      
      if (departDateInput) {
        var departField = departDateInput.closest('.etihad-field-dates') || departDateInput.closest('.transparent-search-field');
        var onDateClick = function(e) {
          e.preventDefault();
          e.stopPropagation();
          if (typeof window.openTravelDatePicker === 'function') {
            window.openTravelDatePicker();
          } else if (typeof window.openHomeDepartCalendarFn === 'function') {
            openHomeDepartCalendar();
          }
        };
        if (departField) {
          departField.style.cursor = 'pointer';
          departField.addEventListener('click', onDateClick);
        }
        departDateInput.addEventListener('click', onDateClick);
        var dateLabel = document.querySelector('label[for="transparent-depart-date-home"]');
        if (dateLabel) dateLabel.addEventListener('click', onDateClick);
      }
      
      /* Return date merged into Travel Date - single click opens range calendar */
      
      // Sync dates on load
      syncHomeDates();
      
      // Watch for changes in hidden fields
      if (departureHidden && returnDateHidden) {
        var syncObserver = new MutationObserver(function() {
          syncHomeDates();
        });
        syncObserver.observe(departureHidden, { attributes: true, attributeFilter: ['value'] });
        syncObserver.observe(returnDateHidden, { attributes: true, attributeFilter: ['value'] });
        
        setInterval(function() {
          syncHomeDates();
        }, 500);
      }
      window.openHomeDepartCalendarFn = openHomeDepartCalendar;
    })();

    // Flatpickr date picker for Travel Date (replaces custom calendar)
    (function initFlatpickrDatePicker() {
      if (typeof flatpickr === 'undefined') return;
      var dateInput = document.getElementById('transparent-depart-date-home');
      var depHidden = document.getElementById('departure');
      var retHidden = document.getElementById('return-date');
      var retDisplay = document.getElementById('transparent-return-date-home-input');
      if (!dateInput || !depHidden || !retHidden) return;
      function isOneWay() {
        var r = document.querySelector('input[name="trip-home"]:checked');
        return r && r.value === 'oneway';
      }
      function formatDate(d) {
        if (!d || !d.getFullYear) return '';
        var m = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
        return m[d.getMonth()] + ' ' + d.getDate() + ', ' + d.getFullYear();
      }
      var fp = flatpickr(dateInput, {
        mode: 'range',
        showMonths: 3,
        locale: { firstDayOfWeek: 1 },
        position: 'below',
        altInput: false,
        allowInput: false,
        dateFormat: 'Y-m-d',
        minDate: 'today',
        static: false,
        appendTo: document.body,
        disableMobile: false,
        closeOnSelect: false,
        onOpen: function(sel, datestr, inst) {
          var searchArea = dateInput.closest('.transparent-home-search') || dateInput.closest('.home-flight-search-wrap');
          var cal = inst.calendarContainer;
          if (cal && searchArea) {
            var rect = searchArea.getBoundingClientRect();
            cal.style.position = 'fixed';
            cal.style.left = rect.left + 'px';
            cal.style.top = (rect.bottom + 8) + 'px';
            cal.style.transform = 'none';
            cal.style.width = rect.width + 'px';
            cal.style.maxWidth = rect.width + 'px';
            cal.style.right = 'auto';
          }
        },
        onChange: function(sel, datestr) {
          if (!sel || sel.length === 0) {
            depHidden.value = '';
            retHidden.value = '';
            dateInput.value = '';
            if (retDisplay) retDisplay.value = '';
            return;
          }
          var d0 = sel[0];
          depHidden.value = d0 ? d0.getFullYear() + '-' + ('0' + (d0.getMonth() + 1)).slice(-2) + '-' + ('0' + d0.getDate()).slice(-2) : '';
          if (sel.length >= 2 && sel[1]) {
            var d1 = sel[1];
            retHidden.value = d1.getFullYear() + '-' + ('0' + (d1.getMonth() + 1)).slice(-2) + '-' + ('0' + d1.getDate()).slice(-2);
            dateInput.value = formatDate(d0) + ' – ' + formatDate(d1);
            if (fp) fp.close();
          } else {
            retHidden.value = '';
            dateInput.value = formatDate(d0);
            if (isOneWay() && fp) fp.close();
          }
          if (retDisplay) retDisplay.value = retHidden.value;
          dateInput.classList.remove('invalid', 'placeholder');
        },
        onReady: function(sel, datestr, inst) {
          inst.set('mode', isOneWay() ? 'single' : 'range');
        }
      });
      dateInput._flatpickr = fp;
      if (depHidden.value) {
        var initDates = [depHidden.value];
        if (retHidden.value) initDates.push(retHidden.value);
        fp.setDate(initDates);
      }
      document.querySelectorAll('input[name="trip-home"]').forEach(function(r) {
        r.addEventListener('change', function() {
          if (fp) fp.set('mode', isOneWay() ? 'single' : 'range');
          if (isOneWay() && retHidden) {
            retHidden.value = '';
            if (retDisplay) retDisplay.value = '';
            var sel = fp.selectedDates;
            if (sel && sel.length >= 2) {
              fp.setDate(sel[0]);
            }
            dateInput.value = fp.selectedDates[0] ? formatDate(fp.selectedDates[0]) : '';
          }
        });
      });
      window.openTravelDatePicker = function() {
        var fromInp = document.getElementById('transparent-txtOriginFull-home');
        var toInp = document.getElementById('transparent-txtDestinationFull-home');
        function hasCode(el) {
          var v = (el && el.value) || '';
          return /\([A-Z]{3}\)/.test(v) || /,\s*[A-Z]{3}\s*$/.test(v) || (v.length === 3 && /^[A-Z]{3}$/i.test(v));
        }
        if (!hasCode(fromInp)) {
          if (typeof showValidationError === 'function') showValidationError('Please select departure airport first.', ['transparent-txtOriginFull-home']);
          if (fromInp) fromInp.focus();
          return;
        }
        if (!hasCode(toInp)) {
          if (typeof showValidationError === 'function') showValidationError('Please select arrival airport first.', ['transparent-txtDestinationFull-home']);
          if (toInp) toInp.focus();
          return;
        }
        if (fp) fp.open();
      };
      var scrollCloseTimeout;
      function closeOnScroll() {
        if (!fp) return;
        var cal = fp.calendarContainer;
        if (!cal || !cal.classList.contains('open')) return;
        if (!isOneWay() && fp.selectedDates && fp.selectedDates.length === 1) return;
        clearTimeout(scrollCloseTimeout);
        scrollCloseTimeout = setTimeout(function() {
          if (fp && fp.calendarContainer && fp.calendarContainer.classList.contains('open')) fp.close();
        }, 50);
      }
      window.addEventListener('scroll', closeOnScroll, true);
      document.addEventListener('scroll', closeOnScroll, true);
    })();

    // Initialize passengers dropdown for home form
    (function initHomePassengersDropdown() {
      const passengersInput = document.getElementById('transparent-passengers-home');
      const passengersDropdown = document.getElementById('transparent-passengers-dropdown-home');
      
      if (!passengersInput || !passengersDropdown) return;
      
      // Passenger counts for home form
      var transparentPaxCountsHome = {
        adults: 1,
        children: 0,
        infants: 0
      };
      
      // Ensure default value is set
      if (transparentPaxCountsHome.adults === 0) {
        transparentPaxCountsHome.adults = 1;
      }
      
      // Function to update passengers label (line 1: "Guest and Cabin", line 2: "1 Guest, Economy")
      function updateHomePassengersLabel() {
        if (!passengersInput) return;
        var total = transparentPaxCountsHome.adults + transparentPaxCountsHome.children + transparentPaxCountsHome.infants;
        if (total < 1) {
          transparentPaxCountsHome.adults = 1;
          total = 1;
        }
        var cabinInput = document.getElementById('transparent-class-home-2');
        var cabinText = (cabinInput && cabinInput.value) ? cabinInput.value : 'Economy';
        var valueText = total + (total === 1 ? ' Passenger' : ' Passengers') + ', ' + cabinText;
        passengersInput.value = valueText;
        var label = passengersInput.previousElementSibling;
        if (label && label.tagName === 'LABEL') {
          var labelSpan = label.querySelector('.label');
          if (labelSpan) labelSpan.textContent = 'Passengers & Cabin';
          label.style.opacity = '1';
          label.style.visibility = 'visible';
          label.style.display = 'flex';
        }
      }
      
      // Function to update passengers display
      function updateHomePassengersDisplay() {
        var adultVal = document.getElementById('pax-adult-val-home');
        var childVal = document.getElementById('pax-child-val-home');
        var infantVal = document.getElementById('pax-infant-val-home');
        var adultMinus = document.getElementById('pax-adult-minus-home');
        var childMinus = document.getElementById('pax-child-minus-home');
        var infantMinus = document.getElementById('pax-infant-minus-home');
        
        if (adultVal) adultVal.textContent = transparentPaxCountsHome.adults;
        if (childVal) childVal.textContent = transparentPaxCountsHome.children;
        if (infantVal) infantVal.textContent = transparentPaxCountsHome.infants;
        
        if (adultMinus) adultMinus.disabled = transparentPaxCountsHome.adults <= 1;
        if (childMinus) childMinus.disabled = transparentPaxCountsHome.children <= 0;
        if (infantMinus) infantMinus.disabled = transparentPaxCountsHome.infants <= 0;
        
        updateHomePassengersLabel();
        
        // Update hidden fields
        var adultsHidden = document.getElementById('passengers-adults');
        var childrenHidden = document.getElementById('passengers-children');
        var infantsHidden = document.getElementById('passengers-infants');
        if (adultsHidden) adultsHidden.value = transparentPaxCountsHome.adults;
        if (childrenHidden) childrenHidden.value = transparentPaxCountsHome.children;
        if (infantsHidden) infantsHidden.value = transparentPaxCountsHome.infants;
      }
      
      function positionHomePassengersDropdown() {
        if (!passengersDropdown || !passengersInput) return;
        if (!passengersDropdown.classList.contains('open')) return;
        var rect = passengersInput.getBoundingClientRect();
        var searchArea = passengersInput.closest('.transparent-home-search') || passengersInput.closest('.transparent-flight-search');
        if (searchArea) {
          var sa = searchArea.getBoundingClientRect();
          passengersDropdown.style.left = sa.left + 'px';
          passengersDropdown.style.width = sa.width + 'px';
          passengersDropdown.style.minWidth = sa.width + 'px';
        } else {
          passengersDropdown.style.left = rect.left + 'px';
          passengersDropdown.style.width = '';
          passengersDropdown.style.minWidth = '';
        }
        passengersDropdown.style.top = (rect.bottom + 8) + 'px';
      }
      // Function to open passengers dropdown
      function openHomePassengersDropdown() {
        if (!passengersDropdown || !passengersInput) return;
        updateHomePassengersDisplay();
        var cabinEconomy = document.querySelector('input[name="cabin-home"][value="Economy"]');
        if (cabinEconomy) cabinEconomy.checked = true;
        
        // Close calendar if open
        var calendar = document.getElementById('ek-calendar');
        if (calendar && calendar.style.display !== 'none') {
          if (typeof window.hideCalendarModal === 'function') {
            window.hideCalendarModal();
          }
        }
        
        // Close class dropdown if open (legacy)
        var otherDropdown = document.getElementById('transparent-class-dropdown-home-2');
        if (otherDropdown && otherDropdown.classList.contains('open')) {
          otherDropdown.classList.remove('open');
        }
        
        passengersDropdown.classList.add('open');
        if (passengersDropdown.parentNode !== document.body) {
          document.body.appendChild(passengersDropdown);
        }
        positionHomePassengersDropdown();
      }
      
      // Function to close passengers dropdown
      function closeHomePassengersDropdown() {
        if (passengersDropdown) {
          passengersDropdown.classList.remove('open');
        }
      }
      
      // Add click event listener (whole field for Etihad layout)
      var guestsField = passengersInput ? passengersInput.closest('.etihad-field-guests') : null;
      var clickTarget = guestsField || passengersInput;
      if (clickTarget) {
        clickTarget.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          if (passengersDropdown.classList.contains('open')) {
            closeHomePassengersDropdown();
          } else {
            openHomePassengersDropdown();
          }
        });
      }
      
      // Add event listeners for +/- buttons
      var adultPlus = document.getElementById('pax-adult-plus-home');
      var adultMinus = document.getElementById('pax-adult-minus-home');
      var childPlus = document.getElementById('pax-child-plus-home');
      var childMinus = document.getElementById('pax-child-minus-home');
      
      if (adultPlus) {
        adultPlus.addEventListener('click', function(e) {
          e.stopPropagation();
          transparentPaxCountsHome.adults++;
          updateHomePassengersDisplay();
        });
      }
      if (adultMinus) {
        adultMinus.addEventListener('click', function(e) {
          e.stopPropagation();
          if (transparentPaxCountsHome.adults > 1) {
            transparentPaxCountsHome.adults--;
            updateHomePassengersDisplay();
          }
        });
      }
      if (childPlus) {
        childPlus.addEventListener('click', function(e) {
          e.stopPropagation();
          transparentPaxCountsHome.children++;
          updateHomePassengersDisplay();
        });
      }
      if (childMinus) {
        childMinus.addEventListener('click', function(e) {
          e.stopPropagation();
          if (transparentPaxCountsHome.children > 0) {
            transparentPaxCountsHome.children--;
            updateHomePassengersDisplay();
          }
        });
      }
      var infantPlus = document.getElementById('pax-infant-plus-home');
      var infantMinus = document.getElementById('pax-infant-minus-home');
      if (infantPlus) {
        infantPlus.addEventListener('click', function(e) {
          e.stopPropagation();
          transparentPaxCountsHome.infants++;
          updateHomePassengersDisplay();
        });
      }
      if (infantMinus) {
        infantMinus.addEventListener('click', function(e) {
          e.stopPropagation();
          if (transparentPaxCountsHome.infants > 0) {
            transparentPaxCountsHome.infants--;
            updateHomePassengersDisplay();
          }
        });
      }
      // Cabin radio sync
      var cabinRadios = document.querySelectorAll('input[name="cabin-home"]');
      cabinRadios.forEach(function(radio) {
        radio.addEventListener('change', function() {
          var class2Field = document.getElementById('transparent-class-home-2');
          var classSelect = document.getElementById('class');
          var cabinToClass = { Economy: 'Economy Class', 'Premium Economy': 'Premium Economy', Business: 'Business Class', First: 'First Class' };
          var classValue = cabinToClass[this.value] || 'Economy Class';
          if (class2Field) class2Field.value = this.value;
          if (classSelect) classSelect.value = classValue;
          updateHomePassengersLabel();
        });
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (passengersDropdown && passengersDropdown.classList.contains('open')) {
          var triggerEl = guestsField || passengersInput;
          if (!passengersDropdown.contains(e.target) && !(triggerEl && triggerEl.contains(e.target))) {
            closeHomePassengersDropdown();
          }
        }
      });
      var passengersScrollRaf = null;
      function onPassengersScrollResize() {
        if (!passengersDropdown || !passengersDropdown.classList.contains('open')) return;
        if (passengersScrollRaf) return;
        passengersScrollRaf = requestAnimationFrame(function() {
          passengersScrollRaf = null;
          positionHomePassengersDropdown();
        });
      }
      window.addEventListener('scroll', onPassengersScrollResize, { passive: true, capture: true });
      window.addEventListener('resize', onPassengersScrollResize);
      
      // Initialize display
      var adultVal = document.getElementById('pax-adult-val-home');
      var childVal = document.getElementById('pax-child-val-home');
      var infantVal = document.getElementById('pax-infant-val-home');
      var adultMinus = document.getElementById('pax-adult-minus-home');
      var childMinus = document.getElementById('pax-child-minus-home');
      var infantMinus = document.getElementById('pax-infant-minus-home');
      
      if (adultVal) adultVal.textContent = transparentPaxCountsHome.adults;
      if (childVal) childVal.textContent = transparentPaxCountsHome.children;
      if (infantVal) infantVal.textContent = transparentPaxCountsHome.infants;
      
      if (adultMinus) adultMinus.disabled = transparentPaxCountsHome.adults <= 1;
      if (childMinus) childMinus.disabled = transparentPaxCountsHome.children <= 0;
      if (infantMinus) infantMinus.disabled = transparentPaxCountsHome.infants <= 0;
      
      // Update hidden fields
      var adultsHidden = document.getElementById('passengers-adults');
      var childrenHidden = document.getElementById('passengers-children');
      var infantsHidden = document.getElementById('passengers-infants');
      if (adultsHidden) adultsHidden.value = transparentPaxCountsHome.adults;
      if (childrenHidden) childrenHidden.value = transparentPaxCountsHome.children;
      if (infantsHidden) infantsHidden.value = transparentPaxCountsHome.infants;
      
      updateHomePassengersLabel();
    })();

    // Initialize class dropdown 2 for home form
    (function initHomeClassDropdown2() {
      const classInput2 = document.getElementById('transparent-class-home-2');
      const classDropdown2 = document.getElementById('transparent-class-dropdown-home-2');
      
      if (!classInput2 || !classDropdown2) return;
      
      var selectedClass2 = 'Economy'; // Default value
      
      // Function to update class label
      function updateHomeClassLabel2() {
        if (!classInput2) return;
        var label = classInput2.nextElementSibling;
        if (label && label.tagName === 'LABEL') {
          var labelSpan = label.querySelector('.label');
          if (labelSpan) {
            labelSpan.textContent = selectedClass2 || 'Economy';
            // Ensure label is visible
            label.style.opacity = '1';
            label.style.visibility = 'visible';
            label.style.display = 'flex';
          }
        }
      }
      
      // Function to open class dropdown
      function openHomeClassDropdown2() {
        if (!classDropdown2 || !classInput2) return;
        
        // Close calendar if open
        var calendar = document.getElementById('ek-calendar');
        if (calendar && calendar.style.display !== 'none') {
          if (typeof window.hideCalendarModal === 'function') {
            window.hideCalendarModal();
          }
        }
        
        // Close other dropdowns if open
        var otherDropdown = document.getElementById('transparent-passengers-dropdown-home');
        if (otherDropdown && otherDropdown.classList.contains('open')) {
          otherDropdown.classList.remove('open');
        }
        
        var rect = classInput2.getBoundingClientRect();
        classDropdown2.style.left = rect.left + 'px';
        classDropdown2.style.top = (rect.bottom + 8) + 'px';
        classDropdown2.classList.add('open');
        
        // Ensure dropdown is appended to body for correct positioning
        if (classDropdown2.parentNode !== document.body) {
          document.body.appendChild(classDropdown2);
        }
      }
      
      // Function to close class dropdown
      function closeHomeClassDropdown2() {
        if (classDropdown2) {
          classDropdown2.classList.remove('open');
        }
      }
      
      // Add click event listener to input
      if (classInput2) {
        classInput2.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          if (classDropdown2.classList.contains('open')) {
            closeHomeClassDropdown2();
          } else {
            openHomeClassDropdown2();
          }
        });
      }
      
      // Add event listeners for class rows (entire row is clickable)
      var classRows = classDropdown2.querySelectorAll('.transparent-passengers-row');
      classRows.forEach(function(row) {
        row.style.cursor = 'pointer';
        row.addEventListener('click', function(e) {
          e.stopPropagation();
          selectedClass2 = row.getAttribute('data-value');
          updateHomeClassLabel2();
          closeHomeClassDropdown2();
          
          // Sync with hidden class field if it exists
          var hiddenClassField = document.getElementById('class');
          if (hiddenClassField) {
            hiddenClassField.value = selectedClass2;
          }
          var class2Field = document.getElementById('transparent-class-home-2');
          if (class2Field) {
            class2Field.value = selectedClass2;
          }
          if (typeof updateHomePassengersLabel === 'function') {
            updateHomePassengersLabel();
          }
        });
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (classDropdown2 && classDropdown2.classList.contains('open')) {
          if (!classDropdown2.contains(e.target) && !classInput2.contains(e.target)) {
            closeHomeClassDropdown2();
          }
        }
      });
      
      // Initialize label
      updateHomeClassLabel2();
      
      // Sync with hidden class field if it exists
      var hiddenClassField = document.getElementById('class');
      if (hiddenClassField) {
        hiddenClassField.value = selectedClass2;
      }
    })();


    function extractCode(val) {
      if (!val) return '';
      var m = val.match(/\(([A-Z]{3})\)/);
      if (m) return m[1];
      var m2 = val.match(/,\s*([A-Z]{3})\s*$/);
      return m2 ? m2[1] : val;
    }

    function escapeHtml(s) {
      if (s == null || s === undefined) return '';
      return String(s).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
    }

    var DAYS_SHORT_GRID = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
    var MONTHS_SHORT_GRID = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    function renderDatesGrid(originCode, destCode, depDate, data) {
      var gridEl = document.getElementById('flight-results-dates-grid');
      if (!gridEl) return;
      var flights = data.data || [];
      if (!flights.length || !depDate || !/^\d{4}-\d{2}-\d{2}$/.test(depDate)) {
        gridEl.innerHTML = '';
        return;
      }
      var currency = (flights[0].price && flights[0].price.currency) ? flights[0].price.currency : 'PKR';
      var basePrice = Infinity;
      flights.forEach(function(f) {
        var p = f.price && f.price.total ? parseFloat(f.price.total, 10) : 0;
        if (p > 0 && p < basePrice) basePrice = p;
      });
      if (basePrice === Infinity || basePrice <= 0) basePrice = 80000;
      var parts = depDate.split('-').map(Number);
      var selDate = new Date(parts[0], parts[1] - 1, parts[2]);
      if (isNaN(selDate.getTime())) { gridEl.innerHTML = ''; return; }
      var toYMD = function(d) {
        var y = d.getFullYear(), m = d.getMonth(), day = d.getDate();
        return y + '-' + ('0' + (m + 1)).slice(-2) + '-' + ('0' + day).slice(-2);
      };
      var fmtCardDate = function(d) {
        return DAYS_SHORT_GRID[d.getDay()] + ', ' + ('0' + d.getDate()).slice(-2) + ' ' + MONTHS_SHORT_GRID[d.getMonth()];
      };
      var items = [];
      for (var i = -3; i <= 3; i++) {
        var d = new Date(selDate);
        d.setDate(d.getDate() + i);
        var seed = Math.abs(d.getTime() % 1000);
        var mult = 0.88 + (seed / 1000) * 0.5;
        var price = Math.round(basePrice * mult / 500) * 500;
        if (price < 5000) price = Math.round(basePrice * 0.9);
        items.push({
          date: d,
          ymd: toYMD(d),
          label: fmtCardDate(d),
          price: price,
          isSelected: i === 0
        });
      }
      var minPrice = Math.min.apply(null, items.map(function(x) { return x.price; }));
      var html = '';
      items.forEach(function(it) {
        var priceCls = it.price === minPrice ? ' lowest' : '';
        var cardCls = it.isSelected ? ' selected' : '';
        html += '<div class="flight-result-date-card' + cardCls + '" data-date="' + escapeHtml(it.ymd) + '" data-origin="' + escapeHtml(originCode) + '" data-dest="' + escapeHtml(destCode) + '">' +
          '<div class="flight-result-date-card-date">' + escapeHtml(it.label) + '</div>' +
          '<div class="flight-result-date-card-price' + priceCls + '">' + currency + ' ' + it.price.toLocaleString() + '</div></div>';
      });
      gridEl.innerHTML = html;
    }

    function renderFlights(data, listEl, destName, skipClientSort) {
      var flights = data.data || [];
      var isDemo = data.meta && data.meta.demo === true;
      var demoBanner = isDemo ? '<p class="flight-results-demo-banner">Showing sample flights. Use today\'s date for real-time data from AviationStack.</p>' : '';
      
      // Apply current filter (skip when inline filters handle sort)
      if (!skipClientSort && typeof window.getCurrentFilter === 'function') {
        var filter = window.getCurrentFilter();
        if (filter === 'cheapest') {
          flights = flights.slice().sort(function(a, b) {
            return parseFloat(a.price.total) - parseFloat(b.price.total);
          });
        } else if (filter === 'quickest') {
          flights = flights.slice().sort(function(a, b) {
            var durationA = a.itineraries[0].duration || 'PT999H';
            var durationB = b.itineraries[0].duration || 'PT999H';
            return durationA.localeCompare(durationB);
          });
        } else {
          // 'best' - balanced score
          flights = flights.slice().sort(function(a, b) {
            var parseDur = function(d) {
              if (!d) return 999;
              var m = d.match(/PT(\d+)H(\d+)?M?/);
              if (!m) return 999;
              return parseInt(m[1] || 0) * 60 + parseInt(m[2] || 0);
            };
            var scoreA = parseFloat(a.price.total) + (parseDur(a.itineraries[0].duration) / 60);
            var scoreB = parseFloat(b.price.total) + (parseDur(b.itineraries[0].duration) / 60);
            return scoreA - scoreB;
          });
        }
      }
      var dict = data.dictionaries || {};
      var carriers = dict.carriers || {};
      var aircraft = dict.aircraft || {};
      var html = '';
      flights.forEach(function(f) {
        var seg = (f.itineraries && f.itineraries[0] && f.itineraries[0].segments && f.itineraries[0].segments[0]) || {};
        var dep = seg.departure || {};
        var arr = seg.arrival || {};
        var depTime = (dep.at || '').slice(11, 16) || '--:--';
        var arrTime = (arr.at || '').slice(11, 16) || '--:--';
        var code = (f.validatingAirlineCodes && f.validatingAirlineCodes[0]) || seg.carrierCode || '';
        var name = carriers[code] || code;
        var logoUrl = getAirlineLogoUrl(code);
        var totalNum = f.price && f.price.total ? parseInt(f.price.total, 10) : 0;
        var price = totalNum ? (f.price.currency + ' ' + totalNum.toLocaleString()) : 'N/A';
        var dur = (f.itineraries && f.itineraries[0] && f.itineraries[0].duration) ? f.itineraries[0].duration.replace('PT', '').replace('H', 'h ').replace('M', 'm') : '';
        var flightNum = (seg.carrierCode || '') + (seg.number || '');
        var aircraftName = seg.aircraft && seg.aircraft.code ? (aircraft[seg.aircraft.code] || seg.aircraft.code) : '';
        var segCount = (f.itineraries && f.itineraries[0] && f.itineraries[0].segments) ? f.itineraries[0].segments.length : 1;
        var stopText = segCount <= 1 ? 'Nonstop' : (segCount - 1) + ' stop' + (segCount > 2 ? 's' : '');
        var depDateStr = '';
        if (dep.at && dep.at.length >= 10) {
          var y = parseInt(dep.at.slice(0, 4), 10), m = parseInt(dep.at.slice(5, 7), 10) - 1, d = parseInt(dep.at.slice(8, 10), 10);
          var dt = new Date(y, m, d);
          if (!isNaN(dt.getTime())) {
            depDateStr = DAYS_SHORT_GRID[dt.getDay()] + ', ' + MONTHS_SHORT_GRID[dt.getMonth()] + ' ' + ('0' + dt.getDate()).slice(-2) + ', ' + dt.getFullYear();
          }
        }

        html += '<div class="flight-result-card">' +
          '<div class="flight-result-airline-wrap"><img src="' + logoUrl + '" alt="' + (name || 'Airline') + ' logo" class="flight-result-airline-logo" onerror="this.onerror=null;this.src=\'/src/assets/icons/airline-logos/placeholder.svg\'" /><span class="flight-result-airline">' + name + '</span>' + (flightNum ? '<span class="flight-result-number">' + flightNum + '</span>' : '') + '</div>' +
          '<div class="flight-result-depart"><span class="flight-result-time">' + depTime + '</span><span class="flight-result-code">' + (dep.iataCode || '') + '</span></div>' +
          '<div class="flight-result-duration-wrap"><span class="flight-result-duration">' + dur + (aircraftName ? ' · ' + aircraftName : '') + '</span><span class="flight-result-stops">' + stopText + '</span>' + (depDateStr ? '<span class="flight-result-date">' + depDateStr + '</span>' : '') + '</div>' +
          '<div class="flight-result-arrive"><span class="flight-result-time">' + arrTime + '</span><span class="flight-result-code">' + (arr.iataCode || '') + '</span></div>' +
          '<div class="flight-result-price-wrap"><span class="flight-result-price">' + price + '</span><span class="flight-result-class">Economy</span><button type="button" class="btn-book-now">Select</button></div></div>';
      });
      listEl.innerHTML = html || '<p class="flight-results-empty">No flights found. Try different dates or airports.</p>';
    }

    function clearValidationState() {
      document.querySelectorAll('.airport-input.invalid, .ek-date-trigger.invalid, .hero-date-trigger.invalid, .transparent-input.invalid, .transparent-search-field.invalid, .transparent-search-field.has-error, .etihad-field.invalid, .etihad-field.has-error').forEach(function(el) { el.classList.remove('invalid', 'has-error'); });
      document.querySelectorAll('.validation-error-msg').forEach(function(el) { el.textContent = ''; });
      var overlay = document.getElementById('validation-alert-overlay');
      var msgEl = document.getElementById('validation-alert-msg');
      if (overlay) overlay.classList.remove('visible');
      if (msgEl) msgEl.textContent = '';
    }

    function showValidationError(message, fieldIds) {
      clearValidationState();
      var overlay = document.getElementById('validation-alert-overlay');
      var msgEl = document.getElementById('validation-alert-msg');
      if (overlay && msgEl) {
        msgEl.textContent = message;
        overlay.classList.add('visible');
      }
      (fieldIds || []).forEach(function(id) {
        var el = document.getElementById(id) || document.querySelector('[data-target="' + id + '"]');
        if (el) {
          el.classList.add('invalid');
          var field = el.closest('.transparent-search-field');
          if (field) {
            field.classList.add('invalid', 'has-error');
            var errMsg = field.querySelector('.validation-error-msg');
            if (errMsg) errMsg.textContent = message;
          }
          var etihadField = el.closest('.etihad-field');
          if (etihadField) etihadField.classList.add('invalid', 'has-error');
        } else {
          document.querySelectorAll('.' + id).forEach(function(e) { e.classList.add('invalid'); });
        }
      });
    }

    (function initValidationAlert() {
      var overlay = document.getElementById('validation-alert-overlay');
      var okBtn = document.getElementById('validation-alert-ok');
      function hideAlert() {
        if (overlay) overlay.classList.remove('visible');
      }
      if (okBtn) okBtn.addEventListener('click', hideAlert);
      if (overlay) overlay.addEventListener('click', function(e) {
        if (e.target === overlay) hideAlert();
      });
    })();

    function validateFlightSearch() {
      var tripType = document.querySelector('input[name="trip"]:checked');
      var isMulti = tripType && tripType.value === 'multicity';
      var card = document.querySelector('.flight-search-card');

      if (isMulti) {
        var segments = document.querySelectorAll('.flight-search-segment');
        var lastDate = '';
        for (var i = 0; i < segments.length; i++) {
          var seg = segments[i];
          var fromInp = seg.querySelector('.mc-from');
          var toInp = seg.querySelector('.mc-to');
          var dateInp = document.getElementById('mc-date-' + i);
          var fromVal = fromInp ? fromInp.value : '';
          var toVal = toInp ? toInp.value : '';
          var dateVal = dateInp ? dateInp.value : '';
          var fromCode = extractCode(fromVal);
          var toCode = extractCode(toVal);
          if (!fromCode) {
            showValidationError('Please select departure airport for Flight ' + (i + 1) + '.');
            if (fromInp) fromInp.classList.add('invalid');
            if (i === 0) { var h = document.getElementById('from-hero'); if (h) h.classList.add('invalid'); }
            return false;
          }
          if (!toCode) {
            showValidationError('Please select arrival airport for Flight ' + (i + 1) + '.');
            if (toInp) toInp.classList.add('invalid');
            if (i === 0) { var h = document.getElementById('to-hero'); if (h) h.classList.add('invalid'); }
            return false;
          }
          if (fromCode === toCode) {
            showValidationError('Departure and arrival cannot be the same for Flight ' + (i + 1) + '.');
            if (fromInp) fromInp.classList.add('invalid');
            if (toInp) toInp.classList.add('invalid');
            if (i === 0) {
              var fh = document.getElementById('from-hero'); var th = document.getElementById('to-hero');
              if (fh) fh.classList.add('invalid'); if (th) th.classList.add('invalid');
            }
            return false;
          }
          if (!dateVal) {
            showValidationError('Please select a date for Flight ' + (i + 1) + '.');
            var mcTrig = seg.querySelector('.mc-date');
            if (mcTrig) mcTrig.classList.add('invalid');
            if (i === 0) { var ht = document.getElementById('hero-date-trigger'); if (ht) ht.classList.add('invalid'); }
            return false;
          }
          if (lastDate && dateVal < lastDate) {
            showValidationError('Flight ' + (i + 1) + ' date must be on or after the previous flight date.');
            var mcTrig = seg.querySelector('.mc-date');
            if (mcTrig) mcTrig.classList.add('invalid');
            if (i === 0) { var ht = document.getElementById('hero-date-trigger'); if (ht) ht.classList.add('invalid'); }
            return false;
          }
          lastDate = dateVal;
        }
        clearValidationState();
        return true;
      }

      var fromVal = document.getElementById('from').value;
      var toVal = document.getElementById('to').value;
      var depDate = document.getElementById('departure').value;
      var retDate = document.getElementById('return-date').value;
      var originCode = extractCode(fromVal);
      var destCode = extractCode(toVal);
      var oneWay = tripType && tripType.value === 'oneway';

      if (!originCode) {
        showValidationError('Please select a departure airport.', ['from-hero', 'transparent-txtOriginFull-home', 'transparent-txtOriginFull-popup']);
        return false;
      }
      if (!destCode) {
        showValidationError('Please select an arrival airport.', ['to-hero', 'transparent-txtDestinationFull-home', 'transparent-txtDestinationFull-popup']);
        return false;
      }
      if (originCode === destCode) {
        showValidationError('Departure and arrival airports cannot be the same.', ['from-hero', 'to-hero', 'transparent-txtOriginFull-home', 'transparent-txtDestinationFull-home', 'transparent-txtOriginFull-popup', 'transparent-txtDestinationFull-popup']);
        return false;
      }
      if (!depDate) {
        showValidationError('Please select a departure date.', ['hero-date-trigger', 'transparent-depart-date-home', 'transparent-depart-date-popup']);
        return false;
      }
      if (!oneWay && !retDate) {
        showValidationError('Please select a return date for round-trip.', ['transparent-depart-date-home', 'transparent-return-date-home-input', 'transparent-depart-date-popup', 'transparent-return-date-popup-input']);
        return false;
      }
      if (!oneWay && retDate && depDate && retDate < depDate) {
        showValidationError('Return date must be on or after departure date.', ['transparent-depart-date-home', 'transparent-return-date-home-input', 'transparent-depart-date-popup', 'transparent-return-date-popup-input']);
        return false;
      }
      var adults = parseInt(document.getElementById('passengers-adults').value, 10) || 0;
      var infants = parseInt(document.getElementById('passengers-infants').value, 10) || 0;
      var prefix = isMulti ? 'mc-passengers' : 'passengers';
      adults = isMulti ? (parseInt(document.getElementById('mc-passengers-adults').value, 10) || 0) : adults;
      infants = isMulti ? (parseInt(document.getElementById('mc-passengers-infants').value, 10) || 0) : infants;
      if (adults < 1) {
        showValidationError('At least 1 adult passenger is required.', ['transparent-passengers-home', 'transparent-passengers-popup']);
        return false;
      }
      if (infants > adults) {
        showValidationError('Infants cannot exceed the number of adults (1 infant per adult).', ['transparent-passengers-home', 'transparent-passengers-popup']);
        return false;
      }
      clearValidationState();
      return true;
    }

    (function initValidationClearListeners() {
      function clearFieldInvalid(e) {
        var t = e.target;
        var isSearchField = t.classList && (t.classList.contains('airport-input') || t.classList.contains('ek-date-trigger') || t.classList.contains('hero-date-trigger') || t.classList.contains('transparent-input')) || t.id === 'departure' || t.id === 'return-date';
        if (isSearchField) {
          t.classList.remove('invalid');
          var field = t.closest('.transparent-search-field');
          if (field) {
            field.classList.remove('invalid', 'has-error');
            var errMsg = field.querySelector('.validation-error-msg');
            if (errMsg) errMsg.textContent = '';
          }
          var etihadField = t.closest('.etihad-field');
          if (etihadField) etihadField.classList.remove('invalid', 'has-error');
          if (t.id === 'departure' || t.id === 'return-date') {
            var depDisplay = document.getElementById('transparent-depart-date-home');
            if (depDisplay) {
              depDisplay.classList.remove('invalid');
              var f = depDisplay.closest('.transparent-search-field');
              if (f) f.classList.remove('invalid', 'has-error');
              var ef = depDisplay.closest('.etihad-field');
              if (ef) ef.classList.remove('invalid', 'has-error');
            }
          }
        }
        var isPassengers = t.id === 'transparent-passengers-home' || (t.closest && t.closest('.etihad-field-guests')) || t.id === 'passengers-adults' || t.id === 'passengers-children' || t.id === 'passengers-infants';
        if (isPassengers) {
          var guestsField = document.querySelector('.etihad-field-guests');
          if (guestsField) guestsField.classList.remove('invalid', 'has-error');
          var guestsInput = document.getElementById('transparent-passengers-home');
          if (guestsInput) guestsInput.classList.remove('invalid');
          var overlay = document.getElementById('validation-alert-overlay');
          if (overlay) overlay.classList.remove('visible');
        }
      }
      var form = document.getElementById('flight-search-form');
      if (form) {
        form.addEventListener('input', clearFieldInvalid);
        form.addEventListener('change', clearFieldInvalid);
        form.addEventListener('focus', clearFieldInvalid, true);
        form.addEventListener('click', clearFieldInvalid, true);
      }
      var heroBar = document.querySelector('.hero-search-bar');
      if (heroBar) {
        heroBar.addEventListener('input', clearFieldInvalid);
        heroBar.addEventListener('change', clearFieldInvalid);
        heroBar.addEventListener('focus', clearFieldInvalid, true);
        heroBar.addEventListener('click', clearFieldInvalid, true);
      }
      document.addEventListener('input', function(e) {
        if (e.target.closest('#transparent-search-form-home, #transparent-search-form-popup, .transparent-flight-search')) clearFieldInvalid(e);
      });
      document.addEventListener('change', function(e) {
        if (e.target.closest('#transparent-search-form-home, #transparent-search-form-popup, .transparent-flight-search')) clearFieldInvalid(e);
      });
      document.addEventListener('focus', function(e) {
        if (e.target.closest('#transparent-search-form-home, #transparent-search-form-popup, .transparent-flight-search')) clearFieldInvalid(e);
      }, true);
      document.addEventListener('click', function(e) {
        if (e.target.closest('#transparent-search-form-home, #transparent-search-form-popup, .transparent-flight-search')) clearFieldInvalid(e);
      }, true);
    })();

    // Flight results filter tabs
    (function initFilterTabs() {
      var filterTabs = document.querySelectorAll('.filter-tab');
      var currentFilter = 'best';
      var cachedData = null;

      filterTabs.forEach(function(tab) {
        tab.addEventListener('click', function() {
          var filter = this.getAttribute('data-filter');
          if (filter === currentFilter) return;
          
          currentFilter = filter;
          filterTabs.forEach(function(t) { t.classList.remove('active'); });
          this.classList.add('active');
          
          if (cachedData && cachedData.data && cachedData.data.length > 0) {
            sortAndDisplayResults(cachedData, filter);
          }
        });
      });

      function sortAndDisplayResults(data, filter) {
        var sorted = (data.data || []).slice();
        
        if (filter === 'cheapest') {
          sorted.sort(function(a, b) {
            return parseFloat(a.price.total) - parseFloat(b.price.total);
          });
        } else if (filter === 'quickest') {
          sorted.sort(function(a, b) {
            var durationA = a.itineraries[0].duration || 'PT999H';
            var durationB = b.itineraries[0].duration || 'PT999H';
            return durationA.localeCompare(durationB);
          });
        } else {
          // 'best' - balanced score (price + duration)
          sorted.sort(function(a, b) {
            var scoreA = parseFloat(a.price.total) + (parseDuration(a.itineraries[0].duration) / 60);
            var scoreB = parseFloat(b.price.total) + (parseDuration(b.itineraries[0].duration) / 60);
            return scoreA - scoreB;
          });
        }
        
        var listEl = document.getElementById('flight-results-list-popup');
        if (listEl) renderFlights({ data: sorted, dictionaries: data.dictionaries || {} }, listEl, '');
      }

      function parseDuration(duration) {
        if (!duration) return 999;
        var match = duration.match(/PT(\d+)H(\d+)?M?/);
        if (!match) return 999;
        var hours = parseInt(match[1] || 0);
        var minutes = parseInt(match[2] || 0);
        return hours * 60 + minutes;
      }

      function formatPrice(price, currency) {
        var num = parseInt(price, 10);
        return (currency || 'Rs') + num.toLocaleString();
      }

      function updateTabPrices(results) {
        if (!results || results.length === 0) {
          document.getElementById('filter-cheapest-price').textContent = '-';
          document.getElementById('filter-best-price').textContent = '-';
          document.getElementById('filter-quickest-price').textContent = '-';
          return;
        }

        var currency = results[0].price.currency || 'Rs';

        // Cheapest - lowest price
        var cheapest = results.slice().sort(function(a, b) {
          return parseFloat(a.price.total) - parseFloat(b.price.total);
        })[0];
        
        // Quickest - shortest duration
        var quickest = results.slice().sort(function(a, b) {
          var durationA = a.itineraries[0].duration || 'PT999H';
          var durationB = b.itineraries[0].duration || 'PT999H';
          return durationA.localeCompare(durationB);
        })[0];
        
        // Best - balanced score
        var best = results.slice().sort(function(a, b) {
          var scoreA = parseFloat(a.price.total) + (parseDuration(a.itineraries[0].duration) / 60);
          var scoreB = parseFloat(b.price.total) + (parseDuration(b.itineraries[0].duration) / 60);
          return scoreA - scoreB;
        })[0];

        document.getElementById('filter-cheapest-price').textContent = formatPrice(cheapest.price.total, currency);
        document.getElementById('filter-best-price').textContent = formatPrice(best.price.total, currency);
        document.getElementById('filter-quickest-price').textContent = formatPrice(quickest.price.total, currency);
      }

      window.setCachedResults = function(data) {
        cachedData = data;
        var results = data && data.data ? data.data : [];
        updateTabPrices(results);
      };

      window.getCurrentFilter = function() {
        return currentFilter;
      };
    })();

    (function initInlineFilters() {
      var DEPARTURE_RANGES = {
        'morning': { min: 5, max: 11 },
        'noon': { min: 12, max: 13 },
        'afternoon': { min: 14, max: 17 },
        'evening': { min: 18, max: 20 },
        'late-night': { min: 21, max: 4 }
      };
      function getDepHour(depAt) {
        if (!depAt || depAt.length < 16) return -1;
        var h = parseInt(depAt.slice(11, 13), 10);
        return isNaN(h) ? -1 : h;
      }
      function flightInDepartureRange(flight, rangeKey) {
        var r = DEPARTURE_RANGES[rangeKey];
        if (!r) return true;
        var h = getDepHour((flight.itineraries && flight.itineraries[0] && flight.itineraries[0].segments && flight.itineraries[0].segments[0] && flight.itineraries[0].segments[0].departure) ? flight.itineraries[0].segments[0].departure.at : '');
        if (h < 0) return true;
        if (r.min <= r.max) return h >= r.min && h <= r.max;
        return h >= r.min || h <= r.max;
      }
      function getCarrierCode(flight) {
        var seg = flight.itineraries && flight.itineraries[0] && flight.itineraries[0].segments && flight.itineraries[0].segments[0];
        return (flight.validatingAirlineCodes && flight.validatingAirlineCodes[0]) || (seg && seg.carrierCode) || '';
      }
      window.applyInlineFiltersAndRender = function() {
        var data = window.cachedInlineResults;
        var listEl = document.getElementById('flight-results-list');
        if (!data || !listEl) return;
        var flights = (data.data || []).slice();
        var airlineEls = document.querySelectorAll('input[name="filter-airline"]:checked');
        var airlineVals = [].map.call(airlineEls, function(el) { return el.value; });
        if (airlineVals.length > 0) {
          flights = flights.filter(function(f) { return airlineVals.indexOf(getCarrierCode(f)) >= 0; });
        }
        var depSel = document.getElementById('filter-departure-time');
        var depVal = depSel ? depSel.value : '';
        if (depVal) {
          flights = flights.filter(function(f) { return flightInDepartureRange(f, depVal); });
        }
        var sortSel = document.getElementById('filter-sort-by');
        var sortVal = sortSel ? sortSel.value : 'price-low';
        if (sortVal === 'price-high') {
          flights.sort(function(a, b) { return parseFloat(b.price.total || 0) - parseFloat(a.price.total || 0); });
        } else {
          flights.sort(function(a, b) { return parseFloat(a.price.total || 0) - parseFloat(b.price.total || 0); });
        }
        renderFlights({ data: flights, dictionaries: data.dictionaries || {}, meta: data.meta }, listEl, '', true);
      };
      document.querySelectorAll('input[name="filter-airline"]').forEach(function(el) {
        el.addEventListener('change', function() { window.applyInlineFiltersAndRender(); });
      });
      var sortEl = document.getElementById('filter-sort-by');
      if (sortEl) sortEl.addEventListener('change', function() { window.applyInlineFiltersAndRender(); });
      var depEl = document.getElementById('filter-departure-time');
      if (depEl) depEl.addEventListener('change', function() { window.applyInlineFiltersAndRender(); });
    })();

    (function initFlightResultsPopup() {
      var popup = document.getElementById('flight-results-popup');
      var backdrop = popup ? popup.querySelector('.flight-results-popup-backdrop') : null;
      var closeBtn = popup ? popup.querySelector('.flight-results-popup-close') : null;

      function closePopup() {
        if (popup) {
          popup.classList.remove('visible');
          popup.setAttribute('aria-hidden', 'true');
          document.body.style.overflow = '';
        }
      }

      if (backdrop) backdrop.addEventListener('click', closePopup);
      if (closeBtn) closeBtn.addEventListener('click', closePopup);

      window.showFlightResultsPopup = function() {
        if (popup) {
          popup.classList.add('visible');
          popup.setAttribute('aria-hidden', 'false');
          document.body.style.overflow = 'hidden';
        }
      };
      window.closeFlightResultsPopup = closePopup;
    })();

    var searchForm = document.getElementById('flight-search-form');
    if (searchForm) searchForm.addEventListener('submit', function(e) {
      e.preventDefault();
      clearValidationState();
      if (!validateFlightSearch()) return;

      var tripType = document.querySelector('input[name="trip"]:checked');
      var isMulti = tripType && tripType.value === 'multicity';

      var fromVal = document.getElementById('from').value;
      var toVal = document.getElementById('to').value;
      var depDate = document.getElementById('departure').value;
      var adults = document.getElementById('passengers-adults').value || '1';

      var originCode = extractCode(fromVal);
      var destCode = extractCode(toVal);
      var destName = toVal ? toVal.split('(')[0].trim() : '';

      if (isMulti) {
        var seg0 = document.querySelector('.flight-search-segment[data-segment="0"]');
        var mcFrom = seg0 ? seg0.querySelector('.mc-from') : null;
        var mcTo = seg0 ? seg0.querySelector('.mc-to') : null;
        var mcDate0 = document.getElementById('mc-date-0');
        if (mcFrom && mcTo && mcDate0) {
          originCode = extractCode(mcFrom.value);
          destCode = extractCode(mcTo.value);
          depDate = mcDate0.value;
          destName = mcTo.value ? mcTo.value.split('(')[0].trim() : '';
        }
        adults = document.getElementById('mc-passengers-adults').value || '1';
      }

      var directOnlyEl = document.getElementById('direct-flights-only');
      var directOnly = directOnlyEl && directOnlyEl.checked;

      var resultsSection = document.getElementById('flight-results');
      var listEl = document.getElementById('flight-results-list');
      var headingEl = document.getElementById('flight-results-heading');
      var subEl = document.getElementById('flight-results-sub');
      var loadingOverlay = document.getElementById('flight-search-loading-overlay');
      var btn = document.querySelector('.btn-search-flight');
      var heroBtn = document.getElementById('hero-search-btn');

      if (headingEl) headingEl.textContent = originCode + ' \u2192 ' + destCode;
      if (subEl) subEl.textContent = directOnly ? 'Direct flights only' : '';
      listEl.innerHTML = '';
      var gridEl = document.getElementById('flight-results-dates-grid');
      if (gridEl) gridEl.innerHTML = '';
      document.querySelectorAll('input[name="filter-airline"]').forEach(function(cb) { cb.checked = false; });
      var sortSel = document.getElementById('filter-sort-by');
      if (sortSel) sortSel.value = 'price-low';
      var depSel = document.getElementById('filter-departure-time');
      if (depSel) depSel.value = '';
      if (resultsSection) resultsSection.style.display = 'none';
      if (loadingOverlay) { loadingOverlay.style.display = 'flex'; loadingOverlay.classList.add('visible'); }
      if (btn) { btn.disabled = true; btn.textContent = 'Searching...'; }
      if (heroBtn) { heroBtn.disabled = true; heroBtn.textContent = 'Searching...'; }

      var url = (typeof API_BASE !== 'undefined' ? API_BASE : (window.location.protocol === 'http:' || window.location.protocol === 'https:' ? window.location.origin : 'http://localhost:3000')) + '/api/flight-search-csv?originCode=' + encodeURIComponent(originCode) + '&destinationCode=' + encodeURIComponent(destCode) + '&dateOfDeparture=' + encodeURIComponent(depDate) + '&adults=' + encodeURIComponent(adults);
      if (directOnly) url += '&directOnly=1';

      fetch(url).then(function(r) { return r.json(); }).then(function(data) {
        setTimeout(function() {
          if (loadingOverlay) { loadingOverlay.style.display = 'none'; loadingOverlay.classList.remove('visible'); }
          if (btn) { btn.disabled = false; btn.textContent = 'Search'; }
          if (heroBtn) { heroBtn.disabled = false; heroBtn.textContent = 'Search'; }
          var homeMiddle = document.getElementById('home-middle-content');
          if (homeMiddle) homeMiddle.style.display = 'none';
          if (resultsSection) resultsSection.style.display = 'block';
          var count = (data.data && data.data.length) ? data.data.length : 0;
          if (headingEl) headingEl.textContent = count + ' Flights Found for ' + originCode + ' \u2192 ' + destCode;
          renderDatesGrid(originCode, destCode, depDate, data);
          if (typeof window.applyInlineFiltersAndRender === 'function') {
            window.cachedInlineResults = data;
            window.applyInlineFiltersAndRender();
          } else {
            renderFlights(data, listEl, destName);
          }
          resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 2000);
      }).catch(function() {
        if (loadingOverlay) { loadingOverlay.style.display = 'none'; loadingOverlay.classList.remove('visible'); }
        if (btn) { btn.disabled = false; btn.textContent = 'Search'; }
        if (heroBtn) { heroBtn.disabled = false; heroBtn.textContent = 'Search'; }
        var homeMiddle = document.getElementById('home-middle-content');
        if (homeMiddle) homeMiddle.style.display = 'none';
        if (resultsSection) resultsSection.style.display = 'block';
        listEl.innerHTML = '<p class="flight-results-empty">Cannot load results. Make sure the server is running (node server/app.js).</p>';
        var gridEl = document.getElementById('flight-results-dates-grid');
        if (gridEl) gridEl.innerHTML = '';
        resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    (function() {
      var MONTHS = ['January','February','March','April','May','June','July','August','September','October','November','December'];
      var MONTHS_SHORT = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
      var DAYS_SHORT = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

      function fmtDate(y, m, d) {
        var g = new Date(y, m, d);
        if (isNaN(g.getTime())) return '';
        return ('0' + g.getDate()).slice(-2) + ' ' + MONTHS_SHORT[g.getMonth()] + ' ' + g.getFullYear();
      }
      function fmtDateWithDay(y, m, d) {
        var g = new Date(y, m, d);
        if (isNaN(g.getTime())) return '';
        return DAYS_SHORT[g.getDay()] + ', ' + ('0' + g.getDate()).slice(-2) + ' ' + MONTHS_SHORT[g.getMonth()] + ' ' + g.getFullYear();
      }

      function ymd(s) {
        if (!s || !/^\d{4}-\d{2}-\d{2}$/.test(s)) return null;
        var p = s.split('-').map(Number);
        return { y: p[0], m: p[1] - 1, d: p[2] };
      }

      function toYMD(d) {
        var y = d.getFullYear(), m = d.getMonth(), day = d.getDate();
        return y + '-' + ('0' + (m + 1)).slice(-2) + '-' + ('0' + day).slice(-2);
      }

      function setTrigger(trigger, val, placeholder, useDayFormat) {
        var span = trigger && trigger.querySelector('.ek-date-trigger-text');
        if (!span) return;
        if (val) {
          var x = ymd(val);
          var fmt = (useDayFormat || (trigger && trigger.id === 'hero-date-trigger')) ? fmtDateWithDay : fmtDate;
          span.textContent = x ? fmt(x.y, x.m, x.d) : val;
          trigger.classList.remove('placeholder');
        } else {
          span.textContent = placeholder || 'Please choose date';
          trigger.classList.add('placeholder');
        }
      }

      function updateRangeTriggerText() {
        var depEl = document.getElementById('departure');
        var dep = depEl ? depEl.value : '';
        var heroTrig = document.getElementById('hero-date-trigger');
        if (heroTrig) setTrigger(heroTrig, dep || '', 'Select date');
      }

      var cal = document.getElementById('ek-calendar');
      var calBackdrop = document.getElementById('ek-calendar-backdrop');
      var calTitleEl = document.getElementById('ek-calendar-title');
      var calHeader = document.getElementById('ek-calendar-month-year-single');
      var calGrid = cal ? cal.querySelector('.ek-calendar-single .ek-calendar-grid') : null;
      var calGridM1 = document.getElementById('ek-calendar-grid-m1');
      var calGridM2 = document.getElementById('ek-calendar-grid-m2');
      var calGridM3 = document.getElementById('ek-calendar-grid-m3');
      var panelTitle0 = document.getElementById('ek-calendar-panel-title-0');
      var panelTitle1 = document.getElementById('ek-calendar-panel-title-1');
      var panelTitle2 = document.getElementById('ek-calendar-panel-title-2');
      var calPrevBtns = cal ? cal.querySelectorAll('.ek-calendar-prev') : [];
      var calNextBtns = cal ? cal.querySelectorAll('.ek-calendar-next') : [];
      var currentView = { y: new Date().getFullYear(), m: new Date().getMonth() };
      var activeTarget = null;
      var activeTrigger = null;
      var activePlaceholder = '';
      var rangeMode = false;
      var rangeStep = 0;
      var rangeMinDate = null;
      var twoMonthsMode = false;
      var threeMonthsMode = false;

      function getTodayYMD() { return toYMD(new Date()); }

      function showCalendarModal() {
        var c = cal || document.getElementById('ek-calendar');
        var cb = calBackdrop || document.getElementById('ek-calendar-backdrop');
        if (!c || !cb) return;
        cal = c; calBackdrop = cb;
        if (cb.parentNode !== document.body) document.body.appendChild(cb);
        if (c.parentNode !== document.body) document.body.appendChild(c);
        cb.style.setProperty('display', 'block', 'important');
        cb.style.setProperty('visibility', 'visible', 'important');
        cb.classList.remove('visible');
        cb.offsetHeight;
        cb.classList.add('visible');
        cb.setAttribute('aria-hidden', 'false');
        c.style.setProperty('display', 'block', 'important');
        c.style.setProperty('visibility', 'visible', 'important');
        c.style.setProperty('opacity', '1', 'important');
        c.classList.add('open');
        document.body.style.overflow = 'hidden';
      }

      function hideCalendarModal() {
        if (!cal) return;
        cal.classList.remove('open');
        cal.classList.remove('ek-calendar-twomonths');
        cal.classList.remove('ek-calendar-threemonths');
        cal.style.setProperty('display', 'none', 'important');
        if (calBackdrop) {
          calBackdrop.style.setProperty('display', 'none', 'important');
          calBackdrop.classList.remove('visible');
          calBackdrop.setAttribute('aria-hidden', 'true');
        }
        document.body.style.overflow = '';
        activeTarget = null;
        activeTrigger = null;
        rangeMode = false;
        rangeStep = 0;
        rangeMinDate = null;
        twoMonthsMode = false;
        threeMonthsMode = false;
      }

      function getPriceForDate(ymd) {
        var d = ymd ? new Date(ymd + 'T12:00:00') : null;
        if (!d || isNaN(d.getTime())) return { unavailable: true };
        var dow = d.getDay();
        var day = d.getDate();
        var m = d.getMonth();
        var base = 350000 + (m * 15000) + (day % 7) * 25000 + (dow * 8000);
        var seed = (d.getFullYear() * 10000 + (m + 1) * 100 + day) % 17;
        if (seed === 0) return { unavailable: true };
        var price = base + (seed * 12000);
        var isLowFare = (dow === 1 || dow === 2) && (day % 5 !== 0);
        return { price: price.toLocaleString('en-PK'), isLowFare: isLowFare };
      }
      function buildMonthGridHtml(v, selectedYMD, minDate, withPrices) {
        var first = new Date(v.y, v.m, 1);
        var last = new Date(v.y, v.m + 1, 0);
        var start = (first.getDay() + 6) % 7;
        var days = last.getDate();
        var today = toYMD(new Date());
        var effectiveMin = minDate || today;
        var html = '';
        var i, cls, ymdStr, cur = 1;
        var totalCells = 42;
        for (i = 0; i < totalCells; i++) {
          if (i < start) {
            html += '<span class="ek-calendar-day empty"></span>';
          } else if (cur <= days) {
            ymdStr = v.y + '-' + ('0' + (v.m + 1)).slice(-2) + '-' + ('0' + cur).slice(-2);
            var isPast = ymdStr < today;
            var beforeMin = effectiveMin && ymdStr < effectiveMin;
            cls = 'ek-calendar-day';
            if (ymdStr === today) cls += ' today';
            if (ymdStr === selectedYMD) cls += ' selected';
            if (isPast || beforeMin) cls += ' disabled';
            if (withPrices) {
              cls += ' ek-calendar-day-with-price';
              var priceInfo = getPriceForDate(ymdStr);
              var priceHtml = priceInfo.unavailable
                ? '<span class="ek-calendar-day-price unavailable">–</span>'
                : '<span class="ek-calendar-day-price' + (priceInfo.isLowFare ? ' low-fare' : '') + '">' + priceInfo.price + '</span>';
              html += '<span class="' + cls + '" data-ymd="' + ymdStr + '"><span class="ek-calendar-day-num">' + cur + '</span>' + priceHtml + '</span>';
            } else {
              html += '<span class="' + cls + '" data-ymd="' + ymdStr + '">' + cur + '</span>';
            }
            cur++;
          } else {
            html += '<span class="ek-calendar-day empty"></span>';
          }
        }
        return html;
      }

      function handleCalendarDayClick(e) {
        var day = e.target && e.target.closest ? e.target.closest('.ek-calendar-day') : null;
        if (!day || day.classList.contains('disabled') || day.classList.contains('empty')) return;
        var ymd = day.getAttribute('data-ymd');
        if (!ymd) return;
        e.preventDefault();
        e.stopPropagation();
        if (rangeMode && rangeStep === 1) {
          if (rangeMinDate && ymd < rangeMinDate) return;
          var retHid = document.getElementById('return-date');
          if (retHid) retHid.value = ymd;
          updateRangeTriggerText();
          hideCalendarModal();
          return;
        }
        if (rangeMode && rangeStep === 0) {
          var depHid = document.getElementById('departure');
          if (depHid) { depHid.value = ymd; }
          rangeStep = 1;
          rangeMinDate = ymd;
          updateRangeTriggerText();
          renderCalendarTwoMonths(ymd, ymd);
          return;
        }
        if (!activeTarget || !activeTrigger) return;
        var hid = document.getElementById(activeTarget);
        if (hid) {
          hid.value = ymd;
          if (activeTrigger.id === 'dates-range-trigger' || activeTrigger.id === 'hero-date-trigger') updateRangeTriggerText();
          else setTrigger(activeTrigger, ymd, activePlaceholder);
        }
        hideCalendarModal();
      }

      function attachDayClickListeners(grid) {
        if (!grid) return;
        if (!grid._dayClickDelegated) {
          grid._dayClickDelegated = true;
          grid.addEventListener('click', handleCalendarDayClick);
        }
      }

      function updateCalendarNavState() {
        var atOrBeforeCurrent = currentView.y < new Date().getFullYear() || (currentView.y === new Date().getFullYear() && currentView.m <= new Date().getMonth());
        calPrevBtns.forEach(function(btn) {
          btn.disabled = atOrBeforeCurrent;
          btn.setAttribute('aria-disabled', atOrBeforeCurrent ? 'true' : 'false');
        });
      }

      function renderCalendar(selectedYMD, minDate) {
        if (!calGrid || !calHeader) return;
        var v = currentView;
        calHeader.textContent = MONTHS[v.m] + ' ' + v.y;
        calGrid.innerHTML = buildMonthGridHtml(v, selectedYMD, minDate, false);
        attachDayClickListeners(calGrid);
        updateCalendarNavState();
      }

      function renderCalendarTwoMonths(selectedYMD, minDate) {
        if (!calGridM1 || !calGridM2 || !panelTitle0 || !panelTitle1) return;
        var v = currentView;
        var v2 = v.m === 11 ? { y: v.y + 1, m: 0 } : { y: v.y, m: v.m + 1 };
        panelTitle0.textContent = MONTHS[v.m] + ' ' + v.y;
        panelTitle1.textContent = MONTHS[v2.m] + ' ' + (v2.m === 0 ? v2.y : v.y);
        calGridM1.innerHTML = buildMonthGridHtml(v, selectedYMD, minDate);
        calGridM2.innerHTML = buildMonthGridHtml(v2, selectedYMD, minDate);
        attachDayClickListeners(calGridM1);
        attachDayClickListeners(calGridM2);
        updateCalendarNavState();
      }

      function setCalendarTitle(text) {
        if (calTitleEl) calTitleEl.textContent = text || 'Please choose your departure date';
      }

      function openCalendar(trigger, targetId, placeholder) {
        rangeMode = false;
        rangeStep = 0;
        rangeMinDate = null;
        twoMonthsMode = true;
        cal.classList.add('ek-calendar-twomonths');
        activeTarget = targetId;
        activeTrigger = trigger;
        activePlaceholder = placeholder || 'Please choose date';
        setCalendarTitle(activePlaceholder);
        var hid = document.getElementById(targetId);
        var val = hid ? hid.value : '';
        var v = val ? ymd(val) : { y: new Date().getFullYear(), m: new Date().getMonth(), d: new Date().getDate() };
        if (v) {
          currentView = { y: v.y, m: v.m };
        } else {
          currentView = { y: new Date().getFullYear(), m: new Date().getMonth() };
        }
        renderCalendarThreeMonths(val || null, getTodayYMD());
        showCalendarModal();
      }

      function doPrev() {
        var n = new Date();
        if (currentView.y < n.getFullYear() || (currentView.y === n.getFullYear() && currentView.m <= n.getMonth())) return;
        if (currentView.m === 0) { currentView.y--; currentView.m = 11; } else currentView.m--;
        var sel = rangeMode && rangeStep === 1 ? rangeMinDate : (activeTarget ? (document.getElementById(activeTarget) || {}).value : null) || null;
        var mn = rangeMode && rangeStep === 1 ? rangeMinDate : getTodayYMD();
        if (threeMonthsMode) renderCalendarThreeMonths(sel, mn);
        else if (twoMonthsMode) renderCalendarTwoMonths(sel, mn);
        else renderCalendar(sel, mn);
      }
      function doNext() {
        if (currentView.m === 11) { currentView.y++; currentView.m = 0; } else currentView.m++;
        var sel = rangeMode && rangeStep === 1 ? rangeMinDate : (activeTarget ? (document.getElementById(activeTarget) || {}).value : null) || null;
        var mn = rangeMode && rangeStep === 1 ? rangeMinDate : getTodayYMD();
        if (threeMonthsMode) renderCalendarThreeMonths(sel, mn);
        else if (twoMonthsMode) renderCalendarTwoMonths(sel, mn);
        else renderCalendar(sel, mn);
      }
      calPrevBtns.forEach(function(btn) { btn.addEventListener('click', doPrev); });
      calNextBtns.forEach(function(btn) { btn.addEventListener('click', doNext); });

      if (calBackdrop) calBackdrop.addEventListener('click', hideCalendarModal);

      document.addEventListener('click', function(e) {
        if (!cal.classList.contains('open')) return;
        if (cal.contains(e.target)) return;
        if (e.target === calBackdrop) return;
        var t = e.target;
        while (t && t !== document.body) {
          if (t.classList && (t.classList.contains('ek-date-trigger') || t.classList.contains('hero-date-trigger') || t.classList.contains('ek-date-wrap'))) return;
          if (twoMonthsMode && t.id === 'to') return;
          t = t.parentElement;
        }
        hideCalendarModal();
      });

      function openRangeCalendar(optTrigger, skipToReturn) {
        twoMonthsMode = false;
        threeMonthsMode = true;
        cal.classList.add('ek-calendar-twomonths', 'ek-calendar-threemonths');
        var trig = optTrigger || document.getElementById('dates-range-trigger');
        var depEl = document.getElementById('departure');
        var retEl = document.getElementById('return-date');
        var oneWay = document.querySelector('input[name="trip"]:checked') && document.querySelector('input[name="trip"]:checked').value === 'oneway';
        if (!depEl) return;
        activeTrigger = trig || document.getElementById('hero-date-trigger');
        activePlaceholder = oneWay ? 'Please choose your departure date' : 'Please choose departure – return';
        setCalendarTitle(activePlaceholder);
        var min = getTodayYMD();
        if (oneWay) {
          activeTarget = 'departure';
          rangeMode = false;
          var val = depEl.value || '';
          var v = val ? ymd(val) : null;
          if (v) currentView = { y: v.y, m: v.m };
          else currentView = { y: new Date().getFullYear(), m: new Date().getMonth() };
          renderCalendarThreeMonths(val || null, min);
        } else {
          rangeMode = true;
          if (skipToReturn && depEl.value) {
            rangeStep = 1;
            rangeMinDate = depEl.value;
            activeTarget = 'departure';
            var valRet = retEl ? retEl.value : '';
            var v = valRet ? ymd(valRet) : (depEl.value ? ymd(depEl.value) : null);
            if (v) currentView = { y: v.y, m: v.m };
            else currentView = { y: new Date().getFullYear(), m: new Date().getMonth() };
            setCalendarTitle('Please choose your return date');
            renderCalendarThreeMonths(valRet || null, depEl.value);
          } else {
            rangeStep = 0;
            rangeMinDate = null;
            activeTarget = 'departure';
            var val = depEl.value || '';
            var v = val ? ymd(val) : null;
            if (v) currentView = { y: v.y, m: v.m };
            else currentView = { y: new Date().getFullYear(), m: new Date().getMonth() };
            renderCalendarThreeMonths(val || null, min);
          }
        }
        showCalendarModal();
      }
      window.openRangeCalendar = openRangeCalendar;
      window.hideCalendarModal = hideCalendarModal;

      function openCalendarFromArrival() {
        var toSelect = document.getElementById('to');
        var card = document.querySelector('.flight-search-card');
        if (!toSelect || !card || card.classList.contains('multicity')) return;
        if (!toSelect.value) return;
        var trig = document.getElementById('hero-date-trigger');
        var depEl = document.getElementById('departure');
        var oneWay = document.querySelector('input[name="trip"]:checked') && document.querySelector('input[name="trip"]:checked').value === 'oneway';
        if (!depEl) return;
        twoMonthsMode = true;
        cal.classList.add('ek-calendar-twomonths');
        activeTrigger = trig || document.getElementById('hero-date-trigger');
        activePlaceholder = oneWay ? 'Please choose your departure date' : 'Please choose departure – return';
        setCalendarTitle(activePlaceholder);
        var min = getTodayYMD();
        if (oneWay) {
          activeTarget = 'departure';
          rangeMode = false;
          var val = depEl.value || '';
          var v = val ? ymd(val) : null;
          if (v) currentView = { y: v.y, m: v.m };
          else currentView = { y: new Date().getFullYear(), m: new Date().getMonth() };
          renderCalendarThreeMonths(val || null, min);
        } else {
          rangeMode = true;
          rangeStep = 0;
          rangeMinDate = null;
          activeTarget = 'departure';
          var val = depEl.value || '';
          var v = val ? ymd(val) : null;
          if (v) currentView = { y: v.y, m: v.m };
          else currentView = { y: new Date().getFullYear(), m: new Date().getMonth() };
          renderCalendarThreeMonths(val || null, min);
        }
        showCalendarModal();
      }

      (function initTodayAsDefault() {
        var today = getTodayYMD();
        var dep = document.getElementById('departure');
        var ret = document.getElementById('return-date');
        var mc0 = document.getElementById('mc-date-0');
        if (dep) { dep.value = ''; }
        if (ret) { ret.value = ''; }
        if (mc0) { mc0.value = today; }
        var mc0Trigger = document.querySelector('.mc-date[data-target="mc-date-0"]');
        if (mc0Trigger) setTrigger(mc0Trigger, today, 'Please choose date');
        var heroTrig = document.getElementById('hero-date-trigger');
        if (heroTrig) setTrigger(heroTrig, today, 'Select date');
      })();
      updateRangeTriggerText();

      var toSelect = document.getElementById('to');
      if (toSelect) {
        toSelect.addEventListener('change', function() {
          if (this.value) openCalendarFromArrival();
        });
      }

      var heroDateTrigger = document.getElementById('hero-date-trigger');
      if (heroDateTrigger) {
        heroDateTrigger.addEventListener('click', function(e) {
          e.preventDefault();
          openRangeCalendar(heroDateTrigger);
        });
      }

      var card = document.querySelector('.flight-search-card');
      var datesCombined = document.getElementById('dates-combined');
      var tripRadios = document.querySelectorAll('input[name="trip"]');
      function updateTripType() {
        var sel = document.querySelector('input[name="trip"]:checked');
        if (!card || !sel) return;
        card.classList.remove('one-way', 'multicity');
        if (datesCombined) datesCombined.classList.remove('one-way');
        var lab = datesCombined ? datesCombined.querySelector('label') : null;
        if (sel.value === 'oneway') {
          card.classList.add('one-way');
          if (datesCombined) datesCombined.classList.add('one-way');
          if (lab) lab.textContent = 'Departing';
        } else {
          if (lab) lab.textContent = 'Departing – Returning';
          if (sel.value === 'multicity') card.classList.add('multicity');
        }
        updateRangeTriggerText();
      }
      tripRadios.forEach(function(r) { r.addEventListener('change', updateTripType); });
      updateTripType();

      (function initPassengersDropdown() {
        var dropdown = document.getElementById('passengers-dropdown');
        if (dropdown && dropdown.parentElement !== document.body) {
          document.body.appendChild(dropdown);
        }
        var triggerMain = document.getElementById('passengers-trigger');
        var triggerMc = document.getElementById('mc-passengers-trigger');
        var adultMinus = document.getElementById('pax-adult-minus');
        var adultPlus = document.getElementById('pax-adult-plus');
        var adultVal = document.getElementById('pax-adult-val');
        var adultLabel = document.getElementById('pax-adult-label');
        var childMinus = document.getElementById('pax-child-minus');
        var childPlus = document.getElementById('pax-child-plus');
        var childVal = document.getElementById('pax-child-val');
        var childLabel = document.getElementById('pax-child-label');
        var infantMinus = document.getElementById('pax-infant-minus');
        var infantPlus = document.getElementById('pax-infant-plus');
        var infantVal = document.getElementById('pax-infant-val');
        var infantLabel = document.getElementById('pax-infant-label');
        var activeTrigger = null;
        var activePrefix = '';

        function getInputs(prefix) {
          return {
            adults: document.getElementById(prefix + 'passengers-adults'),
            children: document.getElementById(prefix + 'passengers-children'),
            infants: document.getElementById(prefix + 'passengers-infants')
          };
        }

        function getCounts(prefix) {
          var i = getInputs(prefix);
          return {
            adults: parseInt((i.adults && i.adults.value) || '1', 10) || 1,
            children: parseInt((i.children && i.children.value) || '0', 10) || 0,
            infants: parseInt((i.infants && i.infants.value) || '0', 10) || 0
          };
        }

        function setCounts(prefix, a, c, inf) {
          var i = getInputs(prefix);
          if (i.adults) i.adults.value = String(a);
          if (i.children) i.children.value = String(c);
          if (i.infants) i.infants.value = String(inf);
        }

        function formatTriggerText(a, c, inf) {
          var parts = [];
          if (a) parts.push(a === 1 ? '1 Adult' : a + ' Adults');
          if (c) parts.push(c === 1 ? '1 Child' : c + ' Children');
          if (inf) parts.push(inf === 1 ? '1 Infant' : inf + ' Infants');
          return parts.length ? parts.join(', ') : '1 Adult';
        }

        function syncDropdownFromCounts(a, c, inf) {
          adultVal.textContent = String(a);
          adultLabel.textContent = a === 1 ? '1 Adult' : a + ' Adults';
          childVal.textContent = String(c);
          childLabel.textContent = c === 0 ? '0 Child' : (c === 1 ? '1 Child' : c + ' Children');
          infantVal.textContent = String(inf);
          infantLabel.textContent = inf === 0 ? '0 Infant' : (inf === 1 ? '1 Infant' : inf + ' Infants');
          adultMinus.disabled = a <= 1;
          adultPlus.disabled = a >= 9 || (a + c + inf) >= 9;
          childMinus.disabled = c <= 0;
          childPlus.disabled = (a + c + inf) >= 9;
          infantMinus.disabled = inf <= 0;
          infantPlus.disabled = inf >= a || (a + c + inf) >= 9;
        }

        function updateTriggerText() {
          if (!activeTrigger) return;
          var cnt = getCounts(activePrefix);
          activeTrigger.textContent = formatTriggerText(cnt.adults, cnt.children, cnt.infants);
        }

        var passengersOpenTime = 0;
        function openFor(trigger, prefix) {
          if (!dropdown || !trigger) return;
          if (typeof window.closeClassDropdown === 'function') window.closeClassDropdown();
          activeTrigger = trigger;
          activePrefix = prefix;
          passengersOpenTime = Date.now();
          var cnt = getCounts(prefix);
          syncDropdownFromCounts(cnt.adults, cnt.children, cnt.infants);
          var rect = trigger.getBoundingClientRect();
          dropdown.style.top = (rect.bottom + 4) + 'px';
          dropdown.style.left = Math.max(8, Math.min(rect.left, window.innerWidth - 296)) + 'px';
          dropdown.classList.add('open');
          dropdown.style.display = 'block';
          trigger.setAttribute('aria-expanded', 'true');
          document.body.style.overflow = 'hidden';
        }

        function close() {
          if (!dropdown) return;
          dropdown.classList.remove('open');
          dropdown.style.display = 'none';
          if (activeTrigger) activeTrigger.setAttribute('aria-expanded', 'false');
          activeTrigger = null;
          activePrefix = '';
          document.body.style.overflow = '';
        }
        window.closePassengersDropdown = close;

        function change(delta, type) {
          if (!activePrefix) return;
          var cnt = getCounts(activePrefix);
          if (type === 'adult') {
            cnt.adults = Math.max(1, Math.min(9, cnt.adults + delta));
            if (cnt.infants > cnt.adults) cnt.infants = cnt.adults;
          } else if (type === 'child') {
            cnt.children = Math.max(0, Math.min(9, cnt.children + delta));
          } else if (type === 'infant') {
            cnt.infants = Math.max(0, Math.min(cnt.adults, cnt.infants + delta));
          }
          var total = cnt.adults + cnt.children + cnt.infants;
          if (total > 9) {
            if (type === 'adult') cnt.adults = 9 - cnt.children - cnt.infants;
            else if (type === 'child') cnt.children = 9 - cnt.adults - cnt.infants;
            else cnt.infants = 9 - cnt.adults - cnt.children;
          }
          setCounts(activePrefix, cnt.adults, cnt.children, cnt.infants);
          syncDropdownFromCounts(cnt.adults, cnt.children, cnt.infants);
          updateTriggerText();
        }

        if (triggerMain) triggerMain.addEventListener('click', function(e) {
          e.preventDefault();
          if (dropdown.classList.contains('open') && activeTrigger === this) { close(); return; }
          openFor(this, '');
        });
        var triggerHero = document.getElementById('hero-passengers-trigger');
        if (triggerHero) {
          triggerHero.addEventListener('mousedown', function(e) {
            e.preventDefault();
            e.stopPropagation();
            if (dropdown.classList.contains('open') && activeTrigger === this) { close(); return; }
            openFor(this, '');
          });
          triggerHero.addEventListener('click', function(e) { e.preventDefault(); e.stopPropagation(); });
        }
        if (triggerMc) triggerMc.addEventListener('click', function(e) {
          e.preventDefault();
          if (dropdown.classList.contains('open') && activeTrigger === this) { close(); return; }
          openFor(this, 'mc-');
        });

        function bindPaxBtn(btn, delta, type) {
          if (!btn) return;
          btn.addEventListener('mousedown', function(e) {
            e.preventDefault();
            e.stopPropagation();
            change(delta, type);
          });
        }
        bindPaxBtn(adultMinus, -1, 'adult');
        bindPaxBtn(adultPlus, 1, 'adult');
        bindPaxBtn(childMinus, -1, 'child');
        bindPaxBtn(childPlus, 1, 'child');
        bindPaxBtn(infantMinus, -1, 'infant');
        bindPaxBtn(infantPlus, 1, 'infant');

        document.addEventListener('click', function(e) {
          if (!dropdown || !dropdown.classList.contains('open')) return;
          if (dropdown.contains(e.target)) return;
          var t = e.target;
          while (t && t !== document.body) {
            if (t === triggerMain || t === triggerMc || t === triggerHero) return;
            t = t.parentElement;
          }
          close();
        });

        var scrollCloseTimeout;
        window.addEventListener('scroll', function() {
          if (!dropdown || !dropdown.classList.contains('open')) return;
          if ((Date.now() - passengersOpenTime) < 300) return;
          clearTimeout(scrollCloseTimeout);
          scrollCloseTimeout = setTimeout(function() { close(); }, 50);
        }, true);

        if (triggerMain) triggerMain.textContent = formatTriggerText(getCounts('').adults, getCounts('').children, getCounts('').infants);
        if (triggerMc) triggerMc.textContent = formatTriggerText(getCounts('mc-').adults, getCounts('mc-').children, getCounts('mc-').infants);
        if (triggerHero) triggerHero.textContent = formatTriggerText(getCounts('').adults, getCounts('').children, getCounts('').infants);
      })();

      (function initClassDropdown() {
        var classDropdown = document.getElementById('class-dropdown');
        if (classDropdown && classDropdown.parentElement !== document.body) {
          document.body.appendChild(classDropdown);
        }
        var classTrigger = document.getElementById('hero-class-trigger');
        var formClassSelect = document.getElementById('class');
        var options = classDropdown ? classDropdown.querySelectorAll('.class-dropdown-option') : [];
        var displayMap = { 'Economy Class': 'Economy', 'Premium Economy': 'Premium Economy', 'Business Class': 'Business Class', 'First Class': 'First Class' };

        function closeClass() {
          if (!classDropdown) return;
          classDropdown.classList.remove('open');
          classDropdown.style.display = 'none';
          if (classTrigger) classTrigger.setAttribute('aria-expanded', 'false');
        }
        window.closeClassDropdown = closeClass;

        function openClass() {
          if (!classDropdown || !classTrigger) return;
          if (typeof window.closePassengersDropdown === 'function') window.closePassengersDropdown();
          var rect = classTrigger.getBoundingClientRect();
          classDropdown.style.top = (rect.bottom + 4) + 'px';
          classDropdown.style.left = Math.max(8, Math.min(rect.left, window.innerWidth - 196)) + 'px';
          classDropdown.classList.add('open');
          classDropdown.style.display = 'block';
          classTrigger.setAttribute('aria-expanded', 'true');
          options.forEach(function(opt) {
            opt.classList.toggle('selected', formClassSelect && opt.getAttribute('data-value') === formClassSelect.value);
          });
        }

        if (classTrigger) {
          classTrigger.addEventListener('mousedown', function(e) {
            e.preventDefault();
            e.stopPropagation();
            if (classDropdown.classList.contains('open')) { closeClass(); return; }
            openClass();
          });
          classTrigger.addEventListener('click', function(e) { e.preventDefault(); e.stopPropagation(); });
        }

        options.forEach(function(opt) {
          opt.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            var val = opt.getAttribute('data-value');
            if (formClassSelect) formClassSelect.value = val;
            if (classTrigger) classTrigger.textContent = displayMap[val] || val;
            options.forEach(function(o) { o.classList.remove('selected'); });
            opt.classList.add('selected');
            closeClass();
          });
        });

        document.addEventListener('click', function(e) {
          if (!classDropdown || !classDropdown.classList.contains('open')) return;
          if (classDropdown.contains(e.target)) return;
          if (classTrigger && (e.target === classTrigger || classTrigger.contains(e.target))) return;
          var t = e.target;
          while (t && t !== document.body) {
            if (t === classTrigger) return;
            t = t.parentElement;
          }
          closeClass();
        });

        var classScrollTimeout;
        window.addEventListener('scroll', function() {
          if (!classDropdown || !classDropdown.classList.contains('open')) return;
          clearTimeout(classScrollTimeout);
          classScrollTimeout = setTimeout(closeClass, 50);
        }, true);

        if (classTrigger && formClassSelect) {
          classTrigger.textContent = displayMap[formClassSelect.value] || formClassSelect.value || 'Economy';
        }
      })();

      var addSegmentBtn = document.getElementById('add-segment');
      var segmentsContainer = document.getElementById('multicity-segments');
      var segmentIndex = 2;
      function addSegment() {
        var flightNum = document.querySelectorAll('.flight-search-segment').length + 1;
        var seg = document.querySelector('.flight-search-segment');
        if (!seg || !segmentsContainer) return;
        var clone = seg.cloneNode(true);
        clone.setAttribute('data-segment', segmentIndex);
        clone.querySelector('.flight-search-segment-label').textContent = 'Flight ' + flightNum;
        clone.querySelector('.mc-from').value = '';
        clone.querySelector('.mc-to').value = '';
        clone.querySelectorAll('.airport-autocomplete').forEach(function(wrap) {
          var inp = wrap.querySelector('.airport-input');
          var dd = wrap.querySelector('.airport-dropdown');
          if (inp && dd) initAirportAutocomplete(inp, dd);
        });
        var dateWrap = clone.querySelector('.ek-date-wrap');
        var id = 'mc-date-' + segmentIndex;
        var trig = dateWrap.querySelector('.ek-date-trigger');
        var hid = dateWrap.querySelector('.mc-date-input');
        if (trig) { trig.setAttribute('data-target', id); trig.setAttribute('data-segment', segmentIndex); trig.querySelector('.ek-date-trigger-text').textContent = 'Please choose date'; trig.classList.add('placeholder'); }
        if (hid) { hid.id = id; hid.name = id; hid.value = ''; }
        dateWrap.querySelector('.ek-date-trigger').addEventListener('click', function(e) {
          e.preventDefault();
          openCalendar(this, id, 'Please choose date');
        });
        segmentsContainer.insertBefore(clone, addSegmentBtn);
        segmentIndex++;
      }
      function wireMcDates() {
        document.querySelectorAll('.flight-search-segment .ek-date-trigger.mc-date').forEach(function(trig) {
          var tid = trig.getAttribute('data-target');
          var hid = document.getElementById(tid);
          if (hid) setTrigger(trig, hid.value, 'Please choose date');
        });
      }
      wireMcDates();
      document.querySelectorAll('.flight-search-segment .ek-date-trigger.mc-date').forEach(function(trig) {
        var tid = trig.getAttribute('data-target');
        trig.addEventListener('click', function(e) { e.preventDefault(); openCalendar(trig, tid, 'Please choose date'); });
      });
      if (addSegmentBtn) addSegmentBtn.addEventListener('click', addSegment);

      /* Hero search bar - sync with main form and submit */
      (function initHeroSearchBar() {
        var heroSwap = document.getElementById('hero-swap');
        var heroSearchBtn = document.getElementById('hero-search-btn');
        var fromHero = document.getElementById('from-hero');
        var toHero = document.getElementById('to-hero');
        var fromMain = document.getElementById('from');
        var toMain = document.getElementById('to');
        var tripHero = document.querySelectorAll('input[name="trip-hero"]');
        var tripMain = document.querySelectorAll('input[name="trip"]');
        var directHero = document.getElementById('direct-hero');
        var directMain = document.getElementById('direct-flights-only');

        if (heroSwap && fromHero && toHero) {
          heroSwap.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            var tmp = fromHero.value;
            fromHero.value = toHero.value;
            toHero.value = tmp;
            if (fromMain) fromMain.value = fromHero.value;
            if (toMain) toMain.value = toHero.value;
          });
        }
        var heroDatePrev = document.getElementById('hero-date-prev');
        var heroDateNext = document.getElementById('hero-date-next');
        var heroDateTrigger = document.getElementById('hero-date-trigger');
        var depEl = document.getElementById('departure');
        if (heroDatePrev && heroDateNext && heroDateTrigger && depEl) {
          function addDays(ymdStr, delta) {
            if (!ymdStr) ymdStr = getTodayYMD();
            var p = ymd(ymdStr);
            if (!p) return ymdStr;
            var d = new Date(p.y, p.m, p.d + delta);
            return d.getFullYear() + '-' + ('0' + (d.getMonth() + 1)).slice(-2) + '-' + ('0' + d.getDate()).slice(-2);
          }
          heroDatePrev.addEventListener('click', function() {
            var cur = depEl.value || getTodayYMD();
            var prev = addDays(cur, -1);
            if (prev >= getTodayYMD()) {
              depEl.value = prev;
              setTrigger(heroDateTrigger, prev, 'Select date');
              updateRangeTriggerText();
            }
          });
          heroDateNext.addEventListener('click', function() {
            var cur = depEl.value || getTodayYMD();
            depEl.value = addDays(cur, 1);
            setTrigger(heroDateTrigger, depEl.value, 'Select date');
            updateRangeTriggerText();
          });
        }
        if (tripHero.length && tripMain.length) {
          tripHero.forEach(function(r) {
            r.addEventListener('change', function() {
              var main = document.querySelector('input[name="trip"][value="' + this.value + '"]');
              if (main) { main.checked = true; main.dispatchEvent(new Event('change', { bubbles: true })); }
            });
          });
          tripMain.forEach(function(r) {
            r.addEventListener('change', function() {
              var hero = document.querySelector('input[name="trip-hero"][value="' + this.value + '"]');
              if (hero) hero.checked = true;
            });
          });
        }
        if (directHero && directMain) {
          directHero.addEventListener('change', function() { directMain.checked = directHero.checked; });
          directMain.addEventListener('change', function() { directHero.checked = directMain.checked; });
        }
        if (fromMain && fromHero) {
          fromMain.addEventListener('input', function() { fromHero.value = fromMain.value; });
          fromMain.addEventListener('change', function() { fromHero.value = fromMain.value; });
        }
        if (toMain && toHero) {
          toMain.addEventListener('input', function() { toHero.value = toMain.value; });
          toMain.addEventListener('change', function() { toHero.value = toMain.value; });
        }
        if (heroSearchBtn) {
          heroSearchBtn.addEventListener('click', function() {
            var tripHeroChecked = document.querySelector('input[name="trip-hero"]:checked');
            var isMulti = tripHeroChecked && tripHeroChecked.value === 'multicity';
            if (fromHero) fromMain.value = fromHero.value;
            if (toHero) toMain.value = toHero.value;
            if (directHero && directMain) directMain.checked = directHero.checked;
            if (tripHeroChecked && tripMain.length) {
              var mainRadio = document.querySelector('input[name="trip"][value="' + tripHeroChecked.value + '"]');
              if (mainRadio) { mainRadio.checked = true; }
            }
            if (isMulti) {
              var seg0 = document.querySelector('.flight-search-segment[data-segment="0"]');
              var mcFrom = seg0 ? seg0.querySelector('.mc-from') : null;
              var mcTo = seg0 ? seg0.querySelector('.mc-to') : null;
              var mcDate0 = document.getElementById('mc-date-0');
              var depEl = document.getElementById('departure');
              if (mcFrom && fromHero) mcFrom.value = fromHero.value;
              if (mcTo && toHero) mcTo.value = toHero.value;
              if (mcDate0 && depEl) mcDate0.value = depEl.value || '';
            }
            var form = document.getElementById('flight-search-form');
            if (form) form.requestSubmit();
          });
        }
      })();
    })();
  </script>
  <button type="button" id="scroll-to-top" aria-label="Scroll to top">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>
  </button>
  <script>
    (function(){
      // Prevent browser scroll restoration
      if('scrollRestoration' in history){
        history.scrollRestoration='manual';
      }
      // Force scroll to top immediately (no smooth behavior)
      function forceScrollTop(){
        if(window.scrollY!==0||document.documentElement.scrollTop!==0||(document.body&&document.body.scrollTop!==0)){
          window.scrollTo(0,0);
          document.documentElement.scrollTop=0;
          if(document.body) document.body.scrollTop=0;
        }
      }
      // Immediate scroll prevention
      forceScrollTop();
      // Handle DOMContentLoaded
      if(document.readyState==='loading'){
        document.addEventListener('DOMContentLoaded',forceScrollTop);
      }
      // Handle pageshow event to prevent scroll restoration
      window.addEventListener('pageshow',function(e){
        document.body.style.overflow='';
        if(e.persisted||window.scrollY>0){
          forceScrollTop();
        }
      });
      // Ensure scroll position is reset after page load
      window.addEventListener('load',function(){
        setTimeout(function(){
          if(window.scrollY>0&&!window.location.hash){
            forceScrollTop();
          }
        },0);
      });
      // Use requestAnimationFrame to ensure scroll stays at top
      requestAnimationFrame(function(){
        requestAnimationFrame(function(){
          forceScrollTop();
          // Re-enable smooth scrolling after ensuring we're at top
          setTimeout(function(){
            document.documentElement.style.scrollBehavior='smooth';
          },100);
        });
      });
      var header=document.querySelector('.main-header');
      var btn=document.getElementById('scroll-to-top');
      var navToggle=document.getElementById('nav-toggle');
      if(navToggle&&header){
        navToggle.addEventListener('click',function(){
          var open=header.classList.toggle('nav-open');
          navToggle.setAttribute('aria-expanded',open);
          navToggle.setAttribute('aria-label',open?'Close menu':'Open menu');
        });
        document.querySelectorAll('.nav-menu a').forEach(function(a){
          a.addEventListener('click',function(){header.classList.remove('nav-open');navToggle.setAttribute('aria-expanded','false');navToggle.setAttribute('aria-label','Open menu');});
        });
      }
      function onScroll(){
        if(header){if(window.scrollY>60)header.classList.add('scrolled');else header.classList.remove('scrolled');}
        if(btn){if(window.scrollY>400)btn.classList.add('visible');else btn.classList.remove('visible');}
      }
      window.addEventListener('scroll',onScroll,{passive:true});
      if(btn)btn.addEventListener('click',function(){window.scrollTo({top:0,behavior:'smooth'});});
      var sections=document.querySelectorAll('.section-animate');
      if(typeof IntersectionObserver!=='undefined'){
        var io=new IntersectionObserver(function(entries){entries.forEach(function(e){if(e.isIntersecting)e.target.classList.add('visible');});},{rootMargin:'0px 0px -50px 0px',threshold:0.08});
        sections.forEach(function(s){io.observe(s);});
      }else{sections.forEach(function(s){s.classList.add('visible');});}
    })();
  </script>
</body>
</html>
